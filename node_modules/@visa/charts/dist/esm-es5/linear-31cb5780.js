import{i as interpolateNumber}from"./index-a66b69d4.js";import{i as interpolate}from"./value-dde86bbf.js";function ascending(n,r){return n==null||r==null?NaN:n<r?-1:n>r?1:n>=r?0:NaN}function descending(n,r){return n==null||r==null?NaN:r<n?-1:r>n?1:r>=n?0:NaN}function bisector(n){var r,t,e;if(n.length!==2){r=ascending;t=function(r,t){return ascending(n(r),t)};e=function(r,t){return n(r)-t}}else{r=n===ascending||n===descending?n:zero;t=n;e=n}function i(n,e,i,a){if(i===void 0){i=0}if(a===void 0){a=n.length}if(i<a){if(r(e,e)!==0)return a;do{var u=i+a>>>1;if(t(n[u],e)<0)i=u+1;else a=u}while(i<a)}return i}function a(n,e,i,a){if(i===void 0){i=0}if(a===void 0){a=n.length}if(i<a){if(r(e,e)!==0)return a;do{var u=i+a>>>1;if(t(n[u],e)<=0)i=u+1;else a=u}while(i<a)}return i}function u(n,r,t,a){if(t===void 0){t=0}if(a===void 0){a=n.length}var u=i(n,r,t,a-1);return u>t&&e(n[u-1],r)>-e(n[u],r)?u-1:u}return{left:i,center:u,right:a}}function zero(){return 0}function number$1(n){return n===null?NaN:+n}var ascendingBisect=bisector(ascending);var bisectRight=ascendingBisect.right;bisector(number$1).center;var bisect=bisectRight;var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(n,r,t){var e=(r-n)/Math.max(0,t),i=Math.floor(Math.log10(e)),a=e/Math.pow(10,i),u=a>=e10?10:a>=e5?5:a>=e2?2:1;var f,o,c;if(i<0){c=Math.pow(10,-i)/u;f=Math.round(n*c);o=Math.round(r*c);if(f/c<n)++f;if(o/c>r)--o;c=-c}else{c=Math.pow(10,i)*u;f=Math.round(n/c);o=Math.round(r/c);if(f*c<n)++f;if(o*c>r)--o}if(o<f&&.5<=t&&t<2)return tickSpec(n,r,t*2);return[f,o,c]}function ticks(n,r,t){r=+r,n=+n,t=+t;if(!(t>0))return[];if(n===r)return[n];var e=r<n,i=e?tickSpec(r,n,t):tickSpec(n,r,t),a=i[0],u=i[1],f=i[2];if(!(u>=a))return[];var o=u-a+1,c=new Array(o);if(e){if(f<0)for(var s=0;s<o;++s)c[s]=(u-s)/-f;else for(var s=0;s<o;++s)c[s]=(u-s)*f}else{if(f<0)for(var s=0;s<o;++s)c[s]=(a+s)/-f;else for(var s=0;s<o;++s)c[s]=(a+s)*f}return c}function tickIncrement(n,r,t){r=+r,n=+n,t=+t;return tickSpec(n,r,t)[2]}function tickStep(n,r,t){r=+r,n=+n,t=+t;var e=r<n,i=e?tickIncrement(r,n,t):tickIncrement(n,r,t);return(e?-1:1)*(i<0?1/-i:i)}function interpolateRound(n,r){return n=+n,r=+r,function(t){return Math.round(n*(1-t)+r*t)}}function initRange(n,r){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(r).domain(n);break}return this}function initInterpolator(n,r){switch(arguments.length){case 0:break;case 1:this.interpolator(n);break;default:this.interpolator(r).domain(n);break}return this}var prefix="$";function Map(){}Map.prototype=map$2.prototype={constructor:Map,has:function(n){return prefix+n in this},get:function(n){return this[prefix+n]},set:function(n,r){this[prefix+n]=r;return this},remove:function(n){var r=prefix+n;return r in this&&delete this[r]},clear:function(){for(var n in this)if(n[0]===prefix)delete this[n]},keys:function(){var n=[];for(var r in this)if(r[0]===prefix)n.push(r.slice(1));return n},values:function(){var n=[];for(var r in this)if(r[0]===prefix)n.push(this[r]);return n},entries:function(){var n=[];for(var r in this)if(r[0]===prefix)n.push({key:r.slice(1),value:this[r]});return n},size:function(){var n=0;for(var r in this)if(r[0]===prefix)++n;return n},empty:function(){for(var n in this)if(n[0]===prefix)return false;return true},each:function(n){for(var r in this)if(r[0]===prefix)n(this[r],r.slice(1),this)}};function map$2(n,r){var t=new Map;if(n instanceof Map)n.each((function(n,r){t.set(r,n)}));else if(Array.isArray(n)){var e=-1,i=n.length,a;if(r==null)while(++e<i)t.set(e,n[e]);else while(++e<i)t.set(r(a=n[e],e,n),a)}else if(n)for(var u in n)t.set(u,n[u]);return t}function nest(){var n=[],r=[],t,e,i;function a(r,i,u,f){if(i>=n.length){if(t!=null)r.sort(t);return e!=null?e(r):r}var o=-1,c=r.length,s=n[i++],l,h,p=map$2(),m,d=u();while(++o<c){if(m=p.get(l=s(h=r[o])+"")){m.push(h)}else{p.set(l,[h])}}p.each((function(n,r){f(d,r,a(n,i,u,f))}));return d}function u(t,i){if(++i>n.length)return t;var a,f=r[i-1];if(e!=null&&i>=n.length)a=t.entries();else a=[],t.each((function(n,r){a.push({key:r,values:u(n,i)})}));return f!=null?a.sort((function(n,r){return f(n.key,r.key)})):a}return i={object:function(n){return a(n,0,createObject,setObject)},map:function(n){return a(n,0,createMap,setMap)},entries:function(n){return u(a(n,0,createMap,setMap),0)},key:function(r){n.push(r);return i},sortKeys:function(t){r[n.length-1]=t;return i},sortValues:function(n){t=n;return i},rollup:function(n){e=n;return i}}}function createObject(){return{}}function setObject(n,r,t){n[r]=t}function createMap(){return map$2()}function setMap(n,r,t){n.set(r,t)}var array=Array.prototype;var map$1=array.map;var slice=array.slice;var implicit={name:"implicit"};function ordinal(){var n=map$2(),r=[],t=[],e=implicit;function i(i){var a=i+"",u=n.get(a);if(!u){if(e!==implicit)return e;n.set(a,u=r.push(i))}return t[(u-1)%t.length]}i.domain=function(t){if(!arguments.length)return r.slice();r=[],n=map$2();var e=-1,a=t.length,u,f;while(++e<a)if(!n.has(f=(u=t[e])+""))n.set(f,r.push(u));return i};i.range=function(n){return arguments.length?(t=slice.call(n),i):t.slice()};i.unknown=function(n){return arguments.length?(e=n,i):e};i.copy=function(){return ordinal(r,t).unknown(e)};initRange.apply(i,arguments);return i}function constant(n){return function(){return n}}function number(n){return+n}var unit=[0,1];function identity$1(n){return n}function normalize(n,r){return(r-=n=+n)?function(t){return(t-n)/r}:constant(isNaN(r)?NaN:.5)}function clamper(n){var r=n[0],t=n[n.length-1],e;if(r>t)e=r,r=t,t=e;return function(n){return Math.max(r,Math.min(t,n))}}function bimap(n,r,t){var e=n[0],i=n[1],a=r[0],u=r[1];if(i<e)e=normalize(i,e),a=t(u,a);else e=normalize(e,i),a=t(a,u);return function(n){return a(e(n))}}function polymap(n,r,t){var e=Math.min(n.length,r.length)-1,i=new Array(e),a=new Array(e),u=-1;if(n[e]<n[0]){n=n.slice().reverse();r=r.slice().reverse()}while(++u<e){i[u]=normalize(n[u],n[u+1]);a[u]=t(r[u],r[u+1])}return function(r){var t=bisect(n,r,1,e)-1;return a[t](i[t](r))}}function copy(n,r){return r.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function transformer(){var n=unit,r=unit,t=interpolate,e,i,a,u=identity$1,f,o,c;function s(){f=Math.min(n.length,r.length)>2?polymap:bimap;o=c=null;return l}function l(i){return isNaN(i=+i)?a:(o||(o=f(n.map(e),r,t)))(e(u(i)))}l.invert=function(t){return u(i((c||(c=f(r,n.map(e),interpolateNumber)))(t)))};l.domain=function(r){return arguments.length?(n=map$1.call(r,number),u===identity$1||(u=clamper(n)),s()):n.slice()};l.range=function(n){return arguments.length?(r=slice.call(n),s()):r.slice()};l.rangeRound=function(n){return r=slice.call(n),t=interpolateRound,s()};l.clamp=function(r){return arguments.length?(u=r?clamper(n):identity$1,l):u!==identity$1};l.interpolate=function(n){return arguments.length?(t=n,s()):t};l.unknown=function(n){return arguments.length?(a=n,l):a};return function(n,r){e=n,i=r;return s()}}function continuous(n,r){return transformer()(n,r)}function formatDecimal(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function formatDecimalParts(n,r){if((t=(n=r?n.toExponential(r-1):n.toExponential()).indexOf("e"))<0)return null;var t,e=n.slice(0,t);return[e.length>1?e[0]+e.slice(2):e,+n.slice(t+1)]}function exponent(n){return n=formatDecimalParts(Math.abs(n)),n?n[1]:NaN}function formatGroup(n,r){return function(t,e){var i=t.length,a=[],u=0,f=n[0],o=0;while(i>0&&f>0){if(o+f+1>e)f=Math.max(1,e-o);a.push(t.substring(i-=f,i+f));if((o+=f+1)>e)break;f=n[u=(u+1)%n.length]}return a.reverse().join(r)}}function formatNumerals(n){return function(r){return r.replace(/[0-9]/g,(function(r){return n[+r]}))}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(n){if(!(r=re.exec(n)))throw new Error("invalid format: "+n);var r;return new FormatSpecifier({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(n){this.fill=n.fill===undefined?" ":n.fill+"";this.align=n.align===undefined?">":n.align+"";this.sign=n.sign===undefined?"-":n.sign+"";this.symbol=n.symbol===undefined?"":n.symbol+"";this.zero=!!n.zero;this.width=n.width===undefined?undefined:+n.width;this.comma=!!n.comma;this.precision=n.precision===undefined?undefined:+n.precision;this.trim=!!n.trim;this.type=n.type===undefined?"":n.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(n){n:for(var r=n.length,t=1,e=-1,i;t<r;++t){switch(n[t]){case".":e=i=t;break;case"0":if(e===0)e=t;i=t;break;default:if(!+n[t])break n;if(e>0)e=0;break}}return e>0?n.slice(0,e)+n.slice(i+1):n}var prefixExponent;function formatPrefixAuto(n,r){var t=formatDecimalParts(n,r);if(!t)return n+"";var e=t[0],i=t[1],a=i-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,u=e.length;return a===u?e:a>u?e+new Array(a-u+1).join("0"):a>0?e.slice(0,a)+"."+e.slice(a):"0."+new Array(1-a).join("0")+formatDecimalParts(n,Math.max(0,r+a-1))[0]}function formatRounded(n,r){var t=formatDecimalParts(n,r);if(!t)return n+"";var e=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+e:e.length>i+1?e.slice(0,i+1)+"."+e.slice(i+1):e+new Array(i-e.length+2).join("0")}var formatTypes={"%":function(n,r){return(n*100).toFixed(r)},b:function(n){return Math.round(n).toString(2)},c:function(n){return n+""},d:formatDecimal,e:function(n,r){return n.toExponential(r)},f:function(n,r){return n.toFixed(r)},g:function(n,r){return n.toPrecision(r)},o:function(n){return Math.round(n).toString(8)},p:function(n,r){return formatRounded(n*100,r)},r:formatRounded,s:formatPrefixAuto,X:function(n){return Math.round(n).toString(16).toUpperCase()},x:function(n){return Math.round(n).toString(16)}};function identity(n){return n}var map=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(n){var r=n.grouping===undefined||n.thousands===undefined?identity:formatGroup(map.call(n.grouping,Number),n.thousands+""),t=n.currency===undefined?"":n.currency[0]+"",e=n.currency===undefined?"":n.currency[1]+"",i=n.decimal===undefined?".":n.decimal+"",a=n.numerals===undefined?identity:formatNumerals(map.call(n.numerals,String)),u=n.percent===undefined?"%":n.percent+"",f=n.minus===undefined?"-":n.minus+"",o=n.nan===undefined?"NaN":n.nan+"";function c(n){n=formatSpecifier(n);var c=n.fill,s=n.align,l=n.sign,h=n.symbol,p=n.zero,m=n.width,d=n.comma,v=n.precision,M=n.trim,b=n.type;if(b==="n")d=true,b="g";else if(!formatTypes[b])v===undefined&&(v=12),M=true,b="g";if(p||c==="0"&&s==="=")p=true,c="0",s="=";var y=h==="$"?t:h==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",x=h==="$"?e:/[%p]/.test(b)?u:"";var k=formatTypes[b],N=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function g(n){var t=y,e=x,u,h,g;if(b==="c"){e=k(n)+e;n=""}else{n=+n;var w=n<0||1/n<0;n=isNaN(n)?o:k(Math.abs(n),v);if(M)n=formatTrim(n);if(w&&+n===0&&l!=="+")w=false;t=(w?l==="("?l:f:l==="-"||l==="("?"":l)+t;e=(b==="s"?prefixes[8+prefixExponent/3]:"")+e+(w&&l==="("?")":"");if(N){u=-1,h=n.length;while(++u<h){if(g=n.charCodeAt(u),48>g||g>57){e=(g===46?i+n.slice(u+1):n.slice(u))+e;n=n.slice(0,u);break}}}}if(d&&!p)n=r(n,Infinity);var $=t.length+n.length+e.length,S=$<m?new Array(m-$+1).join(c):"";if(d&&p)n=r(S+n,S.length?m-e.length:Infinity),S="";switch(s){case"<":n=t+n+e+S;break;case"=":n=t+S+n+e;break;case"^":n=S.slice(0,$=S.length>>1)+t+n+e+S.slice($);break;default:n=S+t+n+e;break}return a(n)}g.toString=function(){return n+""};return g}function s(n,r){var t=c((n=formatSpecifier(n),n.type="f",n)),e=Math.max(-8,Math.min(8,Math.floor(exponent(r)/3)))*3,i=Math.pow(10,-e),a=prefixes[8+e/3];return function(n){return t(i*n)+a}}return{format:c,formatPrefix:s}}var locale;var format;var formatPrefix;defaultLocale({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function defaultLocale(n){locale=formatLocale(n);format=locale.format;formatPrefix=locale.formatPrefix;return locale}function precisionFixed(n){return Math.max(0,-exponent(Math.abs(n)))}function precisionPrefix(n,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(r)/3)))*3-exponent(Math.abs(n)))}function precisionRound(n,r){n=Math.abs(n),r=Math.abs(r)-n;return Math.max(0,exponent(r)-exponent(n))+1}function tickFormat(n,r,t,e){var i=tickStep(n,r,t),a;e=formatSpecifier(e==null?",f":e);switch(e.type){case"s":{var u=Math.max(Math.abs(n),Math.abs(r));if(e.precision==null&&!isNaN(a=precisionPrefix(i,u)))e.precision=a;return formatPrefix(e,u)}case"":case"e":case"g":case"p":case"r":{if(e.precision==null&&!isNaN(a=precisionRound(i,Math.max(Math.abs(n),Math.abs(r)))))e.precision=a-(e.type==="e");break}case"f":case"%":{if(e.precision==null&&!isNaN(a=precisionFixed(i)))e.precision=a-(e.type==="%")*2;break}}return format(e)}function linearish(n){var r=n.domain;n.ticks=function(n){var t=r();return ticks(t[0],t[t.length-1],n==null?10:n)};n.tickFormat=function(n,t){var e=r();return tickFormat(e[0],e[e.length-1],n==null?10:n,t)};n.nice=function(t){if(t==null)t=10;var e=r(),i=0,a=e.length-1,u=e[i],f=e[a],o;if(f<u){o=u,u=f,f=o;o=i,i=a,a=o}o=tickIncrement(u,f,t);if(o>0){u=Math.floor(u/o)*o;f=Math.ceil(f/o)*o;o=tickIncrement(u,f,t)}else if(o<0){u=Math.ceil(u*o)/o;f=Math.floor(f*o)/o;o=tickIncrement(u,f,t)}if(o>0){e[i]=Math.floor(u/o)*o;e[a]=Math.ceil(f/o)*o;r(e)}else if(o<0){e[i]=Math.ceil(u*o)/o;e[a]=Math.floor(f*o)/o;r(e)}return n};return n}function linear(){var n=continuous(identity$1,identity$1);n.copy=function(){return copy(n,linear())};initRange.apply(n,arguments);return linearish(n)}export{identity$1 as a,copy as b,continuous as c,bisector as d,linearish as e,bisect as f,initInterpolator as g,transformer as h,initRange as i,linear as l,map$1 as m,nest as n,ordinal as o,slice as s,tickStep as t};
//# sourceMappingURL=linear-31cb5780.js.map