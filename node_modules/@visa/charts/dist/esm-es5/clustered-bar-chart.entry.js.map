{"version":3,"names":["propDefaultValues","Utils","ClusteredBarChartDefaultValues","mainTitle","subTitle","text","height","width","margin","top","bottom","right","left","padding","localization","ordinalAccessor","valueAccessor","groupAccessor","reverseOrder","layout","xAxis","yAxis","wrapLabel","colorPalette","colorPaletteCategorical","hoverStyle","clickStyle","referenceStyle","cursor","roundedCorner","barIntervalRatio","groupIntervalRatio","hoverOpacity","dataLabel","legend","categoryLegend","tooltipLabel","showTooltip","accessibility","animationConfig","highestHeadingLevel","referenceLines","annotations","clickHighlight","suppressEvents","clusteredBarChartCss","ClusteredBarChartStyle0","configLocalization","getGlobalInstances","getActiveLanguageString","verifyTextHasSpace","checkAttributeTransitions","createTextStrokeFilter","drawHoverStrokes","removeHoverStrokes","buildStrokes","convertColorsToTextures","initializeDescriptionRoot","initializeElementAccess","setElementFocusHandler","setElementAccessID","setAccessibilityController","hideNonessentialGroups","setAccessTitle","setAccessSubtitle","setAccessLongDescription","setAccessExecutiveSummary","setAccessPurpose","setAccessContext","setAccessStatistics","setAccessChartCounts","setAccessXAxis","setAccessYAxis","setAccessStructure","setAccessAnnotation","retainAccessFocus","checkAccessFocus","setElementInteractionAccessState","setAccessibilityDescriptionWidth","autoTextColor","annotate","chartAccessors","convertVisaColor","checkInteraction","checkClicked","checkHovered","drawAxis","drawGrid","drawLegend","setLegendInteractionState","drawTooltip","formatDataLabel","formatDate","getColors","getLicenses","getPadding","getScopedData","initTooltipStyle","overrideTitleTooltip","placeDataLabels","scopeDataKeys","transitionEndAll","visaColors","validateAccessibilityProps","validateLocalizationProps","findTagLevel","prepareRenderChange","roundTo","resolveLabelCollision","setSubTitle","setReferenceLine","ClusteredBarChart","this","shouldValidateAccessibility","shouldValidateLocalization","nest","datakeys","legendData","updated","shouldValidate","shouldUpdateData","shouldSetDimensions","shouldUpdateScales","shouldValidateAxes","shouldUpdateAnnotations","shouldResetRoot","shouldUpdateTableData","shouldSetColors","shouldSetSubTitle","shouldValidateLabelPlacement","shouldValidateDataLabelAccessor","shouldValidateInteractionKeys","shouldSetSelectionClass","shouldUpdateXAxis","shouldUpdateYAxis","shouldUpdateXGrid","shouldUpdateYGrid","shouldUpdateBaseline","shouldCheckValueAxis","shouldCheckLabelAxis","shouldSetGlobalSelections","shouldEnterUpdateExit","shouldUpdateGeometries","shouldUpdateCorners","shouldUpdateLegendData","shouldUpdateLegend","shouldUpdateLegendInteractivity","shouldSetLegendCursor","shouldUpdateReferenceLines","shouldUpdateCursor","shouldDrawInteractionState","shouldSetLabelOpacity","shouldSetLabelPosition","shouldSetLabelContent","shouldCheckLabelColor","shouldBindInteractivity","shouldUpdateDescriptionWrapper","shouldSetChartAccessibilityTitle","shouldSetChartAccessibilitySubtitle","shouldSetChartAccessibilityLongDescription","shouldSetChartAccessibilityExecutiveSummary","shouldSetChartAccessibilityStatisticalNotes","shouldSetChartAccessibilityStructureNotes","shouldSetParentSVGAccessibility","shouldSetGeometryAccessibilityAttributes","shouldSetGeometryAriaLabels","shouldSetGroupAccessibilityLabel","shouldSetChartAccessibilityPurpose","shouldSetChartAccessibilityContext","shouldSetTestingAttributes","shouldRedrawWrapper","shouldSetTagLevels","shouldSetChartAccessibilityCount","shouldSetYAxisAccessibility","shouldSetXAxisAccessibility","shouldSetAnnotationAccessibility","shouldSetTextures","shouldSetStrokes","shouldSetLocalizationConfig","strokes","topLevel","bottomLevel","textTreatmentHandler","d","i","n","me","select","bgColor","_this","length","innerInteractionKeys","color","hoverHighlight","preparedColors","autoPlacementBackgroundColor","placement","collisionPlacement","attr","y","dark_text","classed","root","svg","node","id","chartID","prototype","dataWatcher","_newData","_oldData","idWatcher","newID","_oldID","console","error","headingWatcher","_newVal","_oldVal","titleWatcher","subtitleWatcher","dimensionWatcher","layoutWatcher","ordinalAccessorWatcher","interactionKeys","valueAccessorWatcher","groupAccessorWatcher","reverseOrderWatcher","xAxisWatcher","newGridVal","gridVisible","oldGridVal","newTickInterval","tickInterval","oldTickInterval","yAxisWatcher","wrapLabelWatcher","colorsWatcher","hoverStyleWatcher","clickStyleWatcher","referenceWatcher","cursorWatcher","cornerWatcher","intervalRatioWatcher","groupIntervalRatioWatcher","hoverOpacityWatcher","labelWatcher","newPlacementVal","oldPlacementVal","newCollisionPlacementVal","oldCollisionPlacementVal","newVisibleVal","visible","oldVisibleVal","newAccessor","labelAccessor","oldAccessor","newFormatVal","format","oldFormatVal","newCollisionHideOnlyVal","collisionHideOnly","oldCollisionHideOnlyVal","tooltipLabelWatcher","accessibilityWatcher","newTitle","title","oldTitle","newExecutiveSummary","executiveSummary","oldExecutiveSummary","newPurpose","purpose","oldPurpose","newLongDescription","longDescription","oldLongDescription","newContext","contextExplanation","oldContext","newStatisticalNotes","statisticalNotes","oldStatisticalNotes","newStructureNotes","structureNotes","oldStructureNotes","newincludeDataKeyNames","includeDataKeyNames","oldincludeDataKeyNames","newElementDescriptionAccessor","elementDescriptionAccessor","oldElementDescriptionAccessor","newTextures","hideTextures","oldTextures","newSmallValue","showSmallLabels","oldSmallValue","newStrokes","hideStrokes","oldStrokes","newKeyNav","keyboardNavConfig","disabled","oldKeyNav","newInterface","elementsAreInterface","oldInterface","legendWatcher","newInteractiveVal","interactive","oldInteractiveVal","localizationWatcher","newLanguage","language","oldLanguage","newNumeralLocale","numeralLocale","oldNumeralLocale","annotationsWatcher","valueOverrideWatcher","clickWatcher","hoverWatcher","interactionWatcher","dataKeyNamesWatcher","suppressWatcher","unitTestWatcher","componentWillLoad","uniqueID","uuid","initialLoadEvent","emit","Promise","resolve","duration","defaults","clusteredBarChartEl","setLocalizationConfig","setTagLevels","prepareData","prepareLegendData","setDimensions","prepareScales","validateInteractionKeys","validateDataLabelAccessor","validateAxes","validateLabelPlacement","setTableData","shouldValidateAccessibilityProps","shouldValidateLocalizationProps","setColors","componentWillUpdate","componentDidLoad","renderRootElements","setTooltipInitialStyle","setChartDescriptionWrapper","setChartAccessibilityTitle","setChartAccessibilitySubtitle","setChartAccessibilityLongDescription","setChartAccessibilityExecutiveSummary","setChartAccessibilityPurpose","setChartAccessibilityContext","setChartAccessibilityStatisticalNotes","setChartAccessibilityStructureNotes","setParentSVGAccessibility","reSetRoot","setTextures","setStrokes","setSubTitleElements","drawXGrid","drawYGrid","setGlobalSelections","setTestingAttributes","enterGeometries","updateGeometries","exitGeometries","enterDataLabels","updateDataLabels","exitDataLabels","drawGeometries","setChartCountAccessibility","setGeometryAccessibilityAttributes","setGeometryAriaLabels","drawLegendElements","bindLegendInteractivity","setLabelContent","processLabelPosition","updateLabels","drawReferenceLines","setSelectedClass","checkLabelColorAgainstBackground","updateCursor","bindInteractivity","drawAnnotations","setAnnotationAccessibility","drawXAxis","setXAxisAccessibility","drawYAxis","setYAxisAccessibility","drawBaseline","onChangeHandler","barG","setGroupAccessibilityID","then","initialLoadEndEvent","componentDidUpdate","setRoundedCorners","setLabelPosition","updateInteractionState","setLabelOpacity","setLegendCursor","drawEndEvent","windowInstances","languageString","i18Next","languageObject","getResourceBundle","numeralObject","numeral","localeData","skipValidation","Object","assign","disableValidation","data","context","onClickEvent","clickEvent","undefined","innerLabelAccessor","getLanguageString","innerHeight","innerWidth","innerPaddedHeight","innerPaddedWidth","map","parseFloat","Date","date","offsetTimezone","key","entries","keys","tableData","tableColumns","minBarValue","minValueOverride","min","maxBarValue","maxValueOverride","max","scaleLinear","domain","Math","range","x0","scaleBand","x1","values","rangeRound","bandwidth","x","y0","y1","innerXAxis","innerYAxis","subTitleG","colors","colorsArray","colorArr","colorsToConvert","textures","rootSVG","scheme","disableTransitions","copy","append","rootG","gridG","labelG","legendG","tooltipG","referencesG","unitTest","updateBarWrappers","concat","update","updateLabelWrappers","selectAll","changeSvg","selection","namespace","easing","easeCircleIn","changeRoot","changeRootG","axisAccessor","axisLabel","label","dataKeyNames","axisScale","hide","rootEle","hasXAxis","xAxisLabel","hasYAxis","yAxisLabel","markOffset","dataBoundToWrappers","enterBarWrappers","enter","exitBarWrappers","exit","merge","dataBoundToGeometries","enterSize","size","exitSize","dataBoundToLabelWrappers","enterLabelWrappers","exitLabelWrappers","dataBoundToLabels","enterLabels","exitLabels","interrupt","ordinalAxis","ordinalDimension","valueAxis","valueDimension","choice","each","_","_d","on","onClickHandler","onHoverHandler","onMouseOutHandler","clicked","hovered","baseColor","abs","p","parentNode","groupEntering","xStart","datum","xCenter","xPercent","shift","order","transition","ease","axisOfShift","dimensionOfShift","innerPaddedDimension","toUpperCase","substring","self","transform","baseVal","consolidate","matrix","e","call","focusDidExist","remove","parentGNode","geometryIsUpdating","numeric","newValue","delay","transitionEndEvent","state","inputElement","strokeWidth","fill","addCollisionClass","hideOnly","processLabelOpacity","labelsAdded","filter","labelsRemoved","bitmaps","labelSelection","avoidMarks","validPositions","offsets","accessors","removeOnly","opacity","fullBandwidth","prevOpacity","styleVisibility","style","dimensions","hasRoom","fontSize","targetOpacity","selected","selectable","Number","EPSILON","zeroScale","oneScale","breadth","changeLabelWrappers","enteringOnly","updatingOnly","runTransition","redrawBitmap","suppressMarkDraw","textHeight","collisionSettings","vertical","middle","horizontal","boundsScope","textElement","getComputedStyle","changeLabels","xScale","yScale","chartType","avoidCollision","runOccupancyBitmap","groupName","baseColorArr","type","labelKey","labels","hoverEvent","target","source","xAccessor","yAccessor","chartTag","redraw","disableKeyNav","hideDataTable","hideDataTableButton","description","geomType","includeKeyNames","dataKeys","onChangeFunc","added","removed","eventsTooltip","evt","event","isToShow","mouseOutEvent","_a","render","drawStartEvent","theme","init","h","class","display","isInteractive","hasCousinNavigation","isCompact","exceptions","exception","window"],"sources":["src/components/clustered-bar-chart/clustered-bar-chart-default-values.ts","src/components/clustered-bar-chart/clustered-bar-chart.scss?tag=clustered-bar-chart","src/components/clustered-bar-chart/clustered-bar-chart.tsx"],"sourcesContent":["/**\n * Copyright (c) 2020, 2021, 2022, 2023 Visa, Inc.\n *\n * This source code is licensed under the MIT license\n * https://github.com/visa/visa-chart-components/blob/master/LICENSE\n *\n **/\nimport Utils from '@visa/visa-charts-utils';\n\nconst { propDefaultValues } = Utils;\n\nexport class ClusteredBarChartDefaultValues {\n  static readonly mainTitle = 'Clustered Bar Chart Title';\n  static readonly subTitle = propDefaultValues.subTitle.text;\n  static readonly height = 250;\n  static readonly width = 675;\n  static readonly margin = {\n    top: 400 * 0.01,\n    bottom: 400 * 0.01,\n    right: 400 * 0.01,\n    left: 400 * 0.01\n  };\n  static readonly padding = {\n    top: 20,\n    bottom: 50,\n    right: 50,\n    left: 50\n  };\n\n  static readonly localization = propDefaultValues.localization;\n\n  static readonly ordinalAccessor = 'label';\n  static readonly valueAccessor = 'value';\n  static readonly groupAccessor = 'category';\n  static readonly reverseOrder = false;\n\n  static readonly layout = propDefaultValues.layout;\n  static readonly xAxis = propDefaultValues.xAxis;\n  static readonly yAxis = propDefaultValues.yAxis;\n  static readonly wrapLabel = propDefaultValues.wrapLabel;\n\n  static readonly colorPalette = propDefaultValues.colorPaletteCategorical;\n  static readonly hoverStyle = propDefaultValues.hoverStyle;\n  static readonly clickStyle = propDefaultValues.clickStyle;\n  static readonly referenceStyle = propDefaultValues.referenceStyle;\n  static readonly cursor = propDefaultValues.cursor;\n  static readonly roundedCorner = propDefaultValues.roundedCorner;\n  static readonly barIntervalRatio = propDefaultValues.barIntervalRatio;\n  static readonly groupIntervalRatio = propDefaultValues.barIntervalRatio;\n  static readonly hoverOpacity = propDefaultValues.hoverOpacity;\n\n  static readonly dataLabel = propDefaultValues.dataLabel;\n  static readonly dataKeyNames;\n\n  static readonly legend = propDefaultValues.categoryLegend;\n  static readonly tooltipLabel = propDefaultValues.tooltipLabel;\n  static readonly showTooltip = propDefaultValues.showTooltip;\n  static readonly accessibility = propDefaultValues.accessibility;\n  static readonly animationConfig = propDefaultValues.animationConfig;\n  static readonly highestHeadingLevel = propDefaultValues.highestHeadingLevel;\n\n  static readonly referenceLines = propDefaultValues.referenceLines;\n  static readonly annotations = propDefaultValues.annotations;\n\n  static readonly clickHighlight = propDefaultValues.clickHighlight;\n  static readonly hoverHighlight;\n  static readonly suppressEvents = propDefaultValues.suppressEvents;\n}\n","/**\n * Copyright (c) 2020, 2021, 2023, 2024 Visa, Inc.\n *\n * This source code is licensed under the MIT license\n * https://github.com/visa/visa-chart-components/blob/master/LICENSE\n *\n **/\nclustered-bar-chart {\n  .annotations {\n    pointer-events: none;\n    .handle {\n      pointer-events: all;\n    }\n  }\n\n  .screen-reader-info {\n    position: absolute;\n    left: -9999px;\n    top: auto;\n    width: 1px;\n    height: 1px;\n    overflow: hidden;\n  }\n\n  .data-table-link {\n    color: #767676;\n    text-decoration: none;\n    font-size: 12px;\n    margin-left: 5%;\n  }\n\n  .hidden {\n    display: none;\n  }\n  cursor: default;\n  #visa-viz-d3-clustered-bar-container {\n    clear: both;\n  }\n\n  .clustered-bar-legend {\n    font-size: 1em;\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    flex-wrap: wrap;\n    .legend {\n      display: flex;\n      flex-direction: row;\n      justify-content: flex-start;\n      margin-right: 10px;\n    }\n\n    .key-dot {\n      margin: 3px 8px;\n    }\n  }\n\n  .light {\n    .grid {\n      line {\n        stroke: #c9c9c9;\n        stroke-opacity: 1;\n        stroke-width: 0.8;\n        // shape-rendering: crispEdges;\n        // stroke-dasharray: 4, 4;\n      }\n      path {\n        stroke-width: 0;\n      }\n    }\n    .axis {\n      font-size: 12px;\n      .tick {\n        text {\n          fill: #767676;\n        }\n        line {\n          stroke: #767676;\n        }\n      }\n\n      &-label {\n        // axis label\n        text-anchor: middle;\n        font: 1rem sans-serif;\n      }\n\n      &-mark {\n        // axis mark\n        color: #949494;\n        stroke-width: 2px;\n      }\n    }\n\n    .y.axis {\n      path {\n        stroke: #767676;\n        opacity: 0;\n      }\n    }\n    .x.axis {\n      path {\n        stroke: transparent;\n      }\n    }\n  }\n  .dark {\n    .grid {\n      line {\n        stroke: lightgrey;\n        stroke-opacity: 0.7;\n        shape-rendering: crispEdges;\n      }\n      path {\n        stroke-width: 0;\n      }\n    }\n    .axis {\n      font-size: 12px;\n      .tick {\n        line {\n          stroke: lightgrey;\n        }\n        text {\n          fill: grey;\n        }\n      }\n      path {\n        stroke: black;\n      }\n\n      &-label {\n        text-anchor: middle;\n        font: 1rem sans-serif;\n      }\n    }\n    .o-layout--chart svg {\n      background: black;\n      .clustered-bar-dataLabel-vertical {\n        text-anchor: middle;\n      }\n      .clustered-bar-dataLabel-horizontal {\n        text-anchor: start;\n      }\n    }\n  }\n\n  //TBD: add color based on scheme\n  // .r.axis circle {\n  //   stroke: #cccccc;\n  //   stroke-width: 1px;\n  //   fill: none;\n  // }\n\n  //Text alignment, not impacted by color theme\n  // .a.axis text {\n  //   text-anchor: middle;\n  //   font-size: 10pt;\n  // }\n  //\n  // .r.axis text {\n  //   text-anchor: end;\n  //   font-size: 8pt;\n  // }\n}\n","/**\n * Copyright (c) 2020, 2021, 2022, 2023, 2024 Visa, Inc.\n *\n * This source code is licensed under the MIT license\n * https://github.com/visa/visa-chart-components/blob/master/LICENSE\n *\n **/\nimport { Component, Element, Prop, Watch, h, Event, EventEmitter } from '@stencil/core';\nimport { select, event } from 'd3-selection';\nimport { max, min } from 'd3-array';\nimport { scaleBand, scaleLinear } from 'd3-scale';\nimport { nest } from 'd3-collection';\nimport { easeCircleIn } from 'd3-ease';\nimport {\n  ILocalizationType,\n  IBoxModelType,\n  IHoverStyleType,\n  IClickStyleType,\n  IAxisType,\n  IReferenceStyleType,\n  IDataLabelType,\n  ITooltipLabelType,\n  IAccessibilityType,\n  IAnimationConfig,\n  ILegendType,\n  ISubTitleType\n} from '@visa/charts-types';\nimport { ClusteredBarChartDefaultValues } from './clustered-bar-chart-default-values';\nimport 'd3-transition';\nimport Utils from '@visa/visa-charts-utils';\nimport { v4 as uuid } from 'uuid';\nconst {\n  configLocalization,\n  getGlobalInstances,\n  getActiveLanguageString,\n  verifyTextHasSpace,\n  checkAttributeTransitions,\n  createTextStrokeFilter,\n  drawHoverStrokes,\n  removeHoverStrokes,\n  buildStrokes,\n  convertColorsToTextures,\n  initializeDescriptionRoot,\n  initializeElementAccess,\n  setElementFocusHandler,\n  setElementAccessID,\n  setAccessibilityController,\n  hideNonessentialGroups,\n  setAccessTitle,\n  setAccessSubtitle,\n  setAccessLongDescription,\n  setAccessExecutiveSummary,\n  setAccessPurpose,\n  setAccessContext,\n  setAccessStatistics,\n  setAccessChartCounts,\n  setAccessXAxis,\n  setAccessYAxis,\n  setAccessStructure,\n  setAccessAnnotation,\n  retainAccessFocus,\n  checkAccessFocus,\n  setElementInteractionAccessState,\n  setAccessibilityDescriptionWidth,\n  autoTextColor,\n  annotate,\n  chartAccessors,\n  convertVisaColor,\n  checkInteraction,\n  checkClicked,\n  checkHovered,\n  drawAxis,\n  drawGrid,\n  drawLegend,\n  setLegendInteractionState,\n  drawTooltip,\n  formatDataLabel,\n  formatDate,\n  getColors,\n  getLicenses,\n  getPadding,\n  getScopedData,\n  initTooltipStyle,\n  overrideTitleTooltip,\n  placeDataLabels,\n  scopeDataKeys,\n  transitionEndAll,\n  visaColors,\n  validateAccessibilityProps,\n  validateLocalizationProps,\n  findTagLevel,\n  prepareRenderChange,\n  roundTo,\n  resolveLabelCollision,\n  setSubTitle,\n  setReferenceLine\n} = Utils;\n\n@Component({\n  tag: 'clustered-bar-chart',\n  styleUrl: 'clustered-bar-chart.scss'\n})\nexport class ClusteredBarChart {\n  @Event() clickEvent: EventEmitter;\n  @Event() hoverEvent: EventEmitter;\n  @Event() mouseOutEvent: EventEmitter;\n  @Event() initialLoadEvent: EventEmitter;\n  @Event() initialLoadEndEvent: EventEmitter;\n  @Event() drawStartEvent: EventEmitter;\n  @Event() drawEndEvent: EventEmitter;\n  @Event() transitionEndEvent: EventEmitter;\n\n  // Chart Attributes (1/7)\n  @Prop({ mutable: true }) mainTitle: string = ClusteredBarChartDefaultValues.mainTitle;\n  @Prop({ mutable: true }) subTitle: string | ISubTitleType = ClusteredBarChartDefaultValues.subTitle;\n  @Prop({ mutable: true }) height: number = ClusteredBarChartDefaultValues.height;\n  @Prop({ mutable: true }) width: number = ClusteredBarChartDefaultValues.width;\n  @Prop({ mutable: true }) layout: string = ClusteredBarChartDefaultValues.layout;\n  @Prop({ mutable: true }) margin: IBoxModelType = ClusteredBarChartDefaultValues.margin;\n  @Prop({ mutable: true }) padding: IBoxModelType = ClusteredBarChartDefaultValues.padding;\n  @Prop({ mutable: true }) highestHeadingLevel: string | number = ClusteredBarChartDefaultValues.highestHeadingLevel;\n\n  // Data (2/7)\n  @Prop() data;\n  @Prop() uniqueID;\n  @Prop({ mutable: true }) localization: ILocalizationType = ClusteredBarChartDefaultValues.localization;\n  @Prop({ mutable: true }) ordinalAccessor: string = ClusteredBarChartDefaultValues.ordinalAccessor;\n  @Prop({ mutable: true }) valueAccessor: string = ClusteredBarChartDefaultValues.valueAccessor;\n  @Prop({ mutable: true }) groupAccessor: string = ClusteredBarChartDefaultValues.groupAccessor;\n  @Prop({ mutable: true }) reverseOrder: boolean = ClusteredBarChartDefaultValues.reverseOrder;\n\n  // Axis (3/7)\n  @Prop({ mutable: true }) xAxis: IAxisType = ClusteredBarChartDefaultValues.xAxis;\n  @Prop({ mutable: true }) yAxis: IAxisType = ClusteredBarChartDefaultValues.yAxis;\n  @Prop({ mutable: true }) wrapLabel: boolean = ClusteredBarChartDefaultValues.wrapLabel;\n\n  // Color & Shape (4/7)\n  @Prop({ mutable: true }) colorPalette: string = ClusteredBarChartDefaultValues.colorPalette;\n  @Prop({ mutable: true }) colors: string[];\n  @Prop({ mutable: true }) hoverStyle: IHoverStyleType = ClusteredBarChartDefaultValues.hoverStyle;\n  @Prop({ mutable: true }) clickStyle: IClickStyleType = ClusteredBarChartDefaultValues.clickStyle;\n  @Prop({ mutable: true }) referenceStyle: IReferenceStyleType = ClusteredBarChartDefaultValues.referenceStyle;\n  @Prop({ mutable: true }) cursor: string = ClusteredBarChartDefaultValues.cursor;\n  @Prop({ mutable: true }) roundedCorner: number = ClusteredBarChartDefaultValues.roundedCorner;\n  @Prop({ mutable: true }) barIntervalRatio: number = ClusteredBarChartDefaultValues.barIntervalRatio;\n  @Prop({ mutable: true }) groupIntervalRatio: number = ClusteredBarChartDefaultValues.groupIntervalRatio;\n  @Prop({ mutable: true }) hoverOpacity: number = ClusteredBarChartDefaultValues.hoverOpacity;\n  @Prop({ mutable: true }) animationConfig: IAnimationConfig = ClusteredBarChartDefaultValues.animationConfig;\n\n  // Data label (5/7)\n  @Prop({ mutable: true }) dataLabel: IDataLabelType = ClusteredBarChartDefaultValues.dataLabel;\n  @Prop({ mutable: true }) dataKeyNames: object;\n  @Prop({ mutable: true }) showTooltip: boolean = ClusteredBarChartDefaultValues.showTooltip;\n  @Prop({ mutable: true }) tooltipLabel: ITooltipLabelType = ClusteredBarChartDefaultValues.tooltipLabel;\n  @Prop({ mutable: true }) accessibility: IAccessibilityType = ClusteredBarChartDefaultValues.accessibility;\n  @Prop({ mutable: true }) legend: ILegendType = ClusteredBarChartDefaultValues.legend;\n  @Prop({ mutable: true }) annotations: object[] = ClusteredBarChartDefaultValues.annotations;\n\n  // Calculation (6/7)\n  @Prop({ mutable: true }) minValueOverride: number;\n  @Prop({ mutable: true }) maxValueOverride: number;\n  @Prop({ mutable: true }) referenceLines: object[] = ClusteredBarChartDefaultValues.referenceLines;\n\n  // Interactivity (7/7)\n  @Prop({ mutable: true }) suppressEvents: boolean = ClusteredBarChartDefaultValues.suppressEvents;\n  @Prop({ mutable: true }) hoverHighlight: object;\n  @Prop({ mutable: true }) clickHighlight: object[] = ClusteredBarChartDefaultValues.clickHighlight;\n  @Prop({ mutable: true }) interactionKeys: string[];\n\n  // Testing & Debug (8/8)\n  @Prop() unitTest: boolean = false;\n  // @Prop() debugMode: boolean = false;\n\n  // Element\n  @Element()\n  clusteredBarChartEl: HTMLElement;\n  shouldValidateAccessibility: boolean = true;\n  shouldValidateLocalization: boolean = true;\n  svg: any;\n  root: any;\n  rootG: any;\n  barG: any;\n  gridG: any;\n  bars: any;\n  labelG: any;\n  labels: any;\n  referencesG: any;\n  defaults: boolean;\n  current: any;\n  enter: any;\n  exit: any;\n  update: any;\n  enterBarWrappers: any;\n  updateBarWrappers: any;\n  exitBarWrappers: any;\n  // vertical layout\n  x0: any;\n  x1: any;\n  y: any;\n  // horizontal layout\n  y0: any;\n  y1: any;\n  x: any;\n  innerHeight: number;\n  innerWidth: number;\n  innerPaddedHeight: number;\n  innerPaddedWidth: number;\n  innerXAxis: any;\n  innerYAxis: any;\n  nest: any = [];\n  datakeys: any = [];\n  legendData: any = [];\n  colorArr: any;\n  preparedColors: any;\n  duration: number;\n  legendG: any;\n  subTitleG: any;\n  tooltipG: any;\n  updated: boolean = true;\n  enterSize: number;\n  exitSize: number;\n  enterLabels: any;\n  exitLabels: any;\n  updateLabels: any;\n  enterLabelWrappers: any;\n  updateLabelWrappers: any;\n  exitLabelWrappers: any;\n  tableData: any;\n  tableColumns: any;\n  chartID: string;\n  innerInteractionKeys: any;\n  innerLabelAccessor: string;\n  shouldValidate: boolean = false;\n  shouldUpdateData: boolean = false;\n  shouldSetDimensions: boolean = false;\n  shouldUpdateScales: boolean = false;\n  shouldValidateAxes: boolean = false;\n  shouldUpdateAnnotations: boolean = false;\n  shouldResetRoot: boolean = false;\n  shouldUpdateTableData: boolean = false;\n  shouldSetColors: boolean = false;\n  shouldSetSubTitle: boolean = false;\n  shouldValidateLabelPlacement: boolean = false;\n  shouldValidateDataLabelAccessor: boolean = false;\n  shouldValidateInteractionKeys: boolean = false;\n  shouldSetSelectionClass: boolean = false;\n  shouldUpdateXAxis: boolean = false;\n  shouldUpdateYAxis: boolean = false;\n  shouldUpdateXGrid: boolean = false;\n  shouldUpdateYGrid: boolean = false;\n  shouldUpdateBaseline: boolean = false;\n  shouldCheckValueAxis: boolean = false;\n  shouldCheckLabelAxis: boolean = false;\n  shouldSetGlobalSelections: boolean = false;\n  shouldEnterUpdateExit: boolean = false;\n  shouldUpdateGeometries: boolean = false;\n  shouldUpdateCorners: boolean = false;\n  shouldUpdateLegendData: boolean = false;\n  shouldUpdateLegend: boolean = false;\n  shouldUpdateLegendInteractivity: boolean = false;\n  shouldSetLegendCursor: boolean = false;\n  shouldUpdateReferenceLines: boolean = false;\n  shouldUpdateCursor: boolean = false;\n  shouldDrawInteractionState: boolean = false;\n  shouldSetLabelOpacity: boolean = false;\n  shouldSetLabelPosition: boolean = false;\n  shouldSetLabelContent: boolean = false;\n  shouldCheckLabelColor: boolean = false;\n  shouldBindInteractivity: boolean = false;\n  shouldUpdateDescriptionWrapper: boolean = false;\n  shouldSetChartAccessibilityTitle: boolean = false;\n  shouldSetChartAccessibilitySubtitle: boolean = false;\n  shouldSetChartAccessibilityLongDescription: boolean = false;\n  shouldSetChartAccessibilityExecutiveSummary: boolean = false;\n  shouldSetChartAccessibilityStatisticalNotes: boolean = false;\n  shouldSetChartAccessibilityStructureNotes: boolean = false;\n  shouldSetParentSVGAccessibility: boolean = false;\n  shouldSetGeometryAccessibilityAttributes: boolean = false;\n  shouldSetGeometryAriaLabels: boolean = false;\n  shouldSetGroupAccessibilityLabel: boolean = false;\n  shouldSetChartAccessibilityPurpose: boolean = false;\n  shouldSetChartAccessibilityContext: boolean = false;\n  shouldSetTestingAttributes: boolean = false;\n  shouldRedrawWrapper: boolean = false;\n  shouldSetTagLevels: boolean = false;\n  shouldSetChartAccessibilityCount: boolean = false;\n  shouldSetYAxisAccessibility: boolean = false;\n  shouldSetXAxisAccessibility: boolean = false;\n  shouldSetAnnotationAccessibility: boolean = false;\n  shouldSetTextures: boolean = false;\n  shouldSetStrokes: boolean = false;\n  shouldSetLocalizationConfig: boolean = false;\n  strokes: any = {};\n  topLevel: string = 'h2';\n  bottomLevel: string = 'p';\n  bitmaps: any;\n\n  @Watch('data')\n  dataWatcher(_newData, _oldData) {\n    this.updated = true;\n    this.shouldUpdateData = true;\n    this.shouldSetColors = true;\n    this.shouldSetTextures = true;\n    this.shouldUpdateTableData = true;\n    this.shouldSetGlobalSelections = true;\n    this.shouldSetTestingAttributes = true;\n    this.shouldEnterUpdateExit = true;\n    this.shouldSetLabelContent = true;\n    this.shouldSetLabelPosition = true;\n    // this.shouldDrawInteractionState = true; // called from updateGeometries\n    // this.shouldCheckLabelColor = true; // called from updateGeometries\n    this.shouldSetGeometryAccessibilityAttributes = true;\n    this.shouldSetGeometryAriaLabels = true;\n    this.shouldUpdateLegendData = true;\n    this.shouldUpdateScales = true;\n    this.shouldValidate = true;\n    this.shouldUpdateGeometries = true;\n    this.shouldUpdateXAxis = true;\n    this.shouldSetXAxisAccessibility = true;\n    this.shouldUpdateYAxis = true;\n    this.shouldSetYAxisAccessibility = true;\n    this.shouldUpdateXGrid = true;\n    this.shouldUpdateYGrid = true;\n    this.shouldUpdateLegend = true;\n    this.shouldUpdateReferenceLines = true;\n    this.shouldUpdateBaseline = true;\n    this.shouldUpdateAnnotations = true;\n    this.shouldSetStrokes = true;\n  }\n\n  @Watch('uniqueID')\n  idWatcher(newID, _oldID) {\n    console.error(\n      'Change detected in prop uniqueID from value ' +\n        _oldID +\n        ' to value ' +\n        newID +\n        '. This prop cannot be changed after component has loaded.'\n    );\n    // this.chartID = newID || 'clustered-bar-chart-' + uuid();\n    // this.clusteredBarChartEl.id = this.chartID;\n    // this.shouldValidate = true;\n    // this.shouldUpdateDescriptionWrapper = true;\n    // this.shouldSetParentSVGAccessibility = true;\n    // this.shouldDrawInteractionState = true;\n    // this.shouldUpdateLegend = true;\n    // this.shouldSetStrokes = true;\n  }\n\n  @Watch('highestHeadingLevel')\n  headingWatcher(_newVal, _oldVal) {\n    this.shouldRedrawWrapper = true;\n    this.shouldSetTagLevels = true;\n    this.shouldSetChartAccessibilityCount = true;\n    this.shouldSetYAxisAccessibility = true;\n    this.shouldSetXAxisAccessibility = true;\n    this.shouldSetAnnotationAccessibility = true;\n    this.shouldUpdateDescriptionWrapper = true;\n    this.shouldSetSubTitle = true;\n    this.shouldSetChartAccessibilityTitle = true;\n    this.shouldSetChartAccessibilitySubtitle = true;\n    this.shouldSetChartAccessibilityLongDescription = true;\n    this.shouldSetChartAccessibilityContext = true;\n    this.shouldSetChartAccessibilityExecutiveSummary = true;\n    this.shouldSetChartAccessibilityPurpose = true;\n    this.shouldSetChartAccessibilityStatisticalNotes = true;\n    this.shouldSetChartAccessibilityStructureNotes = true;\n  }\n\n  @Watch('mainTitle')\n  titleWatcher(_newVal, _oldVal) {\n    this.shouldValidate = true;\n    this.shouldUpdateDescriptionWrapper = true;\n    this.shouldSetChartAccessibilityTitle = true;\n    this.shouldSetParentSVGAccessibility = true;\n  }\n\n  @Watch('subTitle')\n  subtitleWatcher(_newVal, _oldVal) {\n    this.shouldSetSubTitle = true;\n    this.shouldSetChartAccessibilitySubtitle = true;\n    this.shouldSetParentSVGAccessibility = true;\n  }\n\n  @Watch('height')\n  @Watch('width')\n  @Watch('padding')\n  @Watch('margin')\n  dimensionWatcher(_newVal, _oldVal) {\n    this.shouldSetDimensions = true;\n    this.shouldUpdateScales = true;\n    this.shouldResetRoot = true;\n    this.shouldUpdateGeometries = true;\n    this.shouldUpdateXAxis = true;\n    this.shouldUpdateYAxis = true;\n    this.shouldUpdateXGrid = true;\n    this.shouldUpdateYGrid = true;\n    this.shouldSetLabelPosition = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldUpdateLegend = true;\n    this.shouldUpdateReferenceLines = true;\n    this.shouldUpdateBaseline = true;\n    this.shouldUpdateAnnotations = true;\n  }\n\n  @Watch('layout')\n  layoutWatcher(_newVal, _oldVal) {\n    this.shouldValidateLabelPlacement = true;\n    this.shouldUpdateScales = true;\n    this.shouldValidateAxes = true;\n    this.shouldResetRoot = true;\n    this.shouldUpdateGeometries = true;\n    this.shouldUpdateXAxis = true;\n    this.shouldUpdateYAxis = true;\n    this.shouldUpdateXGrid = true;\n    this.shouldUpdateYGrid = true;\n    this.shouldSetLabelPosition = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldUpdateLegend = true;\n    this.shouldUpdateReferenceLines = true;\n    this.shouldUpdateBaseline = true;\n    this.shouldUpdateAnnotations = true;\n    this.shouldSetGeometryAccessibilityAttributes = true;\n    this.shouldSetTestingAttributes = true;\n  }\n\n  @Watch('ordinalAccessor')\n  ordinalAccessorWatcher(_newVal, _oldVal) {\n    this.shouldUpdateTableData = true;\n    this.shouldUpdateLegendData = true;\n    this.shouldUpdateScales = true;\n    this.shouldSetColors = true;\n    this.shouldUpdateGeometries = true;\n    this.shouldDrawInteractionState = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldUpdateLegend = true;\n    this.shouldUpdateReferenceLines = true;\n    this.shouldUpdateAnnotations = true;\n    this.shouldSetGeometryAriaLabels = true;\n    this.shouldSetStrokes = true;\n    this.shouldSetTextures = true;\n    if (!(this.interactionKeys && this.interactionKeys.length)) {\n      this.shouldValidateInteractionKeys = true;\n      this.shouldSetSelectionClass = true;\n    }\n  }\n\n  @Watch('valueAccessor')\n  valueAccessorWatcher(_newVal, _oldVal) {\n    this.shouldUpdateData = true;\n    this.shouldUpdateTableData = true;\n    this.shouldUpdateScales = true;\n    this.shouldSetColors = true;\n    this.shouldUpdateGeometries = true;\n    this.shouldDrawInteractionState = true;\n    this.shouldCheckValueAxis = true;\n    this.shouldValidateDataLabelAccessor = true;\n    this.shouldSetLabelContent = true;\n    this.shouldSetLabelPosition = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldUpdateReferenceLines = true;\n    this.shouldUpdateAnnotations = true;\n    this.shouldSetGeometryAriaLabels = true;\n    this.shouldSetStrokes = true;\n    this.shouldSetTextures = true;\n  }\n\n  @Watch('groupAccessor')\n  groupAccessorWatcher(_newVal, _oldVal) {\n    this.shouldUpdateData = true;\n    this.shouldSetGlobalSelections = true;\n    this.shouldEnterUpdateExit = true;\n    this.shouldUpdateTableData = true;\n    this.shouldUpdateScales = true;\n    this.shouldUpdateGeometries = true;\n    this.shouldDrawInteractionState = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldCheckLabelAxis = true;\n    this.shouldUpdateBaseline = true;\n    this.shouldUpdateReferenceLines = true;\n    this.shouldUpdateAnnotations = true;\n    this.shouldSetGeometryAriaLabels = true;\n    this.shouldSetGroupAccessibilityLabel = true;\n    this.shouldSetStrokes = true;\n    this.shouldSetTextures = true;\n    if (!(this.interactionKeys && this.interactionKeys.length)) {\n      this.shouldValidateInteractionKeys = true;\n      this.shouldSetSelectionClass = true;\n    }\n  }\n\n  @Watch('reverseOrder')\n  reverseOrderWatcher(_newVal, _oldVal) {\n    this.shouldUpdateTableData = true;\n    this.shouldUpdateScales = true;\n    this.shouldUpdateGeometries = true;\n    this.shouldSetLabelPosition = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldUpdateAnnotations = true;\n    this.shouldSetGeometryAccessibilityAttributes = true;\n    this.shouldSetGeometryAriaLabels = true;\n    if (this.layout === 'vertical') {\n      this.shouldValidateAxes = true;\n      this.shouldUpdateXAxis = true;\n      this.shouldSetXAxisAccessibility = true;\n    } else if (this.layout === 'horizontal') {\n      this.shouldValidateAxes = true;\n      this.shouldUpdateYAxis = true;\n      this.shouldSetYAxisAccessibility = true;\n    }\n  }\n\n  @Watch('xAxis')\n  xAxisWatcher(_newVal, _oldVal) {\n    this.shouldValidateAxes = true;\n    this.shouldUpdateXAxis = true;\n    this.shouldSetXAxisAccessibility = true;\n    const newGridVal = _newVal && _newVal.gridVisible;\n    const oldGridVal = _oldVal && _oldVal.gridVisible;\n    const newTickInterval = _newVal && _newVal.tickInterval ? _newVal.tickInterval : 0;\n    const oldTickInterval = _oldVal && _oldVal.tickInterval ? _oldVal.tickInterval : 0;\n    if (newGridVal !== oldGridVal || newTickInterval !== oldTickInterval) {\n      this.shouldUpdateXGrid = true;\n    }\n  }\n\n  @Watch('yAxis')\n  yAxisWatcher(_newVal, _oldVal) {\n    this.shouldValidateAxes = true;\n    this.shouldUpdateYAxis = true;\n    this.shouldSetYAxisAccessibility = true;\n    const newGridVal = _newVal && _newVal.gridVisible;\n    const oldGridVal = _oldVal && _oldVal.gridVisible;\n    const newTickInterval = _newVal && _newVal.tickInterval ? _newVal.tickInterval : 0;\n    const oldTickInterval = _oldVal && _oldVal.tickInterval ? _oldVal.tickInterval : 0;\n    if (newGridVal !== oldGridVal || newTickInterval !== oldTickInterval) {\n      this.shouldUpdateYGrid = true;\n    }\n  }\n\n  @Watch('wrapLabel')\n  wrapLabelWatcher(_newVal, _oldVal) {\n    this.shouldUpdateXAxis = true;\n    this.shouldUpdateYAxis = true;\n  }\n\n  @Watch('colors')\n  @Watch('colorPalette')\n  colorsWatcher(_newVal, _oldVal) {\n    this.shouldSetColors = true;\n    this.shouldDrawInteractionState = true;\n    this.shouldUpdateLegend = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldSetStrokes = true;\n    this.shouldSetTextures = true;\n  }\n\n  @Watch('hoverStyle')\n  hoverStyleWatcher(_newVal, _oldVal) {\n    this.shouldDrawInteractionState = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldSetStrokes = true;\n  }\n\n  @Watch('clickStyle')\n  clickStyleWatcher(_newVal, _oldVal) {\n    this.shouldDrawInteractionState = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldSetStrokes = true;\n  }\n\n  @Watch('referenceLines')\n  @Watch('referenceStyle')\n  referenceWatcher(_newVal, _oldVal) {\n    this.shouldUpdateReferenceLines = true;\n  }\n\n  @Watch('cursor')\n  cursorWatcher(_newVal, _oldVal) {\n    this.shouldUpdateCursor = true;\n    this.shouldSetLegendCursor = true;\n  }\n\n  @Watch('roundedCorner')\n  cornerWatcher(_newVal, _oldVal) {\n    this.shouldUpdateCorners = true;\n  }\n\n  @Watch('barIntervalRatio')\n  intervalRatioWatcher(_newVal, _oldVal) {\n    this.shouldUpdateScales = true;\n    this.shouldUpdateGeometries = true;\n    this.shouldCheckLabelAxis = true;\n    this.shouldSetLabelPosition = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldUpdateAnnotations = true;\n  }\n\n  @Watch('groupIntervalRatio')\n  groupIntervalRatioWatcher(_newVal, _oldVal) {\n    this.shouldUpdateScales = true;\n    this.shouldUpdateGeometries = true;\n    this.shouldSetLabelPosition = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldUpdateAnnotations = true;\n  }\n\n  @Watch('hoverOpacity')\n  hoverOpacityWatcher(_newVal, _oldVal) {\n    this.shouldDrawInteractionState = true;\n    this.shouldCheckLabelColor = true;\n  }\n\n  @Watch('dataLabel')\n  labelWatcher(_newVal, _oldVal) {\n    const newPlacementVal = _newVal && _newVal.placement ? _newVal.placement : false;\n    const oldPlacementVal = _oldVal && _oldVal.placement ? _oldVal.placement : false;\n    const newCollisionPlacementVal = _newVal && _newVal.collisionPlacement ? _newVal.collisionPlacement : false;\n    const oldCollisionPlacementVal = _oldVal && _oldVal.collisionPlacement ? _oldVal.collisionPlacement : false;\n    const newVisibleVal = _newVal && _newVal.visible;\n    const oldVisibleVal = _oldVal && _oldVal.visible;\n    const newAccessor = _newVal && _newVal.labelAccessor ? _newVal.labelAccessor : false;\n    const oldAccessor = _oldVal && _oldVal.labelAccessor ? _oldVal.labelAccessor : false;\n    const newFormatVal = _newVal && _newVal.format ? _newVal.format : false;\n    const oldFormatVal = _oldVal && _oldVal.format ? _oldVal.format : false;\n    const newCollisionHideOnlyVal = _newVal && _newVal.collisionHideOnly ? _newVal.collisionHideOnly : false;\n    const oldCollisionHideOnlyVal = _oldVal && _oldVal.collisionHideOnly ? _oldVal.collisionHideOnly : false;\n    // if only visible changes we just flip opacity, but don't redraw\n    if (newVisibleVal !== oldVisibleVal) {\n      this.shouldSetLabelOpacity = true;\n    }\n    // any placement related stuff and we do a full redraw, no opacity\n    if (\n      newPlacementVal !== oldPlacementVal ||\n      newCollisionPlacementVal !== oldCollisionPlacementVal ||\n      newCollisionHideOnlyVal !== oldCollisionHideOnlyVal\n    ) {\n      this.shouldValidateLabelPlacement = true;\n      this.shouldSetLabelPosition = true;\n      this.shouldCheckLabelColor = true;\n    }\n    // text/format required redraw/table but no opacity\n    if (newAccessor !== oldAccessor || newFormatVal !== oldFormatVal) {\n      this.shouldValidateDataLabelAccessor = true;\n      this.shouldUpdateTableData = true;\n      this.shouldSetLabelContent = true;\n      this.shouldCheckLabelColor = true;\n    }\n  }\n\n  @Watch('tooltipLabel')\n  tooltipLabelWatcher(_newVal, _oldVal) {\n    this.shouldUpdateTableData = true;\n    this.shouldSetParentSVGAccessibility = true;\n    this.shouldSetGeometryAriaLabels = true;\n  }\n\n  @Watch('accessibility')\n  accessibilityWatcher(_newVal, _oldVal) {\n    this.shouldValidate = true;\n    const newTitle = _newVal && _newVal.title ? _newVal.title : false;\n    const oldTitle = _oldVal && _oldVal.title ? _oldVal.title : false;\n    if (newTitle !== oldTitle) {\n      this.shouldUpdateDescriptionWrapper = true;\n      this.shouldSetChartAccessibilityTitle = true;\n      this.shouldSetParentSVGAccessibility = true;\n    }\n    const newExecutiveSummary = _newVal && _newVal.executiveSummary ? _newVal.executiveSummary : false;\n    const oldExecutiveSummary = _oldVal && _oldVal.executiveSummary ? _oldVal.executiveSummary : false;\n    if (newExecutiveSummary !== oldExecutiveSummary) {\n      this.shouldSetChartAccessibilityExecutiveSummary = true;\n    }\n    const newPurpose = _newVal && _newVal.purpose ? _newVal.purpose : false;\n    const oldPurpose = _oldVal && _oldVal.purpose ? _oldVal.purpose : false;\n    if (newPurpose !== oldPurpose) {\n      this.shouldSetChartAccessibilityPurpose = true;\n    }\n    const newLongDescription = _newVal && _newVal.longDescription ? _newVal.longDescription : false;\n    const oldLongDescription = _oldVal && _oldVal.longDescription ? _oldVal.longDescription : false;\n    if (newLongDescription !== oldLongDescription) {\n      this.shouldSetChartAccessibilityLongDescription = true;\n    }\n    const newContext = _newVal && _newVal.contextExplanation ? _newVal.contextExplanation : false;\n    const oldContext = _oldVal && _oldVal.contextExplanation ? _oldVal.contextExplanation : false;\n    if (newContext !== oldContext) {\n      this.shouldSetChartAccessibilityContext = true;\n    }\n    const newStatisticalNotes = _newVal && _newVal.statisticalNotes ? _newVal.statisticalNotes : false;\n    const oldStatisticalNotes = _oldVal && _oldVal.statisticalNotes ? _oldVal.statisticalNotes : false;\n    if (newStatisticalNotes !== oldStatisticalNotes) {\n      this.shouldSetChartAccessibilityStatisticalNotes = true;\n    }\n    const newStructureNotes = _newVal && _newVal.structureNotes ? _newVal.structureNotes : false;\n    const oldStructureNotes = _oldVal && _oldVal.structureNotes ? _oldVal.structureNotes : false;\n    if (newStructureNotes !== oldStructureNotes) {\n      this.shouldSetChartAccessibilityStructureNotes = true;\n    }\n    const newincludeDataKeyNames = _newVal && _newVal.includeDataKeyNames;\n    const oldincludeDataKeyNames = _oldVal && _oldVal.includeDataKeyNames;\n    const newElementDescriptionAccessor =\n      _newVal && _newVal.elementDescriptionAccessor ? _newVal.elementDescriptionAccessor : false;\n    const oldElementDescriptionAccessor =\n      _oldVal && _oldVal.elementDescriptionAccessor ? _oldVal.elementDescriptionAccessor : false;\n    if (\n      newincludeDataKeyNames !== oldincludeDataKeyNames ||\n      newElementDescriptionAccessor !== oldElementDescriptionAccessor\n    ) {\n      if (newincludeDataKeyNames !== oldincludeDataKeyNames) {\n        // this one is tricky because it needs to run after the lifecycle\n        // AND it could run in the off-chance this prop is changed\n        this.shouldSetGroupAccessibilityLabel = true;\n      }\n      this.shouldSetGeometryAriaLabels = true;\n      this.shouldSetParentSVGAccessibility = true;\n    }\n    const newTextures = _newVal && _newVal.hideTextures ? _newVal.hideTextures : false;\n    const oldTextures = _oldVal && _oldVal.hideTextures ? _oldVal.hideTextures : false;\n    if (newTextures !== oldTextures) {\n      this.shouldSetTextures = true;\n      this.shouldUpdateLegend = true;\n      this.shouldDrawInteractionState = true;\n    }\n    const newSmallValue = _newVal && _newVal.showSmallLabels ? _newVal.showSmallLabels : false;\n    const oldSmallValue = _oldVal && _oldVal.showSmallLabels ? _oldVal.showSmallLabels : false;\n    if (newSmallValue !== oldSmallValue) {\n      this.shouldSetLabelOpacity = true;\n    }\n    const newStrokes = _newVal && _newVal.hideStrokes ? _newVal.hideStrokes : false;\n    const oldStrokes = _oldVal && _oldVal.hideStrokes ? _oldVal.hideStrokes : false;\n    if (newStrokes !== oldStrokes) {\n      this.shouldUpdateLegend = true;\n      this.shouldSetStrokes = true;\n      this.shouldDrawInteractionState = true;\n    }\n    const newKeyNav =\n      _newVal && _newVal.keyboardNavConfig && _newVal.keyboardNavConfig.disabled\n        ? _newVal.keyboardNavConfig.disabled\n        : false;\n    const oldKeyNav =\n      _oldVal && _oldVal.keyboardNavConfig && _oldVal.keyboardNavConfig.disabled\n        ? _oldVal.keyboardNavConfig.disabled\n        : false;\n    const newInterface = _newVal && _newVal.elementsAreInterface ? _newVal.elementsAreInterface : false;\n    const oldInterface = _oldVal && _oldVal.elementsAreInterface ? _oldVal.elementsAreInterface : false;\n    if (newKeyNav !== oldKeyNav || newInterface !== oldInterface) {\n      this.shouldSetGeometryAriaLabels = true;\n      this.shouldSetParentSVGAccessibility = true;\n      this.shouldUpdateDescriptionWrapper = true;\n      this.shouldRedrawWrapper = true;\n      this.shouldSetChartAccessibilityTitle = true;\n      this.shouldSetChartAccessibilitySubtitle = true;\n      this.shouldSetChartAccessibilityLongDescription = true;\n      this.shouldSetChartAccessibilityContext = true;\n      this.shouldSetChartAccessibilityExecutiveSummary = true;\n      this.shouldSetChartAccessibilityPurpose = true;\n      this.shouldSetChartAccessibilityStatisticalNotes = true;\n      this.shouldSetChartAccessibilityStructureNotes = true;\n    }\n    if (newInterface !== oldInterface) {\n      this.shouldDrawInteractionState = true;\n    }\n  }\n\n  @Watch('legend')\n  legendWatcher(_newVal, _oldVal) {\n    this.shouldUpdateLegend = true;\n    const newInteractiveVal = _newVal && _newVal.interactive;\n    const oldInteractiveVal = _oldVal && _oldVal.interactive;\n    if (newInteractiveVal !== oldInteractiveVal) {\n      this.shouldSetLegendCursor = true;\n      this.shouldUpdateLegendInteractivity = true;\n    }\n  }\n\n  @Watch('localization')\n  localizationWatcher(_newVal, _oldVal) {\n    this.shouldValidate = true;\n\n    // language\n    const newLanguage = _newVal && _newVal.language ? _newVal.language : false;\n    const oldLanguage = _oldVal && _oldVal.language ? _oldVal.language : false;\n    if (newLanguage !== oldLanguage) {\n      this.shouldSetLocalizationConfig = true;\n      this.shouldUpdateTableData = true;\n      this.shouldValidateDataLabelAccessor = true;\n      this.shouldSetLabelContent = true;\n      this.shouldCheckLabelColor = true;\n      this.shouldRedrawWrapper = true;\n      this.shouldUpdateDescriptionWrapper = true;\n      this.shouldSetChartAccessibilityCount = true;\n      this.shouldSetYAxisAccessibility = true;\n      this.shouldSetXAxisAccessibility = true;\n      this.shouldUpdateDescriptionWrapper = true;\n      this.shouldSetGeometryAriaLabels = true;\n      this.shouldSetParentSVGAccessibility = true;\n    }\n\n    // numeralLocale\n    const newNumeralLocale = _newVal && _newVal.numeralLocale ? _newVal.numeralLocale : false;\n    const oldNumeralLocale = _oldVal && _oldVal.numeralLocale ? _oldVal.numeralLocale : false;\n    if (newNumeralLocale !== oldNumeralLocale) {\n      this.shouldSetLocalizationConfig = true;\n      this.shouldUpdateTableData = true;\n      this.shouldValidateDataLabelAccessor = true;\n      this.shouldSetLabelContent = true;\n      this.shouldCheckLabelColor = true;\n      this.shouldRedrawWrapper = true;\n      this.shouldUpdateDescriptionWrapper = true;\n      this.shouldSetChartAccessibilityCount = true;\n      this.shouldSetYAxisAccessibility = true;\n      this.shouldSetXAxisAccessibility = true;\n      this.shouldUpdateDescriptionWrapper = true;\n      this.shouldSetGeometryAriaLabels = true;\n      this.shouldSetParentSVGAccessibility = true;\n    }\n  }\n\n  @Watch('annotations')\n  annotationsWatcher(_newVal, _oldVal) {\n    this.shouldValidate = true;\n    this.shouldUpdateAnnotations = true;\n    this.shouldSetAnnotationAccessibility = true;\n  }\n\n  @Watch('maxValueOverride')\n  @Watch('minValueOverride')\n  valueOverrideWatcher(_newVal, _oldVal) {\n    this.shouldUpdateScales = true;\n    this.shouldCheckValueAxis = true;\n    this.shouldUpdateGeometries = true;\n    this.shouldSetLabelPosition = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldUpdateReferenceLines = true;\n    this.shouldUpdateBaseline = true;\n    this.shouldUpdateAnnotations = true;\n  }\n\n  @Watch('clickHighlight')\n  clickWatcher(_newVal, _oldVal) {\n    this.shouldDrawInteractionState = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldSetSelectionClass = true;\n  }\n\n  @Watch('hoverHighlight')\n  hoverWatcher(_newVal, _oldVal) {\n    this.shouldDrawInteractionState = true;\n    this.shouldCheckLabelColor = true;\n  }\n\n  @Watch('interactionKeys')\n  interactionWatcher(_newVal, _oldVal) {\n    this.shouldValidateInteractionKeys = true;\n    this.shouldDrawInteractionState = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldSetSelectionClass = true;\n    this.shouldUpdateTableData = true;\n    this.shouldSetGeometryAriaLabels = true;\n  }\n\n  @Watch('dataKeyNames')\n  dataKeyNamesWatcher(_newVal, _oldVal) {\n    this.shouldUpdateXAxis = true;\n    this.shouldSetXAxisAccessibility = true;\n    this.shouldUpdateYAxis = true;\n    this.shouldSetYAxisAccessibility = true;\n    this.shouldSetParentSVGAccessibility = true;\n    this.shouldSetGroupAccessibilityLabel = true;\n    this.shouldSetGeometryAriaLabels = true;\n  }\n\n  @Watch('suppressEvents')\n  suppressWatcher(_newVal, _oldVal) {\n    this.shouldBindInteractivity = true;\n    this.shouldUpdateCursor = true;\n    this.shouldSetLegendCursor = true;\n    this.shouldUpdateLegendInteractivity = true;\n    this.shouldSetGeometryAriaLabels = true;\n    this.shouldSetParentSVGAccessibility = true;\n    this.shouldUpdateDescriptionWrapper = true;\n    this.shouldRedrawWrapper = true;\n    this.shouldValidate = true;\n    this.shouldSetSubTitle = true;\n    this.shouldSetChartAccessibilityTitle = true;\n    this.shouldSetChartAccessibilitySubtitle = true;\n    this.shouldSetChartAccessibilityLongDescription = true;\n    this.shouldSetChartAccessibilityContext = true;\n    this.shouldSetChartAccessibilityExecutiveSummary = true;\n    this.shouldSetChartAccessibilityPurpose = true;\n    this.shouldSetChartAccessibilityStatisticalNotes = true;\n    this.shouldSetChartAccessibilityStructureNotes = true;\n  }\n\n  @Watch('unitTest')\n  unitTestWatcher(_newVal, _oldVal) {\n    this.shouldSetTestingAttributes = true;\n  }\n\n  componentWillLoad() {\n    const chartID = this.uniqueID || 'clustered-bar-chart-' + uuid();\n    this.initialLoadEvent.emit({ chartID: chartID });\n    // contrary to componentWillUpdate, this method appears safe to use for\n    // any calculations we need. Keeping them here reduces future refactor,\n    // since componentWillUpdate should eventually mirror this method\n    return new Promise(resolve => {\n      this.duration = 0;\n      this.defaults = true;\n      this.chartID = chartID;\n      this.clusteredBarChartEl.id = this.chartID;\n      this.setLocalizationConfig();\n      this.setTagLevels();\n      this.prepareData();\n      this.prepareLegendData();\n      this.setDimensions();\n      this.prepareScales();\n      this.validateInteractionKeys();\n      this.validateDataLabelAccessor();\n      this.validateAxes();\n      this.validateLabelPlacement();\n      this.setTableData();\n      this.shouldValidateAccessibilityProps();\n      this.shouldValidateLocalizationProps();\n      this.setColors();\n      resolve('component will load');\n    });\n  }\n\n  componentWillUpdate() {\n    // NEVER put items in this method that rely on props (until stencil bug is resolved)\n    // All items that belong here are currently at the top of render\n    // see: https://github.com/ionic-team/stencil/issues/2061#issuecomment-578282178\n    return new Promise(resolve => {\n      resolve('component will update');\n    });\n  }\n\n  componentDidLoad() {\n    return new Promise(resolve => {\n      this.shouldValidateAccessibilityProps();\n      this.shouldValidateLocalizationProps();\n      this.renderRootElements();\n      this.setTooltipInitialStyle();\n      this.setChartDescriptionWrapper();\n      this.setChartAccessibilityTitle();\n      this.setChartAccessibilitySubtitle();\n      this.setChartAccessibilityLongDescription();\n      this.setChartAccessibilityExecutiveSummary();\n      this.setChartAccessibilityPurpose();\n      this.setChartAccessibilityContext();\n      this.setChartAccessibilityStatisticalNotes();\n      this.setChartAccessibilityStructureNotes();\n      this.setParentSVGAccessibility();\n      this.reSetRoot();\n      this.setTextures();\n      this.setStrokes();\n      this.setSubTitleElements();\n      this.drawXGrid();\n      this.drawYGrid();\n      this.setGlobalSelections();\n      this.setTestingAttributes();\n      this.enterGeometries();\n      this.updateGeometries();\n      this.exitGeometries();\n      this.enterDataLabels();\n      this.updateDataLabels();\n      this.exitDataLabels();\n      this.drawGeometries();\n      this.setChartCountAccessibility();\n      this.setGeometryAccessibilityAttributes();\n      this.setGeometryAriaLabels();\n      this.drawLegendElements();\n      this.bindLegendInteractivity();\n      this.setLabelContent();\n      this.processLabelPosition(this.updateLabels, false, true, false);\n      this.drawReferenceLines();\n      this.setSelectedClass();\n      this.checkLabelColorAgainstBackground();\n      this.updateCursor();\n      this.bindInteractivity();\n      this.drawAnnotations();\n      this.setAnnotationAccessibility();\n      this.drawXAxis();\n      this.setXAxisAccessibility();\n      this.drawYAxis();\n      this.setYAxisAccessibility();\n      this.drawBaseline();\n      this.onChangeHandler();\n\n      // we want to hide all child <g> of this.root BUT we want to make sure not to hide the\n      // parent<g> that contains our geometries! In a subGroup chart (like stacked bars),\n      // we want to pass the PARENT of all the <g>s that contain bars\n      hideNonessentialGroups(this.root.node(), this.barG.node());\n      this.setGroupAccessibilityID();\n      this.defaults = false;\n\n      // catch all to remove entering class from labels once we have loaded component\n      this.updateLabels.classed('entering', false);\n      resolve('component did load');\n    }).then(() => this.initialLoadEndEvent.emit({ chartID: this.chartID }));\n  }\n\n  componentDidUpdate() {\n    return new Promise(resolve => {\n      this.duration = !this.animationConfig || !this.animationConfig.disabled ? 750 : 0;\n      if (this.shouldUpdateDescriptionWrapper) {\n        this.setChartDescriptionWrapper();\n        this.shouldUpdateDescriptionWrapper = false;\n      }\n      if (this.shouldSetChartAccessibilityCount) {\n        this.setChartCountAccessibility();\n        this.shouldSetChartAccessibilityCount = false;\n      }\n      if (this.shouldSetChartAccessibilityTitle) {\n        this.setChartAccessibilityTitle();\n        this.shouldSetChartAccessibilityTitle = false;\n      }\n      if (this.shouldSetChartAccessibilitySubtitle) {\n        this.setChartAccessibilitySubtitle();\n        this.shouldSetChartAccessibilitySubtitle = false;\n      }\n      if (this.shouldSetChartAccessibilityLongDescription) {\n        this.setChartAccessibilityLongDescription();\n        this.shouldSetChartAccessibilityLongDescription = false;\n      }\n      if (this.shouldSetChartAccessibilityExecutiveSummary) {\n        this.setChartAccessibilityExecutiveSummary();\n        this.shouldSetChartAccessibilityExecutiveSummary = false;\n      }\n      if (this.shouldSetChartAccessibilityPurpose) {\n        this.setChartAccessibilityPurpose();\n        this.shouldSetChartAccessibilityPurpose = false;\n      }\n      if (this.shouldSetChartAccessibilityContext) {\n        this.setChartAccessibilityContext();\n        this.shouldSetChartAccessibilityContext = false;\n      }\n      if (this.shouldSetChartAccessibilityStatisticalNotes) {\n        this.setChartAccessibilityStatisticalNotes();\n        this.shouldSetChartAccessibilityStatisticalNotes = false;\n      }\n      if (this.shouldSetChartAccessibilityStructureNotes) {\n        this.setChartAccessibilityStructureNotes();\n        this.shouldSetChartAccessibilityStructureNotes = false;\n      }\n      if (this.shouldSetParentSVGAccessibility) {\n        this.setParentSVGAccessibility();\n        this.shouldSetParentSVGAccessibility = false;\n      }\n      if (this.shouldResetRoot) {\n        this.reSetRoot();\n        this.shouldResetRoot = false;\n      }\n      if (this.shouldSetTextures) {\n        this.setTextures();\n        this.shouldSetTextures = false;\n      }\n      if (this.shouldSetStrokes) {\n        this.setStrokes();\n        this.shouldSetStrokes = false;\n      }\n      if (this.shouldSetGlobalSelections) {\n        this.setGlobalSelections();\n        this.shouldSetGlobalSelections = false;\n      }\n      if (this.shouldSetTestingAttributes) {\n        this.setTestingAttributes();\n        this.shouldSetTestingAttributes = false;\n      }\n      if (this.shouldSetSubTitle) {\n        this.setSubTitleElements();\n        this.shouldSetSubTitle = false;\n      }\n      if (this.shouldUpdateXGrid) {\n        this.drawXGrid();\n        this.shouldUpdateXGrid = false;\n      }\n      if (this.shouldUpdateYGrid) {\n        this.drawYGrid();\n        this.shouldUpdateYGrid = false;\n      }\n      if (this.shouldEnterUpdateExit) {\n        this.enterGeometries();\n        this.updateGeometries();\n        this.exitGeometries();\n        this.enterDataLabels();\n        this.updateDataLabels();\n        this.exitDataLabels();\n        this.shouldEnterUpdateExit = false;\n      }\n      if (this.shouldUpdateGeometries) {\n        this.drawGeometries();\n        this.shouldUpdateGeometries = false;\n      }\n      if (this.shouldSetGeometryAccessibilityAttributes) {\n        this.setGeometryAccessibilityAttributes();\n        this.shouldSetGeometryAccessibilityAttributes = false;\n      }\n      if (this.shouldSetGeometryAriaLabels) {\n        this.setGeometryAriaLabels();\n        this.shouldSetGeometryAriaLabels = false;\n      }\n      if (this.shouldSetGroupAccessibilityLabel) {\n        this.setGroupAccessibilityID();\n        this.shouldSetGroupAccessibilityLabel = false;\n      }\n      if (this.shouldUpdateCorners) {\n        this.setRoundedCorners();\n        this.shouldUpdateCorners = false;\n      }\n      if (this.shouldUpdateLegend) {\n        this.drawLegendElements();\n        this.shouldUpdateLegend = false;\n      }\n      if (this.shouldSetLabelContent) {\n        this.setLabelContent();\n        this.shouldSetLabelContent = false;\n      }\n      if (this.shouldSetLabelPosition) {\n        this.setLabelPosition();\n        this.shouldSetLabelPosition = false;\n      }\n      if (this.shouldUpdateReferenceLines) {\n        this.drawReferenceLines();\n        this.shouldUpdateReferenceLines = false;\n      }\n      if (this.shouldDrawInteractionState) {\n        this.updateInteractionState();\n        this.shouldDrawInteractionState = false;\n      }\n      if (this.shouldSetLabelOpacity) {\n        this.setLabelOpacity();\n        this.shouldSetLabelOpacity = false;\n      }\n      if (this.shouldCheckLabelColor) {\n        this.checkLabelColorAgainstBackground();\n        this.shouldCheckLabelColor = false;\n      }\n      if (this.shouldSetSelectionClass) {\n        this.setSelectedClass();\n        this.shouldSetSelectionClass = false;\n      }\n      if (this.shouldUpdateLegendInteractivity) {\n        this.bindLegendInteractivity();\n        this.shouldUpdateLegendInteractivity = false;\n      }\n      if (this.shouldSetLegendCursor) {\n        this.setLegendCursor();\n        this.shouldSetLegendCursor = false;\n      }\n      if (this.shouldUpdateCursor) {\n        this.updateCursor();\n        this.shouldUpdateCursor = false;\n      }\n      if (this.shouldBindInteractivity) {\n        this.bindInteractivity();\n        this.shouldBindInteractivity = false;\n      }\n      if (this.shouldUpdateAnnotations) {\n        this.drawAnnotations();\n        this.shouldUpdateAnnotations = false;\n      }\n      if (this.shouldSetAnnotationAccessibility) {\n        this.setAnnotationAccessibility();\n        this.shouldSetAnnotationAccessibility = false;\n      }\n      if (this.shouldUpdateXAxis) {\n        this.drawXAxis();\n        this.shouldUpdateXAxis = false;\n      }\n      if (this.shouldSetXAxisAccessibility) {\n        this.setXAxisAccessibility();\n        this.shouldSetXAxisAccessibility = false;\n      }\n      if (this.shouldUpdateYAxis) {\n        this.drawYAxis();\n        this.shouldUpdateYAxis = false;\n      }\n      if (this.shouldSetYAxisAccessibility) {\n        this.setYAxisAccessibility();\n        this.shouldSetYAxisAccessibility = false;\n      }\n      if (this.shouldUpdateBaseline) {\n        this.drawBaseline();\n        this.shouldUpdateBaseline = false;\n      }\n      this.onChangeHandler();\n      this.updateLabels.classed('entering', false);\n      resolve('component did update');\n    }).then(() => this.drawEndEvent.emit({ chartID: this.chartID }));\n  }\n\n  shouldValidateLocalizationProps() {\n    const windowInstances = getGlobalInstances();\n    const languageString = windowInstances.i18Next.language;\n    const languageObject = windowInstances.i18Next.getResourceBundle(languageString);\n    const numeralObject = windowInstances.numeral.localeData();\n    if (this.shouldValidateLocalization && !this.localization.skipValidation) {\n      this.shouldValidateLocalization = false;\n      validateLocalizationProps(this.chartID, {\n        ...this.localization,\n        language: languageObject,\n        numeralLocale: numeralObject\n      });\n    }\n  }\n\n  shouldValidateAccessibilityProps() {\n    if (this.shouldValidateAccessibility && !this.accessibility.disableValidation) {\n      this.shouldValidateAccessibility = false;\n      validateAccessibilityProps(\n        this.chartID,\n        { ...this.accessibility },\n        {\n          annotations: this.annotations,\n          data: this.data,\n          uniqueID: this.uniqueID,\n          context: {\n            mainTitle: this.mainTitle,\n            onClickEvent: !this.suppressEvents ? this.clickEvent.emit : undefined\n          }\n        }\n      );\n    }\n  }\n\n  validateInteractionKeys() {\n    this.innerInteractionKeys =\n      this.interactionKeys && this.interactionKeys.length ? this.interactionKeys : [this.ordinalAccessor];\n  }\n\n  validateDataLabelAccessor() {\n    this.innerLabelAccessor = this.dataLabel.labelAccessor ? this.dataLabel.labelAccessor : this.valueAccessor;\n  }\n\n  validateLabelPlacement() {\n    // check data label placement assignment based on layout\n    if (this.layout === 'vertical') {\n      if (\n        this.dataLabel.placement !== 'top' &&\n        this.dataLabel.placement !== 'bottom' &&\n        this.dataLabel.placement !== 'auto'\n      ) {\n        this.dataLabel.placement = 'top';\n      }\n    } else {\n      if (\n        this.dataLabel.placement !== 'right' &&\n        this.dataLabel.placement !== 'left' &&\n        this.dataLabel.placement !== 'auto'\n      ) {\n        this.dataLabel.placement = 'right';\n      }\n    }\n  }\n\n  getLanguageString() {\n    return getActiveLanguageString(this.localization);\n  }\n\n  setLocalizationConfig() {\n    configLocalization(this.localization);\n  }\n\n  setDimensions() {\n    this.padding = typeof this.padding === 'string' ? getPadding(this.padding) : this.padding;\n\n    // before we render/load we need to set our height and width based on props\n    this.innerHeight = this.height - this.margin.top - this.margin.bottom;\n    this.innerWidth = this.width - this.margin.left - this.margin.right;\n\n    this.innerPaddedHeight = this.innerHeight - this.padding.top - this.padding.bottom;\n    this.innerPaddedWidth = this.innerWidth - this.padding.left - this.padding.right;\n  }\n\n  prepareData() {\n    // check data format & offset time object\n    this.data.map(d => {\n      d[this.valueAccessor] = parseFloat(d[this.valueAccessor]);\n      d[this.groupAccessor] =\n        d[this.groupAccessor] instanceof Date\n          ? formatDate({\n              date: d[this.groupAccessor],\n              format: this.layout === 'vertical' ? this.xAxis.format : this.yAxis.format,\n              offsetTimezone: true\n            })\n          : d[this.groupAccessor];\n    });\n\n    this.nest = nest()\n      .key(d => d[this.groupAccessor])\n      .entries(this.data);\n\n    // Get all item categories\n    this.datakeys = this.nest.map(d => d.key);\n  }\n\n  setTableData() {\n    // generate scoped and formatted data for data-table component\n    const keys = scopeDataKeys(this, chartAccessors, 'clustered-bar-chart');\n    this.tableData = getScopedData(this.data, keys);\n    this.tableColumns = Object.keys(keys);\n  }\n\n  prepareScales() {\n    const minBarValue =\n      this.minValueOverride && this.minValueOverride < min(this.data, d => d[this.valueAccessor])\n        ? this.minValueOverride\n        : min(this.data, d => d[this.valueAccessor]);\n\n    const maxBarValue =\n      this.maxValueOverride && this.maxValueOverride > max(this.data, d => d[this.valueAccessor])\n        ? this.maxValueOverride\n        : max(this.data, d => d[this.valueAccessor]);\n\n    // scale band based on layout of chart\n    if (this.layout === 'vertical') {\n      this.y = scaleLinear()\n        .domain([Math.min(0, minBarValue), Math.max(0, maxBarValue)])\n        .range([this.innerPaddedHeight, 0]);\n\n      this.x0 = scaleBand()\n        .domain(this.datakeys)\n        .range(this.reverseOrder ? [this.innerPaddedWidth, 0] : [0, this.innerPaddedWidth])\n        .padding(this.groupIntervalRatio);\n\n      this.x1 = scaleBand()\n        .domain(this.nest[0].values.map(d => d[this.ordinalAccessor]))\n        .rangeRound([0, this.x0.bandwidth()])\n        .padding(this.barIntervalRatio);\n    } else if (this.layout === 'horizontal') {\n      this.x = scaleLinear()\n        .domain([Math.min(0, minBarValue), Math.max(0, maxBarValue)])\n        .range([0, this.innerPaddedWidth]);\n\n      this.y0 = scaleBand()\n        .domain(this.datakeys)\n        .range(this.reverseOrder ? [this.innerPaddedHeight, 0] : [0, this.innerPaddedHeight])\n        .padding(this.groupIntervalRatio);\n\n      this.y1 = scaleBand()\n        .domain(this.nest[0].values.map(d => d[this.ordinalAccessor]))\n        .rangeRound([0, this.y0.bandwidth()])\n        .padding(this.barIntervalRatio);\n    }\n  }\n\n  validateAxes() {\n    // check whether we are going to display axis and then update props\n    this.innerXAxis = { ...this.xAxis, gridVisible: !(this.layout === 'vertical') && this.xAxis.gridVisible };\n    this.innerYAxis = { ...this.yAxis, gridVisible: this.layout === 'vertical' && this.yAxis.gridVisible };\n  }\n\n  setSubTitleElements() {\n    setSubTitle({\n      root: this.subTitleG,\n      subTitle: this.subTitle\n    });\n  }\n\n  setColors() {\n    this.preparedColors = this.colors\n      ? convertVisaColor(this.colors)\n      : getColors(this.colorPalette, this.nest[0].values.length);\n  }\n\n  setTextures() {\n    const colorsArray = this.preparedColors.range ? this.preparedColors.range() : this.preparedColors;\n    if (this.accessibility.hideTextures || colorsArray.length > 6) {\n      this.colorArr = this.preparedColors;\n    } else {\n      const colorsToConvert = colorsArray;\n      const textures = convertColorsToTextures({\n        colors: colorsToConvert,\n        rootSVG: this.svg.node(),\n        id: this.chartID,\n        scheme: 'categorical',\n        disableTransitions: !this.duration\n      });\n      this.colorArr = this.preparedColors.range ? this.preparedColors.copy().range(textures) : textures;\n    }\n  }\n\n  setStrokes() {\n    this.strokes = buildStrokes({\n      root: this.svg.node(),\n      id: this.chartID,\n      colors: this.preparedColors.range ? this.preparedColors.range() : this.preparedColors,\n      clickStyle: this.clickStyle,\n      hoverStyle: this.hoverStyle\n    });\n  }\n\n  renderRootElements() {\n    this.svg = select(this.clusteredBarChartEl)\n      .select('.visa-viz-d3-clustered-bar-container')\n      .append('svg')\n      .attr('width', this.width)\n      .attr('height', this.height)\n      .attr('viewBox', '0 0 ' + this.width + ' ' + this.height);\n\n    this.root = this.svg.append('g').attr('id', 'visa-viz-margin-container-g-' + this.chartID);\n    this.rootG = this.root.append('g').attr('id', 'visa-viz-padding-container-g-' + this.chartID);\n\n    this.gridG = this.rootG.append('g').attr('class', 'grid-group');\n    this.barG = this.rootG.append('g').attr('class', 'clustered-bar-group');\n\n    this.labelG = this.rootG.append('g').attr('class', 'clustered-bar-dataLabel-group');\n\n    this.legendG = select(this.clusteredBarChartEl)\n      .select('.clustered-bar-legend')\n      .append('svg');\n\n    this.subTitleG = select(this.clusteredBarChartEl).select('.clustered-bar-sub-title');\n    this.tooltipG = select(this.clusteredBarChartEl).select('.clustered-bar-tooltip');\n\n    this.referencesG = this.rootG.append('g').attr('class', 'clustered-bar-reference-line-group');\n  }\n\n  setTestingAttributes() {\n    if (this.unitTest) {\n      select(this.clusteredBarChartEl)\n        .select('.visa-viz-d3-clustered-bar-container')\n        .attr('data-testid', 'chart-container');\n      select(this.clusteredBarChartEl)\n        .select('.clustered-bar-main-title')\n        .attr('data-testid', 'main-title');\n      select(this.clusteredBarChartEl)\n        .select('.clustered-bar-sub-title')\n        .attr('data-testid', 'sub-title');\n\n      this.svg.attr('data-testid', 'root-svg');\n      this.root.attr('data-testid', 'margin-container');\n      this.rootG.attr('data-testid', 'padding-container');\n      this.legendG.attr('data-testid', 'legend-container');\n      this.tooltipG.attr('data-testid', 'tooltip-container');\n\n      this.barG.attr('data-testid', 'clustered-bar-group');\n      this.updateBarWrappers\n        .attr('data-testid', 'clustered-bar-wrapper')\n        .attr('data-id', d => `clustered-bar-wrapper-${d.key}`);\n      this.update\n        .attr('data-testid', 'bar')\n        .attr('data-id', d => `bar-${d[this.groupAccessor]}-${d[this.ordinalAccessor]}`);\n\n      this.labelG.attr('data-testid', 'clustered-bar-dataLabel-group');\n      this.updateLabelWrappers\n        .attr('data-testid', 'clustered-bar-dataLabel-wrapper')\n        .attr('data-id', d => `clustered-bar-dataLabel-wrapper-${d.key}`);\n      this.updateLabels\n        .attr('data-testid', 'dataLabel')\n        .attr('data-id', d => `dataLabel-${d[this.groupAccessor]}-${d[this.ordinalAccessor]}`);\n\n      this.referencesG.attr('data-testid', 'reference-line-group');\n      this.svg.select('defs').attr('data-testid', 'pattern-defs');\n\n      // reference lines do not have global selections\n      this.referencesG.selectAll('.clustered-bar-reference-line').attr('data-testid', 'reference-line');\n\n      this.referencesG.selectAll('.clustered-bar-reference-line-label').attr('data-testid', 'reference-line-label');\n    } else {\n      select(this.clusteredBarChartEl)\n        .select('.visa-viz-d3-clustered-bar-container')\n        .attr('data-testid', null);\n      select(this.clusteredBarChartEl)\n        .select('.clustered-bar-main-title')\n        .attr('data-testid', null);\n      select(this.clusteredBarChartEl)\n        .select('.clustered-bar-sub-title')\n        .attr('data-testid', null);\n      this.svg.attr('data-testid', null);\n      this.root.attr('data-testid', null);\n      this.rootG.attr('data-testid', null);\n      this.legendG.attr('data-testid', null);\n      this.tooltipG.attr('data-testid', null);\n\n      this.barG.attr('data-testid', null);\n      this.updateBarWrappers.attr('data-testid', null).attr('data-id', null);\n      this.update.attr('data-testid', null).attr('data-id', null);\n\n      this.labelG.attr('data-testid', null);\n      this.updateLabelWrappers.attr('data-testid', null).attr('data-id', null);\n      this.updateLabels.attr('data-testid', null).attr('data-id', null);\n\n      this.referencesG.attr('data-testid', null);\n      this.svg.select('defs').attr('data-testid', null);\n\n      // reference lines do not have global selections\n      this.referencesG.selectAll('.clustered-bar-reference-line').attr('data-testid', null);\n\n      this.referencesG.selectAll('.clustered-bar-reference-line-label').attr('data-testid', null);\n    }\n  }\n\n  // reset graph size based on window size\n  reSetRoot() {\n    const changeSvg = prepareRenderChange({\n      selection: this.svg,\n      duration: this.duration,\n      namespace: 'root_reset',\n      easing: easeCircleIn\n    });\n\n    changeSvg\n      .attr('width', this.width)\n      .attr('height', this.height)\n      .attr('viewBox', '0 0 ' + this.width + ' ' + this.height);\n\n    const changeRoot = prepareRenderChange({\n      selection: this.root,\n      duration: this.duration,\n      namespace: 'root_reset',\n      easing: easeCircleIn\n    });\n\n    changeRoot.attr('transform', `translate(${this.margin.left}, ${this.margin.top})`);\n\n    const changeRootG = prepareRenderChange({\n      selection: this.rootG,\n      duration: this.duration,\n      namespace: 'root_reset',\n      easing: easeCircleIn\n    });\n\n    changeRootG.attr('transform', `translate(${this.padding.left}, ${this.padding.top})`);\n\n    setAccessibilityDescriptionWidth(this.chartID, this.width);\n  }\n\n  // draw axis line\n  drawXAxis() {\n    const axisAccessor = this.layout === 'vertical' ? this.groupAccessor : this.valueAccessor;\n    const axisLabel =\n      this.xAxis.label || this.xAxis.label === ''\n        ? this.xAxis.label\n        : this.dataKeyNames && this.dataKeyNames[axisAccessor]\n        ? this.dataKeyNames[axisAccessor]\n        : this.xAxis.label;\n\n    drawAxis({\n      root: this.rootG,\n      height: this.innerPaddedHeight,\n      width: this.innerPaddedWidth,\n      axisScale: this.layout === 'vertical' ? this.x0 : this.x,\n      left: false,\n      wrapLabel: this.wrapLabel && this.layout === 'vertical' ? this.x0.bandwidth() : '',\n      format: this.xAxis.format,\n      tickInterval: this.xAxis.tickInterval,\n      label: axisLabel, // this.xAxis.label,\n      padding: this.padding,\n      hide: !this.innerXAxis.visible,\n      duration: this.duration\n    });\n  }\n\n  drawYAxis() {\n    const axisAccessor = this.layout === 'vertical' ? this.valueAccessor : this.groupAccessor;\n    const axisLabel =\n      this.yAxis.label && this.yAxis.label !== ''\n        ? this.yAxis.label\n        : this.dataKeyNames && this.dataKeyNames[axisAccessor]\n        ? this.dataKeyNames[axisAccessor]\n        : this.yAxis.label;\n\n    drawAxis({\n      root: this.rootG,\n      height: this.innerPaddedHeight,\n      width: this.innerPaddedWidth,\n      axisScale: this.layout === 'vertical' ? this.y : this.y0,\n      left: true,\n      wrapLabel: this.wrapLabel ? this.padding.left || 100 : '',\n      format: this.yAxis.format,\n      tickInterval: this.yAxis.tickInterval,\n      label: axisLabel, // this.yAxis.label,\n      padding: this.padding,\n      hide: !this.innerYAxis.visible,\n      duration: this.duration\n    });\n  }\n\n  setXAxisAccessibility() {\n    const axisAccessor = this.layout === 'vertical' ? this.groupAccessor : this.valueAccessor;\n    const axisLabel =\n      this.xAxis.label || this.xAxis.label === ''\n        ? this.xAxis.label\n        : this.dataKeyNames && this.dataKeyNames[axisAccessor]\n        ? this.dataKeyNames[axisAccessor]\n        : this.xAxis.label;\n\n    setAccessXAxis({\n      rootEle: this.clusteredBarChartEl,\n      hasXAxis: this.innerXAxis ? this.innerXAxis.visible : false,\n      xAxis: this.layout === 'vertical' ? this.x0 || false : this.x || false, // this is optional for some charts, if hasXAxis is always false\n      xAxisLabel: axisLabel ? axisLabel : '' // this is optional for some charts, if hasXAxis is always false\n    });\n  }\n\n  setYAxisAccessibility() {\n    const axisAccessor = this.layout === 'vertical' ? this.valueAccessor : this.groupAccessor;\n    const axisLabel =\n      this.yAxis.label && this.yAxis.label !== ''\n        ? this.yAxis.label\n        : this.dataKeyNames && this.dataKeyNames[axisAccessor]\n        ? this.dataKeyNames[axisAccessor]\n        : this.yAxis.label;\n\n    setAccessYAxis({\n      rootEle: this.clusteredBarChartEl,\n      hasYAxis: this.innerYAxis ? this.innerYAxis.visible : false,\n      yAxis: this.layout === 'vertical' ? this.y || false : this.y0 || false, // this is optional for some charts, if hasXAxis is always false\n      yAxisLabel: axisLabel ? axisLabel : '' // this is optional for some charts, if hasXAxis is always false\n    });\n  }\n\n  drawBaseline() {\n    drawAxis({\n      root: this.rootG,\n      height: this.innerPaddedHeight,\n      width: this.innerPaddedWidth,\n      axisScale: this.layout === 'vertical' ? this.x0 : this.x,\n      left: false,\n      padding: this.padding,\n      markOffset: this.layout === 'vertical' ? this.y(0) || -1 : this.y0(0) || -1,\n      hide: !(this.layout === 'vertical'),\n      duration: this.duration\n    });\n    drawAxis({\n      root: this.rootG,\n      height: this.innerPaddedHeight,\n      width: this.innerPaddedWidth,\n      axisScale: this.layout === 'vertical' ? this.y : this.y0,\n      left: true,\n      padding: this.padding,\n      markOffset: this.layout === 'vertical' ? this.x0(0) || -1 : this.x(0) || -1,\n      hide: this.layout === 'vertical',\n      duration: this.duration\n    });\n  }\n\n  // dashed line grid for chart\n  drawXGrid() {\n    drawGrid(\n      this.gridG,\n      this.innerPaddedHeight,\n      this.innerPaddedWidth,\n      this.layout === 'vertical' ? this.x0 : this.x,\n      false,\n      !this.innerXAxis.gridVisible,\n      this.xAxis.tickInterval,\n      this.duration\n    );\n  }\n\n  drawYGrid() {\n    drawGrid(\n      this.gridG,\n      this.innerPaddedHeight,\n      this.innerPaddedWidth,\n      this.layout === 'vertical' ? this.y : this.y0,\n      true,\n      !this.innerYAxis.gridVisible,\n      this.yAxis.tickInterval,\n      this.duration\n    );\n  }\n\n  setGlobalSelections() {\n    const dataBoundToWrappers = this.barG.selectAll('.clustered-bar-wrapper').data(this.nest, d => d.key);\n\n    this.enterBarWrappers = dataBoundToWrappers.enter().append('g');\n    this.exitBarWrappers = dataBoundToWrappers.exit();\n    this.updateBarWrappers = dataBoundToWrappers.merge(this.enterBarWrappers);\n\n    const dataBoundToGeometries = this.updateBarWrappers\n      .selectAll('.clustered-bar')\n      .data(d => d.values, d => d[this.ordinalAccessor]);\n\n    this.enter = dataBoundToGeometries.enter().append('rect');\n    this.exit = dataBoundToGeometries.exit();\n    this.update = dataBoundToGeometries.merge(this.enter);\n\n    this.enterSize = this.enter.size();\n    this.exitSize = this.exit.size();\n\n    const dataBoundToLabelWrappers = this.labelG.selectAll('g').data(this.nest, d => d.key);\n\n    this.enterLabelWrappers = dataBoundToLabelWrappers.enter().append('g');\n    this.exitLabelWrappers = dataBoundToLabelWrappers.exit();\n    this.updateLabelWrappers = dataBoundToLabelWrappers.merge(this.enterLabelWrappers);\n\n    const dataBoundToLabels = this.updateLabelWrappers\n      .selectAll('text')\n      .data(d => d.values, d => d[this.ordinalAccessor]);\n    this.enterLabels = dataBoundToLabels.enter().append('text');\n    this.exitLabels = dataBoundToLabels.exit();\n    this.updateLabels = dataBoundToLabels.merge(this.enterLabels);\n    // this.labels\n  }\n\n  enterGeometries() {\n    this.enter.interrupt();\n    const ordinalAxis = this.layout === 'vertical' ? 'x' : 'y';\n    const ordinalDimension = this.layout === 'vertical' ? 'width' : 'height';\n    const valueAxis = this.layout === 'vertical' ? 'y' : 'x';\n    const valueDimension = this.layout === 'vertical' ? 'height' : 'width';\n    const choice = this.layout === 'vertical' ? 'max' : 'min';\n\n    this.enterBarWrappers\n      .attr('class', 'clustered-bar-wrapper')\n      .classed('entering', true)\n      .attr('transform', d =>\n        this.layout === 'vertical' ? 'translate(' + this.x0(d.key) + ',0)' : 'translate(0,' + this.y0(d.key) + ')'\n      )\n      .each((_, i, n) => {\n        initializeElementAccess(n[i]);\n      });\n\n    this.enter\n      .attr('class', 'clustered-bar')\n      .attr('cursor', !this.suppressEvents ? this.cursor : null)\n      .attr('rx', this.roundedCorner)\n      .attr('ry', this.roundedCorner)\n      .each((_d, i, n) => {\n        initializeElementAccess(n[i]);\n      })\n      .on('click', !this.suppressEvents ? (d, i, n) => this.onClickHandler(d, n[i]) : null)\n      .on('mouseover', !this.suppressEvents ? (d, i, n) => this.onHoverHandler(d, n[i]) : null)\n      .on('mouseout', !this.suppressEvents ? () => this.onMouseOutHandler() : null)\n      .attr('fill', (d, i) => {\n        const clicked =\n          this.clickHighlight &&\n          this.clickHighlight.length > 0 &&\n          checkClicked(d, this.clickHighlight, this.innerInteractionKeys);\n        const hovered = this.hoverHighlight && checkHovered(d, this.hoverHighlight, this.innerInteractionKeys);\n        const baseColor = this.colorArr[i];\n        return clicked && this.clickStyle.color\n          ? visaColors[this.clickStyle.color] || this.clickStyle.color\n          : clicked\n          ? baseColor\n          : hovered && this.hoverStyle.color\n          ? visaColors[this.hoverStyle.color] || this.hoverStyle.color\n          : baseColor;\n      })\n      .attr('opacity', 0)\n      .attr(valueAxis, d => this[valueAxis](Math[choice](0, d[this.valueAccessor])))\n      .attr(\n        valueDimension,\n        d =>\n          Math.abs(\n            this.layout === 'vertical'\n              ? this[valueAxis](0) - this[valueAxis](d[this.valueAccessor])\n              : this[valueAxis](d[this.valueAccessor]) - this[valueAxis](0)\n          ) || 0.000001 // avoiding getBBox dimension and coordinates issues\n      )\n      .attr(ordinalAxis, d => this[ordinalAxis + '1'](d[this.ordinalAccessor]))\n      .attr(ordinalDimension, this[ordinalAxis + '1'].bandwidth());\n\n    if (!this.defaults) {\n      this.enter\n        .classed('entering', true)\n        .attr(ordinalAxis, (d, i, n) => {\n          const p = select(n[i].parentNode);\n          const groupEntering = p.classed('entering');\n          let xStart = groupEntering\n            ? this[ordinalAxis + '0'](p.datum().key)\n            : this[ordinalAxis + '1'](d[this.ordinalAccessor]);\n          const xCenter = groupEntering\n            ? this[ordinalAxis + '0'].bandwidth() / 2\n            : this[ordinalAxis + '1'].bandwidth() / 2;\n          const xPercent = (xStart + xCenter) / (this.innerPaddedWidth / 2);\n          xStart = groupEntering ? 0 : xStart;\n          const shift = xStart + xCenter * xPercent;\n          return shift;\n        })\n        .attr(ordinalDimension, 0);\n    }\n    this.enterBarWrappers.order();\n    this.enter.order();\n  }\n\n  updateGeometries() {\n    this.update.interrupt();\n\n    this.update\n      .transition('opacity')\n      .duration((_, i, n) => {\n        if (select(n[i]).classed('entering')) {\n          select(n[i]).classed('entering', false);\n          return this.duration;\n        }\n        return 0;\n      })\n      .ease(easeCircleIn)\n      .attr('opacity', d =>\n        checkInteraction(d, 1, this.hoverOpacity, this.hoverHighlight, this.clickHighlight, this.innerInteractionKeys)\n      );\n  }\n\n  exitGeometries() {\n    this.exitBarWrappers.interrupt();\n    this.exit.interrupt();\n\n    const axisOfShift = this.layout === 'vertical' ? 'x' : 'y';\n    const dimensionOfShift = this.layout === 'vertical' ? 'width' : 'height';\n    const innerPaddedDimension = 'innerPadded' + dimensionOfShift[0].toUpperCase() + dimensionOfShift.substring(1);\n\n    this.exit\n      .transition('exit')\n      .duration(this.duration)\n      .ease(easeCircleIn)\n      .attr('opacity', 0)\n      .attr(axisOfShift, (_d, i, n) => {\n        const self = select(n[i]);\n        let shift = +self.attr(axisOfShift) + +self.attr(dimensionOfShift) / 2;\n        shift =\n          +self.attr(axisOfShift) + (+self.attr(dimensionOfShift) / 2) * (shift / (this[innerPaddedDimension] / 2));\n        return shift;\n      })\n      .attr(dimensionOfShift, 0);\n\n    this.exitSize += this.exitBarWrappers.selectAll('.clustered-bar').size();\n\n    this.exitBarWrappers\n      .selectAll('.clustered-bar')\n      .transition('exit_wrappers')\n      .duration(this.duration * 0.75)\n      .ease(easeCircleIn)\n      .attr('opacity', 0)\n      .attr(axisOfShift, (_, i, n) => {\n        const p = n[i].parentNode;\n        const xStart = p.transform.baseVal.consolidate().matrix.e;\n        const xCenter = this[axisOfShift + '0'].bandwidth() / 2;\n        const xPercent = (xStart + xCenter) / (this[innerPaddedDimension] / 2);\n        const shift = xCenter * xPercent;\n        return shift;\n      })\n      .attr(dimensionOfShift, 0);\n\n    this.update\n      .transition('accessibilityAfterExit')\n      .duration(this.duration)\n      .ease(easeCircleIn)\n      .call(transitionEndAll, () => {\n        // before we exit geometries, we need to check if a focus exists or not\n        const focusDidExist = checkAccessFocus(this.rootG.node());\n        // then we must remove the exiting elements\n        this.exit.remove();\n        this.exitBarWrappers.remove();\n        // then our util can count geometries\n        this.setChartCountAccessibility();\n        // our group's label should update with new counts too\n        this.setGroupAccessibilityID();\n        // since items exited, labels must receive updated values\n        this.setGeometryAriaLabels();\n        // and also make sure the user's focus isn't lost\n        retainAccessFocus({\n          parentGNode: this.rootG.node(),\n          focusDidExist\n          // recursive: true\n        });\n      });\n  }\n\n  drawGeometries() {\n    const ordinalAxis = this.layout === 'vertical' ? 'x' : 'y';\n    const ordinalDimension = this.layout === 'vertical' ? 'width' : 'height';\n    const valueAxis = this.layout === 'vertical' ? 'y' : 'x';\n    const valueDimension = this.layout === 'vertical' ? 'height' : 'width';\n    const choice = this.layout === 'vertical' ? 'max' : 'min';\n\n    this.updateBarWrappers\n      .transition('update')\n      .duration(this.duration)\n      .ease(easeCircleIn)\n      .attr('transform', d =>\n        this.layout === 'vertical' ? 'translate(' + this.x0(d.key) + ',0)' : 'translate(0,' + this.y0(d.key) + ')'\n      )\n      .call(transitionEndAll, () => {\n        this.updateBarWrappers.classed('entering', false);\n      });\n\n    this.update\n      .classed('geometryIsMoving', (d, i, n) => {\n        const geometryIsUpdating = checkAttributeTransitions(select(n[i]), [\n          {\n            attr: ordinalAxis,\n            numeric: true,\n            newValue: this[ordinalAxis + '1'](d[this.ordinalAccessor])\n          },\n          {\n            attr: ordinalDimension,\n            numeric: true,\n            newValue: this[ordinalAxis + '1'].bandwidth()\n          },\n          {\n            attr: valueAxis,\n            numeric: true,\n            newValue: this[valueAxis](Math[choice](0, d[this.valueAccessor])) // this.y(d[this.valueAccessor]))\n          },\n          {\n            attr: valueDimension,\n            numeric: true,\n            newValue:\n              Math.abs(\n                this.layout === 'vertical'\n                  ? this[valueAxis](0) - this[valueAxis](d[this.valueAccessor])\n                  : this[valueAxis](d[this.valueAccessor]) - this[valueAxis](0)\n              ) || 0.000001\n          }\n        ]);\n        return geometryIsUpdating;\n      })\n      .attr(\n        `data-${ordinalAxis}`,\n        d =>\n          this.layout === 'vertical'\n            ? this[ordinalAxis + '1'](d[this.ordinalAccessor]) //+ this.x0(d[this.groupAccessor])\n            : this[ordinalAxis + '1'](d[this.ordinalAccessor]) //+ this.y0(d[this.groupAccessor])\n      )\n      .attr(\n        `data-translate-x`,\n        d => (this.layout === 'vertical' ? this.x0(d[this.groupAccessor]) : 0) + this.padding.left + this.margin.left\n      )\n      .attr(\n        `data-translate-y`,\n        d => (this.layout === 'vertical' ? 0 : this.y0(d[this.groupAccessor])) + this.padding.top + this.margin.top\n      )\n      .attr(`data-${ordinalDimension}`, this[ordinalAxis + '1'].bandwidth())\n      .attr(`data-${valueAxis}`, d => this[valueAxis](Math[choice](0, d[this.valueAccessor])))\n      .attr(\n        `data-${valueDimension}`,\n        d =>\n          Math.abs(\n            this.layout === 'vertical'\n              ? this[valueAxis](0) - this[valueAxis](d[this.valueAccessor])\n              : this[valueAxis](d[this.valueAccessor]) - this[valueAxis](0)\n          ) || 0.000001\n      )\n      .transition('update')\n      .duration((_, i, n) => {\n        return select(n[i]).classed('entering') ? this.duration / 2 : this.duration;\n      })\n      .delay((_, i, n) => {\n        return select(n[i]).classed('entering') ? this.duration / 2 : 0;\n      })\n      .ease(easeCircleIn)\n      .attr(valueAxis, d => this[valueAxis](Math[choice](0, d[this.valueAccessor])))\n      .attr(\n        valueDimension,\n        d =>\n          Math.abs(\n            this.layout === 'vertical'\n              ? this[valueAxis](0) - this[valueAxis](d[this.valueAccessor])\n              : this[valueAxis](d[this.valueAccessor]) - this[valueAxis](0)\n          ) || 0.000001\n      )\n      .attr(ordinalAxis, d => this[ordinalAxis + '1'](d[this.ordinalAccessor]))\n      .attr(ordinalDimension, this[ordinalAxis + '1'].bandwidth())\n      .call(transitionEndAll, () => {\n        this.update.classed('geometryIsMoving', false);\n\n        this.updateInteractionState();\n        this.checkLabelColorAgainstBackground();\n        // we must make sure if geometries move, that our focus indicator does too\n        retainAccessFocus({\n          parentGNode: this.rootG.node()\n        });\n        // now we can emit the event that transitions are complete\n        this.transitionEndEvent.emit({ chartID: this.chartID });\n      });\n  }\n\n  updateInteractionState() {\n    removeHoverStrokes(this.svg.node());\n    // we created an \"opacity\" transition namespace in update's transition\n    // we override it here to instantly display opacity state (below)\n    this.update.interrupt('opacity');\n\n    // we use this.update and this.updateLabels from setGlobalSelection here\n    // the lifecycle state does not matter (enter/update/exit)\n    // since interaction state can happen at any time\n    // first we address interaction state on marks/bars\n    this.update\n      .attr('opacity', d =>\n        checkInteraction(d, 1, this.hoverOpacity, this.hoverHighlight, this.clickHighlight, this.innerInteractionKeys)\n      )\n      .attr('fill', (d, i) => {\n        const clicked =\n          this.clickHighlight &&\n          this.clickHighlight.length > 0 &&\n          checkClicked(d, this.clickHighlight, this.innerInteractionKeys);\n        const hovered = this.hoverHighlight && checkHovered(d, this.hoverHighlight, this.innerInteractionKeys);\n        const baseColor = this.colorArr[i];\n        return clicked && this.clickStyle.color\n          ? visaColors[this.clickStyle.color] || this.clickStyle.color\n          : clicked\n          ? baseColor\n          : hovered && this.hoverStyle.color\n          ? visaColors[this.hoverStyle.color] || this.hoverStyle.color\n          : baseColor;\n      })\n      .attr('filter', (d, i, n) => {\n        if (!this.accessibility.hideStrokes && !select(n[i]).classed('geometryIsMoving')) {\n          const clicked =\n            this.clickHighlight &&\n            this.clickHighlight.length > 0 &&\n            checkClicked(d, this.clickHighlight, this.innerInteractionKeys);\n          const hovered = this.hoverHighlight && checkHovered(d, this.hoverHighlight, this.innerInteractionKeys);\n          const baseColor = this.preparedColors[i];\n          const state = clicked ? 'click' : hovered && !select(n[i]).classed('geometryIsMoving') ? 'hover' : 'rest';\n          const color =\n            clicked && this.clickStyle.color\n              ? visaColors[this.clickStyle.color] || this.clickStyle.color\n              : clicked\n              ? baseColor\n              : hovered && this.hoverStyle.color\n              ? visaColors[this.hoverStyle.color] || this.hoverStyle.color\n              : baseColor;\n          if (state === 'hover') {\n            drawHoverStrokes({\n              inputElement: n[i],\n              id: this.chartID,\n              key: d[this.ordinalAccessor] + d[this.groupAccessor],\n              strokeWidth: this.hoverStyle.strokeWidth,\n              fill: color\n            });\n          }\n          return this.strokes[state + color];\n        }\n        return null;\n      });\n    retainAccessFocus({\n      parentGNode: this.rootG.node()\n    });\n\n    // then we set the legend interactive state\n    setLegendInteractionState({\n      root: this.legendG,\n      uniqueID: this.chartID,\n      interactionKeys: this.innerInteractionKeys,\n      groupAccessor: this.ordinalAccessor,\n      hoverHighlight: this.hoverHighlight,\n      clickHighlight: this.clickHighlight,\n      hoverStyle: this.hoverStyle,\n      clickStyle: this.clickStyle,\n      hoverOpacity: this.hoverOpacity\n    });\n\n    // and lastly we have to check for labels, especially when auto placement is in place\n    this.updateLabels.interrupt('opacity');\n    const addCollisionClass = this.dataLabel.placement === 'auto' || this.dataLabel.collisionHideOnly;\n    const hideOnly = this.dataLabel.placement !== 'auto' && this.dataLabel.collisionHideOnly;\n\n    this.processLabelOpacity(this.updateLabels, addCollisionClass);\n\n    // if we have collision on, we need to update the bitmap on interaction\n    if (addCollisionClass) {\n      const labelsAdded = this.updateLabels.filter((_, i, n) => select(n[i]).classed('collision-added'));\n      const labelsRemoved = this.updateLabels\n        .filter((_, i, n) => select(n[i]).classed('collision-removed'))\n        .attr('data-use-dx', hideOnly) // need to add this for remove piece of collision below\n        .attr('data-use-dy', hideOnly); // .transition().duration(0);\n\n      // we can now remove labels as well if we need to...\n      if (labelsRemoved.size() > 0) {\n        this.bitmaps = resolveLabelCollision({\n          bitmaps: this.bitmaps,\n          labelSelection: labelsRemoved,\n          avoidMarks: [],\n          validPositions: ['middle'],\n          offsets: [1],\n          accessors: ['key'],\n          size: [roundTo(this.width, 0), roundTo(this.height, 0)],\n          hideOnly: false,\n          removeOnly: true\n        });\n\n        // remove temporary class now\n        labelsRemoved.classed('collision-removed', false);\n      }\n\n      // we can now add labels as well if we need to...\n      if (labelsAdded.size() > 0) {\n        this.processLabelPosition(labelsAdded, false, false, true);\n        // remove temporary class now\n        labelsAdded.classed('collision-added', false);\n      }\n    }\n  }\n\n  setLabelOpacity() {\n    this.processLabelOpacity(this.updateLabels);\n  }\n\n  processLabelOpacity(selection, addCollisionClass?) {\n    const opacity = this.dataLabel.visible ? 1 : 0;\n    const ordinalAxis = this.layout === 'vertical' ? 'x' : 'y';\n    const ordinalDimension = this.layout === 'vertical' ? 'width' : 'height';\n    const valueAxis = this.layout === 'vertical' ? 'y' : 'x';\n    const valueDimension = this.layout === 'vertical' ? 'height' : 'width';\n    const fullBandwidth = this[ordinalAxis + '0'].bandwidth() / this.nest[0].values.length;\n\n    selection.attr('opacity', (d, i, n) => {\n      const prevOpacity = +select(n[i]).attr('opacity');\n      const styleVisibility = select(n[i]).style('visibility');\n      const dimensions = {};\n      dimensions[ordinalDimension] =\n        this.dataLabel.placement === 'left' || this.dataLabel.placement === 'bottom'\n          ? this[ordinalAxis + '1'].bandwidth()\n          : fullBandwidth;\n      if (this.dataLabel.placement === 'left' || this.dataLabel.placement === 'bottom') {\n        dimensions[valueDimension] = Math.abs(\n          this.layout === 'vertical'\n            ? this[valueAxis](0) - this[valueAxis](d[this.valueAccessor])\n            : this[valueAxis](d[this.valueAccessor]) - this[valueAxis](0)\n        );\n      }\n      const hasRoom =\n        this.dataLabel.placement === 'auto' ||\n        this.dataLabel.collisionHideOnly ||\n        this.accessibility.showSmallLabels ||\n        verifyTextHasSpace({\n          text: formatDataLabel(d, this.innerLabelAccessor, this.dataLabel.format),\n          dimensions,\n          fontSize: 14\n        });\n      const targetOpacity = hasRoom\n        ? checkInteraction(\n            d,\n            opacity,\n            this.hoverOpacity,\n            this.hoverHighlight,\n            this.clickHighlight,\n            this.innerInteractionKeys\n          ) < 1\n          ? 0\n          : 1\n        : 0;\n      if (\n        ((targetOpacity === 1 && styleVisibility === 'hidden') || prevOpacity !== targetOpacity) &&\n        addCollisionClass\n      ) {\n        if (targetOpacity === 1) {\n          select(n[i])\n            .classed('collision-added', true)\n            .style('visibility', null);\n        } else {\n          select(n[i]).classed('collision-removed', true);\n        }\n      }\n      return targetOpacity;\n    });\n  }\n\n  checkLabelColorAgainstBackground() {\n    this.updateLabels.attr('fill', (d, i, n) => {\n      return this.textTreatmentHandler(d, i, n);\n    });\n  }\n\n  setRoundedCorners() {\n    this.update\n      .transition('corners')\n      .duration(this.duration)\n      .ease(easeCircleIn)\n      .attr('rx', this.roundedCorner)\n      .attr('ry', this.roundedCorner);\n  }\n\n  textTreatmentHandler = (d, i, n) => {\n    const me = select(n[i]);\n    const bgColor =\n      this.clickHighlight &&\n      this.clickHighlight.length > 0 &&\n      checkClicked(d, this.clickHighlight, this.innerInteractionKeys) &&\n      this.clickStyle.color\n        ? visaColors[this.clickStyle.color] || this.clickStyle.color\n        : this.hoverHighlight &&\n          checkHovered(d, this.hoverHighlight, this.innerInteractionKeys) &&\n          this.hoverStyle.color\n        ? visaColors[this.hoverStyle.color] || this.hoverStyle.color\n        : this.preparedColors[i];\n\n    const autoPlacementBackgroundColor =\n      this.dataLabel.placement === 'auto' // can ignore this for collisionHideOnly\n        ? this.layout === 'vertical'\n          ? (this.dataLabel.collisionPlacement === 'top' && me.attr('data-baseline') !== 'bottom') ||\n            (this.dataLabel.collisionPlacement === 'middle' && me.attr('data-baseline') !== 'bottom') ||\n            (this.dataLabel.collisionPlacement === 'bottom' &&\n              me.attr('data-baseline') === 'bottom' &&\n              ((d[this.valueAccessor] >= 0 && this.y(0) - this.y(d[this.valueAccessor]) > 20) ||\n                (d[this.valueAccessor] < 0 && this.y(0) - this.y(d[this.valueAccessor]) < -20))) // if bottom we can check against baseline value of 0, helps to handle charts with negative values\n          : (this.dataLabel.collisionPlacement === 'right' && me.attr('data-align') !== 'left') ||\n            (this.dataLabel.collisionPlacement === 'middle' && me.attr('data-align') !== 'left') ||\n            (this.dataLabel.collisionPlacement === 'left' && me.attr('data-align') !== 'right')\n        : false;\n    const color =\n      autoPlacementBackgroundColor || this.dataLabel.placement === 'bottom' || this.dataLabel.placement === 'left'\n        ? autoTextColor(bgColor)\n        : visaColors.dark_text;\n    me.attr(\n      'filter',\n      !me.classed('textIsMoving')\n        ? createTextStrokeFilter({\n            root: this.svg.node(),\n            id: this.chartID,\n            color:\n              autoPlacementBackgroundColor ||\n              this.dataLabel.placement === 'bottom' ||\n              this.dataLabel.placement === 'left'\n                ? bgColor\n                : '#ffffff'\n          })\n        : null\n    );\n    return color;\n  };\n\n  setSelectedClass() {\n    this.update.classed('highlight', (d, i, n) => {\n      let selected = checkInteraction(d, true, false, '', this.clickHighlight, this.innerInteractionKeys);\n      selected = this.clickHighlight && this.clickHighlight.length ? selected : false;\n      const selectable = this.accessibility.elementsAreInterface;\n      setElementInteractionAccessState(n[i], selected, selectable);\n      return selected;\n    });\n  }\n\n  updateCursor() {\n    this.update.attr('cursor', !this.suppressEvents ? this.cursor : null);\n    this.updateLabels.attr('cursor', !this.suppressEvents ? this.cursor : null);\n  }\n\n  enterDataLabels() {\n    const ordinalAxis = this.layout === 'vertical' ? 'x' : 'y';\n    const opacity = this.dataLabel.visible ? 1 : 0;\n\n    this.enterLabelWrappers\n      .attr('class', 'clustered-bar-label-wrapper')\n      .classed('entering', true)\n      .attr('transform', d =>\n        this.layout === 'vertical' ? 'translate(' + this.x0(d.key) + ',0)' : 'translate(0,' + this.y0(d.key) + ')'\n      );\n\n    this.enterLabels\n      .attr('class', 'clustered-bar-dataLabel')\n      .classed('entering', true)\n      .classed('clustered-bar-dataLabel-horizontal', false)\n      .classed('clustered-bar-dataLabel-vertical', false)\n      .classed('clustered-bar-dataLabel-' + this.layout, true)\n      .attr('cursor', !this.suppressEvents ? this.cursor : null)\n      .attr('opacity', d =>\n        checkInteraction(\n          d,\n          opacity,\n          this.hoverOpacity,\n          this.hoverHighlight,\n          this.clickHighlight,\n          this.innerInteractionKeys\n        ) < 1\n          ? 0\n          : Number.EPSILON\n      )\n      .attr('fill', this.textTreatmentHandler)\n      .on('click', !this.suppressEvents ? (d, i, n) => this.onClickHandler(d, n[i]) : null)\n      .on('mouseover', !this.suppressEvents ? (d, i, n) => this.onHoverHandler(d, n[i]) : null)\n      .on('mouseout', !this.suppressEvents ? () => this.onMouseOutHandler() : null);\n\n    this.enterLabels.attr(ordinalAxis, (d, i, n) => {\n      const zeroScale = ordinalAxis + '0';\n      const oneScale = ordinalAxis + '1';\n      const breadth = ordinalAxis === 'x' ? 'innerPaddedWidth' : 'innerPaddedHeight';\n      const p = select(n[i].parentNode);\n      const groupEntering = p.classed('entering');\n      let xStart = groupEntering ? this[zeroScale](p.datum().key) : this[oneScale](d[this.ordinalAccessor]);\n      const xCenter = groupEntering ? this[zeroScale].bandwidth() / 2 : this[oneScale].bandwidth() / 2;\n      const xPercent = (xStart + xCenter) / (this[breadth] / 2);\n      xStart = groupEntering ? 0 : xStart;\n      const shift = xStart + xCenter * xPercent;\n      return shift;\n    });\n  }\n\n  updateDataLabels() {\n    this.updateLabels.interrupt();\n    const opacity = this.dataLabel.visible ? 1 : 0;\n\n    this.updateLabels\n      .transition('opacity')\n      .duration((_, i, n) => {\n        if (select(n[i]).classed('entering')) {\n          // select(n[i]).classed('entering', false);\n          return this.duration / 4;\n        }\n        return 0;\n      })\n      .delay((_, i, n) => {\n        if (select(n[i]).classed('entering')) {\n          // select(n[i]).classed('entering', false);\n          return (this.duration / 4) * 3;\n        }\n        return 0;\n      })\n      .ease(easeCircleIn)\n      .attr('opacity', d =>\n        checkInteraction(\n          d,\n          opacity,\n          this.hoverOpacity,\n          this.hoverHighlight,\n          this.clickHighlight,\n          this.innerInteractionKeys\n        ) < 1\n          ? 0\n          : 1\n      )\n      .call(transitionEndAll, () => {\n        this.updateLabels.classed('entering', false);\n        // this.checkLabelColorAgainstBackground();\n      });\n  }\n\n  exitDataLabels() {\n    this.exitLabelWrappers\n      .selectAll('text')\n      .transition('exit')\n      .ease(easeCircleIn)\n      .duration(this.duration / 3)\n      .attr('opacity', 0)\n      .call(transitionEndAll, () => {\n        this.exitLabelWrappers.remove();\n      });\n\n    this.exitLabels\n      .transition('exit')\n      .ease(easeCircleIn)\n      .duration(this.duration / 3)\n      .attr('opacity', 0)\n      .remove();\n  }\n\n  setLabelContent() {\n    this.updateLabels.text(d => formatDataLabel(d, this.innerLabelAccessor, this.dataLabel.format));\n  }\n\n  setLabelPosition() {\n    // position the label wrappers with/without transition\n    this.updateLabelWrappers\n      .classed('clustered-bar-dataLabel-horizontal', false)\n      .classed('clustered-bar-dataLabel-vertical', false)\n      .classed('clustered-bar-dataLabel-' + this.layout, true);\n\n    const changeLabelWrappers = prepareRenderChange({\n      selection: this.updateLabelWrappers,\n      duration: this.duration,\n      namespace: 'position-label-wrappers',\n      easing: easeCircleIn\n    });\n\n    changeLabelWrappers\n      .attr('transform', d =>\n        this.layout === 'vertical' ? 'translate(' + this.x0(d.key) + ',0)' : 'translate(0,' + this.y0(d.key) + ')'\n      )\n      .call(transitionEndAll, () => {\n        this.updateLabelWrappers.classed('entering', false);\n      });\n\n    // we have to run this filter as there are times when enter/update will one another's nodes in them.\n    const enteringOnly = this.enterLabels.filter((_, i, n) => {\n      return select(n[i]).classed('entering');\n    });\n    const updatingOnly = this.updateLabels.filter((_, i, n) => {\n      return !select(n[i]).classed('entering');\n    });\n\n    // if we have enter and update we need to process them separately\n    // enter with no transition, update with transition\n    // the transition is the main reason we need to do this.\n    if (enteringOnly.size() > 0) {\n      this.processLabelPosition(enteringOnly, false, true, false);\n      this.processLabelPosition(updatingOnly, true, false, true);\n    } else {\n      // otherwise we can just process update and do it all in one step with transition\n      // doing this all at once saves processing time from calling resolveLabelCollision less\n      this.processLabelPosition(updatingOnly, true, true, false);\n    }\n  }\n\n  processLabelPosition(selection, runTransition?, redrawBitmap?, suppressMarkDraw?) {\n    const ordinalAxis = this.layout === 'vertical' ? 'x' : 'y';\n    const ordinalDimension = this.layout === 'vertical' ? 'width' : 'height';\n    const valueAxis = this.layout === 'vertical' ? 'y' : 'x';\n    const valueDimension = this.layout === 'vertical' ? 'height' : 'width';\n    const choice = this.layout === 'vertical' ? 'max' : 'min';\n    const hideOnly = this.dataLabel.placement !== 'auto' && this.dataLabel.collisionHideOnly;\n    let textHeight = 15; // default label is usually 15\n    const collisionSettings = {\n      vertical: {\n        top: {\n          validPositions: ['top', 'bottom'],\n          offsets: [4, 1]\n        },\n        middle: {\n          validPositions: ['middle', 'top'],\n          offsets: [1, textHeight / 2]\n        },\n        bottom: {\n          validPositions: ['middle', 'top'],\n          offsets: [1, textHeight / 2]\n        }\n      },\n      horizontal: {\n        right: {\n          validPositions: ['right', 'left'],\n          offsets: [4, 8]\n        },\n        middle: {\n          validPositions: ['middle', 'right'],\n          offsets: [1, 15]\n        },\n        left: {\n          validPositions: ['left', 'right'],\n          offsets: [1, 20]\n        }\n      }\n    };\n\n    const collisionPlacement = this.dataLabel && this.dataLabel.collisionPlacement;\n    const boundsScope =\n      collisionPlacement && collisionSettings[this.layout][collisionPlacement] // check whether placement provided maps correctly\n        ? this.dataLabel.collisionPlacement\n        : this.layout === 'vertical'\n        ? 'top' // if we don't have collisionPlacement\n        : 'right';\n\n    // prep the data- attributes for label collision algorithm\n    // only needs to be run if we are running collision though\n    selection\n      .style('visibility', (_, i, n) =>\n        this.dataLabel.placement === 'auto' || this.dataLabel.collisionHideOnly\n          ? select(n[i]).style('visibility')\n          : null\n      )\n      .attr(`data-${ordinalAxis}`, (d, i, n) => {\n        if (i === 0) {\n          // we just need to check this on one element\n          const textElement = n[i];\n          const style = getComputedStyle(textElement);\n          const fontSize = parseFloat(style.fontSize);\n          textHeight = Math.max(fontSize - 1, 1); // clone.getBBox().height;\n        }\n\n        return this[ordinalAxis + '1'](d[this.ordinalAccessor]);\n      })\n      .attr(\n        `data-translate-x`,\n        d => (this.layout === 'vertical' ? this.x0(d[this.groupAccessor]) : 0) + this.padding.left + this.margin.left\n      )\n      .attr(\n        `data-translate-y`,\n        d => (this.layout === 'vertical' ? 0 : this.y0(d[this.groupAccessor])) + this.padding.top + this.margin.top\n      )\n      .attr(`data-${ordinalDimension}`, this[ordinalAxis + '1'].bandwidth())\n      .attr(`data-${valueAxis}`, d => this[valueAxis](Math[choice](0, d[this.valueAccessor])))\n      .attr(\n        `data-${valueDimension}`,\n        d =>\n          Math.abs(\n            this.layout === 'vertical'\n              ? this[valueAxis](0) - this[valueAxis](d[this.valueAccessor])\n              : this[valueAxis](d[this.valueAccessor]) - this[valueAxis](0)\n          ) || 0.000001\n      );\n\n    // we use prepareRenderChange to use or not use .transition()\n    // immediate - label enter and interaction effects\n    // transition - update effects (e.g., data change)\n    const changeLabels = prepareRenderChange({\n      selection: selection,\n      duration: !runTransition ? 0 : this.duration,\n      namespace: 'position-labels',\n      easing: easeCircleIn\n    });\n\n    this.bitmaps = placeDataLabels({\n      root: changeLabels,\n      xScale: this.layout === 'vertical' ? this.x1 : this.x,\n      yScale: this.layout === 'vertical' ? this.y : this.y1,\n      ordinalAccessor: this.ordinalAccessor,\n      valueAccessor: this.valueAccessor,\n      placement: this.dataLabel.placement,\n      layout: this.layout,\n      chartType: 'bar',\n      avoidCollision: {\n        runOccupancyBitmap: this.dataLabel.visible && this.dataLabel.placement === 'auto',\n        bitmaps: !redrawBitmap ? this.bitmaps : undefined,\n        labelSelection: changeLabels,\n        avoidMarks: [this.update],\n        validPositions: hideOnly ? ['middle'] : collisionSettings[this.layout][boundsScope].validPositions,\n        offsets: hideOnly ? [1] : collisionSettings[this.layout][boundsScope].offsets,\n        accessors: [this.groupAccessor, this.ordinalAccessor, 'key'], // key is created for lines by nesting done in line,\n        size: [roundTo(this.width, 0), roundTo(this.height, 0)], // for some reason the bitmap needs width instead of inner padded width here\n        boundsScope: hideOnly ? undefined : boundsScope,\n        hideOnly: this.dataLabel.visible && this.dataLabel.collisionHideOnly,\n        suppressMarkDraw: suppressMarkDraw\n      }\n    });\n  }\n\n  drawReferenceLines() {\n    setReferenceLine({\n      groupName: 'cluster',\n      root: this.referencesG,\n      referenceLines: this.referenceLines,\n      referenceStyle: this.referenceStyle,\n      innerPaddedWidth: this.innerPaddedWidth,\n      innerPaddedHeight: this.innerPaddedHeight,\n      duration: this.duration,\n      layout: this.layout,\n      x: this.x,\n      y: this.y,\n      unitTest: this.unitTest\n    });\n  }\n\n  prepareLegendData() {\n    this.legendData = this.nest[0].values;\n  }\n\n  drawLegendElements() {\n    drawLegend({\n      root: this.legendG,\n      uniqueID: this.chartID,\n      width: this.innerPaddedWidth,\n      height: this.margin.top + 20,\n      colorArr: this.colorArr,\n      baseColorArr: this.preparedColors,\n      hideStrokes: this.accessibility.hideStrokes,\n      margin: this.margin,\n      padding: this.padding,\n      duration: this.duration,\n      type: 'bar',\n      fontSize: 16,\n      data: this.legendData,\n      labelKey: this.ordinalAccessor,\n      label: this.legend.labels,\n      hide: !this.legend.visible,\n      interactionKeys: this.innerInteractionKeys,\n      groupAccessor: this.ordinalAccessor,\n      hoverHighlight: this.hoverHighlight,\n      clickHighlight: this.clickHighlight,\n      hoverStyle: this.hoverStyle,\n      clickStyle: this.clickStyle,\n      hoverOpacity: this.hoverOpacity\n    });\n  }\n\n  bindLegendInteractivity() {\n    select(this.clusteredBarChartEl)\n      .selectAll('.legend')\n      .style('cursor', this.legend.interactive && !this.suppressEvents ? this.cursor : '')\n      .on('click', this.legend.interactive && !this.suppressEvents ? (d, i, n) => this.onClickHandler(d, n[i]) : null)\n      .on(\n        'mouseover',\n        this.legend.interactive && !this.suppressEvents\n          ? (d, i, n) => {\n              this.hoverEvent.emit({ data: d, target: n[i] });\n            }\n          : null\n      )\n      .on('mouseout', this.legend.interactive && !this.suppressEvents ? () => this.onMouseOutHandler() : null);\n  }\n\n  setLegendCursor() {\n    select(this.clusteredBarChartEl)\n      .selectAll('.legend')\n      .style('cursor', this.legend.interactive && !this.suppressEvents ? this.cursor : null);\n  }\n\n  bindInteractivity() {\n    this.update\n      .on('click', !this.suppressEvents ? (d, i, n) => this.onClickHandler(d, n[i]) : null)\n      .on('mouseover', !this.suppressEvents ? (d, i, n) => this.onHoverHandler(d, n[i]) : null)\n      .on('mouseout', !this.suppressEvents ? () => this.onMouseOutHandler() : null);\n\n    this.updateLabels\n      .on('click', !this.suppressEvents ? (d, i, n) => this.onClickHandler(d, n[i]) : null)\n      .on('mouseover', !this.suppressEvents ? (d, i, n) => this.onHoverHandler(d, n[i]) : null)\n      .on('mouseout', !this.suppressEvents ? () => this.onMouseOutHandler() : null);\n  }\n\n  drawAnnotations() {\n    annotate({\n      source: this.rootG.node(),\n      data: this.annotations,\n      xScale: this.layout !== 'horizontal' ? this.x0 : this.x,\n      xAccessor: this.layout !== 'horizontal' ? this.groupAccessor : this.valueAccessor,\n      yScale: this.layout !== 'horizontal' ? this.y : this.y0,\n      yAccessor: this.layout !== 'horizontal' ? this.valueAccessor : this.groupAccessor,\n      width: this.width,\n      height: this.height,\n      padding: this.padding,\n      margin: this.margin,\n      bitmaps: this.bitmaps\n    });\n  }\n\n  setAnnotationAccessibility() {\n    setAccessAnnotation(this.getLanguageString(), this.clusteredBarChartEl, this.annotations, this.referenceLines);\n  }\n\n  // new accessibility functions added here\n  setTagLevels() {\n    this.topLevel = findTagLevel(this.highestHeadingLevel);\n    this.bottomLevel = findTagLevel(this.highestHeadingLevel, 3);\n  }\n\n  setChartDescriptionWrapper() {\n    initializeDescriptionRoot({\n      language: this.getLanguageString(),\n      rootEle: this.clusteredBarChartEl,\n      title: this.accessibility.title || this.mainTitle,\n      chartTag: 'clustered-bar-chart',\n      uniqueID: this.chartID,\n      highestHeadingLevel: this.highestHeadingLevel,\n      redraw: this.shouldRedrawWrapper,\n      disableKeyNav:\n        this.suppressEvents &&\n        this.accessibility.elementsAreInterface === false &&\n        this.accessibility.keyboardNavConfig &&\n        this.accessibility.keyboardNavConfig.disabled,\n      hideDataTable: this.accessibility.hideDataTableButton\n    });\n    this.shouldRedrawWrapper = false;\n  }\n\n  setParentSVGAccessibility() {\n    setAccessibilityController({\n      chartTag: 'clustered-bar-chart',\n      language: this.getLanguageString(),\n      node: this.svg.node(),\n      title: this.accessibility.title || this.mainTitle,\n      description: this.subTitle,\n      uniqueID: this.chartID,\n      geomType: 'bar',\n      includeKeyNames: this.accessibility.includeDataKeyNames,\n      dataKeys: scopeDataKeys(this, chartAccessors, 'clustered-bar-chart'),\n      dataKeyNames: this.dataKeyNames,\n      groupAccessor: this.groupAccessor,\n      groupName: 'cluster',\n      disableKeyNav:\n        this.suppressEvents &&\n        this.accessibility.elementsAreInterface === false &&\n        this.accessibility.keyboardNavConfig &&\n        this.accessibility.keyboardNavConfig.disabled\n      // groupKeys: [],\n      // nested: '',\n      // recursive: true\n    });\n  }\n\n  setGeometryAccessibilityAttributes() {\n    this.update.each((_d, i, n) => {\n      initializeElementAccess(n[i]);\n    });\n  }\n\n  setGeometryAriaLabels() {\n    const keys = scopeDataKeys(this, chartAccessors, 'clustered-bar-chart');\n    this.update.each((_d, i, n) => {\n      setElementFocusHandler({\n        chartTag: 'clustered-bar-chart',\n        language: this.getLanguageString(),\n        node: n[i],\n        geomType: 'bar',\n        includeKeyNames: this.accessibility.includeDataKeyNames,\n        dataKeys: keys,\n        dataKeyNames: this.dataKeyNames,\n        groupName: 'cluster',\n        uniqueID: this.chartID,\n        disableKeyNav:\n          this.suppressEvents &&\n          this.accessibility.elementsAreInterface === false &&\n          this.accessibility.keyboardNavConfig &&\n          this.accessibility.keyboardNavConfig.disabled\n      });\n      setElementAccessID({\n        node: n[i],\n        uniqueID: this.chartID\n      });\n    });\n  }\n\n  setGroupAccessibilityID() {\n    this.updateBarWrappers.each((_, i, n) => {\n      setElementAccessID({\n        node: n[i],\n        uniqueID: this.chartID\n      });\n    });\n  }\n\n  setChartAccessibilityTitle() {\n    setAccessTitle(this.getLanguageString(), this.clusteredBarChartEl, this.accessibility.title || this.mainTitle);\n  }\n\n  setChartAccessibilitySubtitle() {\n    setAccessSubtitle(this.getLanguageString(), this.clusteredBarChartEl, this.subTitle);\n  }\n\n  setChartAccessibilityLongDescription() {\n    setAccessLongDescription(this.getLanguageString(), this.clusteredBarChartEl, this.accessibility.longDescription);\n  }\n\n  setChartAccessibilityExecutiveSummary() {\n    setAccessExecutiveSummary(this.getLanguageString(), this.clusteredBarChartEl, this.accessibility.executiveSummary);\n  }\n\n  setChartAccessibilityPurpose() {\n    setAccessPurpose(this.getLanguageString(), this.clusteredBarChartEl, this.accessibility.purpose);\n  }\n\n  setChartAccessibilityContext() {\n    setAccessContext(this.getLanguageString(), this.clusteredBarChartEl, this.accessibility.contextExplanation);\n  }\n\n  setChartAccessibilityStatisticalNotes() {\n    setAccessStatistics(this.getLanguageString(), this.clusteredBarChartEl, this.accessibility.statisticalNotes);\n  }\n\n  setChartCountAccessibility() {\n    setAccessChartCounts({\n      rootEle: this.clusteredBarChartEl,\n      parentGNode: this.barG.node(), // pass the wrapper to <g> or geometries here, should be single node selection\n      chartTag: 'clustered-bar-chart',\n      geomType: 'bar',\n      groupName: 'cluster'\n      // recursive: true\n    });\n  }\n\n  setChartAccessibilityStructureNotes() {\n    setAccessStructure(this.getLanguageString(), this.clusteredBarChartEl, this.accessibility.structureNotes);\n  }\n  // new accessibility stuff ends here\n\n  onChangeHandler() {\n    if (this.accessibility && typeof this.accessibility.onChangeFunc === 'function') {\n      const d = {\n        updated: this.updated,\n        added: this.enterSize,\n        removed: this.exitSize\n      };\n      this.accessibility.onChangeFunc(d);\n    }\n    this.updated = false;\n    this.enterSize = 0;\n    this.exitSize = 0;\n  }\n\n  onClickHandler(d, n) {\n    this.clickEvent.emit({ data: d, target: n });\n  }\n\n  onHoverHandler(d, n) {\n    overrideTitleTooltip(this.chartID, true);\n    this.hoverEvent.emit({ data: d, target: n });\n    if (this.showTooltip && d[this.ordinalAccessor]) {\n      this.eventsTooltip({ data: d, evt: event, isToShow: true });\n    }\n  }\n\n  onMouseOutHandler() {\n    overrideTitleTooltip(this.chartID, false);\n    this.mouseOutEvent.emit();\n    if (this.showTooltip) {\n      this.eventsTooltip({ isToShow: false });\n    }\n  }\n\n  // set initial style (instead of copying css class across the lib)\n  setTooltipInitialStyle() {\n    initTooltipStyle(this.tooltipG);\n  }\n\n  // tooltip\n  eventsTooltip({ data, evt, isToShow }: { data?: any; evt?: any; isToShow: boolean }) {\n    drawTooltip({\n      root: this.tooltipG,\n      data,\n      event: evt,\n      isToShow,\n      tooltipLabel: this.tooltipLabel,\n      xAxis: this.xAxis,\n      yAxis: this.yAxis,\n      dataLabel: this.dataLabel,\n      dataKeyNames: this.dataKeyNames,\n      layout: this.layout,\n      ordinalAccessor: this.groupAccessor, // on purpose - to match tooltip util format\n      groupAccessor: this.ordinalAccessor, // on purpose - to match tooltip util format\n      valueAccessor: this.valueAccessor,\n      chartType: 'clustered'\n    });\n  }\n\n  render() {\n    this.drawStartEvent.emit({ chartID: this.chartID });\n    // hardcoded theme to light until we add this functionality\n    const theme = 'light';\n\n    // everything between this comment and the third should eventually\n    // be moved into componentWillUpdate (if the Stencil bug is fixed)\n    this.init();\n    if (this.shouldSetLocalizationConfig) {\n      this.setLocalizationConfig();\n      this.shouldSetLocalizationConfig = false;\n    }\n    if (this.shouldSetTagLevels) {\n      this.setTagLevels();\n      this.shouldSetTagLevels = false;\n    }\n    if (this.shouldCheckValueAxis) {\n      if (this.layout === 'horizontal') {\n        this.shouldUpdateXAxis = true;\n        this.shouldUpdateXGrid = true;\n      } else if (this.layout === 'vertical') {\n        this.shouldUpdateYAxis = true;\n        this.shouldUpdateYGrid = true;\n      }\n      this.shouldCheckValueAxis = false;\n    }\n    if (this.shouldCheckLabelAxis) {\n      if (this.layout === 'vertical') {\n        this.shouldUpdateXAxis = true;\n        this.shouldUpdateXGrid = true;\n        this.shouldSetXAxisAccessibility = true;\n      } else if (this.layout === 'horizontal') {\n        this.shouldUpdateYAxis = true;\n        this.shouldUpdateYGrid = true;\n        this.shouldSetYAxisAccessibility = true;\n      }\n      this.shouldCheckLabelAxis = false;\n    }\n    if (this.shouldUpdateData) {\n      this.prepareData();\n      this.shouldUpdateData = false;\n    }\n    if (this.shouldUpdateLegendData) {\n      this.prepareLegendData();\n      this.shouldUpdateLegendData = false;\n    }\n    if (this.shouldSetDimensions) {\n      this.setDimensions();\n      this.shouldSetDimensions = false;\n    }\n    if (this.shouldUpdateScales) {\n      this.prepareScales();\n      this.shouldUpdateScales = false;\n    }\n    if (this.shouldValidateInteractionKeys) {\n      this.validateInteractionKeys();\n      this.shouldValidateInteractionKeys = false;\n    }\n    if (this.shouldValidateDataLabelAccessor) {\n      this.validateDataLabelAccessor();\n      this.shouldValidateDataLabelAccessor = false;\n    }\n    if (this.shouldValidateAxes) {\n      this.validateAxes();\n      this.shouldValidateAxes = false;\n    }\n    if (this.shouldUpdateTableData) {\n      this.setTableData();\n      this.shouldUpdateTableData = false;\n    }\n    if (this.shouldValidate) {\n      this.shouldValidateAccessibilityProps();\n      this.shouldValidateLocalizationProps();\n      this.shouldValidate = false;\n    }\n    if (this.shouldSetColors) {\n      this.setColors();\n      this.shouldSetColors = false;\n    }\n    if (this.shouldValidateLabelPlacement) {\n      this.validateLabelPlacement();\n      this.shouldValidateLabelPlacement = false;\n    }\n    // Everything between this comment and the first should eventually\n    // be moved into componentWillUpdate (if the Stencil bug is fixed)\n\n    return (\n      <div class={`o-layout is--${this.layout} ${theme}`}>\n        <div class=\"o-layout--chart\">\n          <this.topLevel class=\"clustered-bar-main-title vcl-main-title\">{this.mainTitle}</this.topLevel>\n          <this.bottomLevel class=\"visa-ui-text--instructions clustered-bar-sub-title vcl-sub-title\" />\n          <div class=\"clustered-bar-legend vcl-legend\" style={{ display: this.legend.visible ? 'block' : 'none' }} />\n          <keyboard-instructions\n            uniqueID={this.chartID}\n            geomType={'bar'}\n            groupName={'cluster'} // taken from initializeDescriptionRoot, on bar this should be \"bar group\", stacked bar is \"stack\", and clustered is \"cluster\"\n            language={this.getLanguageString()}\n            chartTag={'clustered-bar-chart'}\n            width={this.width - (this.margin ? this.margin.right || 0 : 0)}\n            isInteractive={this.accessibility.elementsAreInterface}\n            hasCousinNavigation // on bar this requires checking for groupAccessor\n            disabled={\n              this.suppressEvents &&\n              this.accessibility.elementsAreInterface === false &&\n              this.accessibility.keyboardNavConfig &&\n              this.accessibility.keyboardNavConfig.disabled\n            } // the chart is \"simple\"\n          />\n          <div class=\"visa-viz-d3-clustered-bar-container\" />\n          <div class=\"clustered-bar-tooltip vcl-tooltip\" style={{ display: this.showTooltip ? 'block' : 'none' }} />\n          <data-table\n            uniqueID={this.chartID}\n            isCompact\n            language={this.getLanguageString()}\n            tableColumns={this.tableColumns}\n            dataKeyNames={this.dataKeyNames}\n            data={this.tableData}\n            padding={this.padding}\n            margin={this.margin}\n            hideDataTable={this.accessibility.hideDataTableButton}\n            unitTest={this.unitTest}\n          />\n        </div>\n        {/* <canvas id=\"bitmap-render\" /> */}\n      </div>\n    );\n  }\n  private init() {\n    // reading properties\n    const keys = Object.keys(ClusteredBarChartDefaultValues);\n    let i = 0;\n    // accept 0 or false as default value\n    const exceptions = {\n      mainTitle: {\n        exception: ''\n      },\n      subTitle: {\n        exception: ''\n      },\n      barIntervalRatio: {\n        exception: 0\n      },\n      groupIntervalRatio: {\n        exception: 0\n      },\n      showTooltip: {\n        exception: false\n      },\n      wrapLabel: {\n        exception: false\n      },\n      hoverOpacity: {\n        exception: 0\n      }\n    };\n    for (i = 0; i < keys.length; i++) {\n      const exception = !exceptions[keys[i]] ? false : this[keys[i]] === exceptions[keys[i]].exception;\n      this[keys[i]] = this[keys[i]] || exception ? this[keys[i]] : ClusteredBarChartDefaultValues[keys[i]];\n    }\n  }\n}\n\n// incorporate OSS licenses into build\nwindow['VisaChartsLibOSSLicenses'] = getLicenses(); // tslint:disable-line no-string-literal\n"],"mappings":"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","ignoreList":[]}