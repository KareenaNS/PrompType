var __spreadArray=this&&this.__spreadArray||function(t,i,e){if(e||arguments.length===2)for(var s=0,a=i.length,r;s<a;s++){if(r||!(s in i)){if(!r)r=Array.prototype.slice.call(i,0,s);r[s]=i[s]}}return t.concat(r||Array.prototype.slice.call(i))};import{r as registerInstance,c as createEvent,h,g as getElement}from"./index-3f493c93.js";import{U as Utils,s as select,e as event}from"./visa-charts-utils.umd-9045e880.js";import{v as v4}from"./index-a66b69d4.js";import{m as max}from"./max-2c042256.js";var propDefaultValues=Utils.propDefaultValues;var CirclePackingDefaultValues=function(){function t(){}return t}();CirclePackingDefaultValues.mainTitle="Circle Packing Title";CirclePackingDefaultValues.subTitle=propDefaultValues.subTitle.text;CirclePackingDefaultValues.height=400;CirclePackingDefaultValues.width=400;CirclePackingDefaultValues.circlePadding=5;CirclePackingDefaultValues.margin={top:400*.01,bottom:400*.01,right:400*.01,left:400*.01};CirclePackingDefaultValues.padding={top:400*.01,bottom:400*.01,right:400*.01,left:400*.01};CirclePackingDefaultValues.localization=propDefaultValues.localization;CirclePackingDefaultValues.dataDepth=5;CirclePackingDefaultValues.displayDepth=2;CirclePackingDefaultValues.parentAccessor="parentNode";CirclePackingDefaultValues.nodeAccessor="childNode";CirclePackingDefaultValues.sizeAccessor="value";CirclePackingDefaultValues.colorPalette=propDefaultValues.colorPaletteSequentialGrey;CirclePackingDefaultValues.dataLabel=propDefaultValues.dataLabelCenter;CirclePackingDefaultValues.hoverStyle=propDefaultValues.hoverStyle;CirclePackingDefaultValues.clickStyle=propDefaultValues.clickStyle;CirclePackingDefaultValues.hoverOpacity=propDefaultValues.hoverOpacity;CirclePackingDefaultValues.cursor=propDefaultValues.cursor;CirclePackingDefaultValues.interactionKeys=propDefaultValues.interactionKeys;CirclePackingDefaultValues.highestHeadingLevel=propDefaultValues.highestHeadingLevel;CirclePackingDefaultValues.annotations=propDefaultValues.annotations;CirclePackingDefaultValues.accessibility=propDefaultValues.accessibility;CirclePackingDefaultValues.animationConfig=propDefaultValues.animationConfig;CirclePackingDefaultValues.tooltipLabel=propDefaultValues.tooltipLabel;CirclePackingDefaultValues.showTooltip=propDefaultValues.showTooltip;CirclePackingDefaultValues.clickHighlight=propDefaultValues.clickHighlight;CirclePackingDefaultValues.suppressEvents=propDefaultValues.suppressEvents;function count(t){var i=0,e=t.children,s=e&&e.length;if(!s)i=1;else while(--s>=0)i+=e[s].value;t.value=i}function node_count(){return this.eachAfter(count)}function node_each(t){var i=this,e,s=[i],a,r,n;do{e=s.reverse(),s=[];while(i=e.pop()){t(i),a=i.children;if(a)for(r=0,n=a.length;r<n;++r){s.push(a[r])}}}while(s.length);return this}function node_eachBefore(t){var i=this,e=[i],s,a;while(i=e.pop()){t(i),s=i.children;if(s)for(a=s.length-1;a>=0;--a){e.push(s[a])}}return this}function node_eachAfter(t){var i=this,e=[i],s=[],a,r,n;while(i=e.pop()){s.push(i),a=i.children;if(a)for(r=0,n=a.length;r<n;++r){e.push(a[r])}}while(i=s.pop()){t(i)}return this}function node_sum(t){return this.eachAfter((function(i){var e=+t(i.data)||0,s=i.children,a=s&&s.length;while(--a>=0)e+=s[a].value;i.value=e}))}function node_sort(t){return this.eachBefore((function(i){if(i.children){i.children.sort(t)}}))}function node_path(t){var i=this,e=leastCommonAncestor(i,t),s=[i];while(i!==e){i=i.parent;s.push(i)}var a=s.length;while(t!==e){s.splice(a,0,t);t=t.parent}return s}function leastCommonAncestor(t,i){if(t===i)return t;var e=t.ancestors(),s=i.ancestors(),a=null;t=e.pop();i=s.pop();while(t===i){a=t;t=e.pop();i=s.pop()}return a}function node_ancestors(){var t=this,i=[t];while(t=t.parent){i.push(t)}return i}function node_descendants(){var t=[];this.each((function(i){t.push(i)}));return t}function node_leaves(){var t=[];this.eachBefore((function(i){if(!i.children){t.push(i)}}));return t}function node_links(){var t=this,i=[];t.each((function(e){if(e!==t){i.push({source:e.parent,target:e})}}));return i}function hierarchy(t,i){var e=new Node$1(t),s=+t.value&&(e.value=t.value),a,r=[e],n,c,o,h;if(i==null)i=defaultChildren;while(a=r.pop()){if(s)a.value=+a.data.value;if((c=i(a.data))&&(h=c.length)){a.children=new Array(h);for(o=h-1;o>=0;--o){r.push(n=a.children[o]=new Node$1(c[o]));n.parent=a;n.depth=a.depth+1}}}return e.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function defaultChildren(t){return t.children}function copyData(t){t.data=t.data.data}function computeHeight(t){var i=0;do{t.height=i}while((t=t.parent)&&t.height<++i)}function Node$1(t){this.data=t;this.depth=this.height=0;this.parent=null}Node$1.prototype=hierarchy.prototype={constructor:Node$1,count:node_count,each:node_each,eachAfter:node_eachAfter,eachBefore:node_eachBefore,sum:node_sum,sort:node_sort,path:node_path,ancestors:node_ancestors,descendants:node_descendants,leaves:node_leaves,links:node_links,copy:node_copy};var slice=Array.prototype.slice;function shuffle(t){var i=t.length,e,s;while(i){s=Math.random()*i--|0;e=t[i];t[i]=t[s];t[s]=e}return t}function enclose(t){var i=0,e=(t=shuffle(slice.call(t))).length,s=[],a,r;while(i<e){a=t[i];if(r&&enclosesWeak(r,a))++i;else r=encloseBasis(s=extendBasis(s,a)),i=0}return r}function extendBasis(t,i){var e,s;if(enclosesWeakAll(i,t))return[i];for(e=0;e<t.length;++e){if(enclosesNot(i,t[e])&&enclosesWeakAll(encloseBasis2(t[e],i),t)){return[t[e],i]}}for(e=0;e<t.length-1;++e){for(s=e+1;s<t.length;++s){if(enclosesNot(encloseBasis2(t[e],t[s]),i)&&enclosesNot(encloseBasis2(t[e],i),t[s])&&enclosesNot(encloseBasis2(t[s],i),t[e])&&enclosesWeakAll(encloseBasis3(t[e],t[s],i),t)){return[t[e],t[s],i]}}}throw new Error}function enclosesNot(t,i){var e=t.r-i.r,s=i.x-t.x,a=i.y-t.y;return e<0||e*e<s*s+a*a}function enclosesWeak(t,i){var e=t.r-i.r+1e-6,s=i.x-t.x,a=i.y-t.y;return e>0&&e*e>s*s+a*a}function enclosesWeakAll(t,i){for(var e=0;e<i.length;++e){if(!enclosesWeak(t,i[e])){return false}}return true}function encloseBasis(t){switch(t.length){case 1:return encloseBasis1(t[0]);case 2:return encloseBasis2(t[0],t[1]);case 3:return encloseBasis3(t[0],t[1],t[2])}}function encloseBasis1(t){return{x:t.x,y:t.y,r:t.r}}function encloseBasis2(t,i){var e=t.x,s=t.y,a=t.r,r=i.x,n=i.y,c=i.r,o=r-e,h=n-s,l=c-a,u=Math.sqrt(o*o+h*h);return{x:(e+r+o/u*l)/2,y:(s+n+h/u*l)/2,r:(u+a+c)/2}}function encloseBasis3(t,i,e){var s=t.x,a=t.y,r=t.r,n=i.x,c=i.y,o=i.r,h=e.x,l=e.y,u=e.r,f=s-n,d=s-h,v=a-c,g=a-l,p=o-r,k=u-r,m=s*s+a*a-r*r,y=m-n*n-c*c+o*o,D=m-h*h-l*l+u*u,C=d*v-f*g,b=(v*D-g*y)/(C*2)-s,P=(g*p-v*k)/C,V=(d*y-f*D)/(C*2)-a,w=(f*k-d*p)/C,T=P*P+w*w-1,A=2*(r+b*P+V*w),x=b*b+V*V-r*r,E=-(T?(A+Math.sqrt(A*A-4*T*x))/(2*T):x/A);return{x:s+b+P*E,y:a+V+w*E,r:E}}function place(t,i,e){var s=t.x-i.x,a,r,n=t.y-i.y,c,o,h=s*s+n*n;if(h){r=i.r+e.r,r*=r;o=t.r+e.r,o*=o;if(r>o){a=(h+o-r)/(2*h);c=Math.sqrt(Math.max(0,o/h-a*a));e.x=t.x-a*s-c*n;e.y=t.y-a*n+c*s}else{a=(h+r-o)/(2*h);c=Math.sqrt(Math.max(0,r/h-a*a));e.x=i.x+a*s-c*n;e.y=i.y+a*n+c*s}}else{e.x=i.x+e.r;e.y=i.y}}function intersects(t,i){var e=t.r+i.r-1e-6,s=i.x-t.x,a=i.y-t.y;return e>0&&e*e>s*s+a*a}function score(t){var i=t._,e=t.next._,s=i.r+e.r,a=(i.x*e.r+e.x*i.r)/s,r=(i.y*e.r+e.y*i.r)/s;return a*a+r*r}function Node(t){this._=t;this.next=null;this.previous=null}function packEnclose(t){if(!(a=t.length))return 0;var i,e,s,a,r,n,c,o,h,l,u;i=t[0],i.x=0,i.y=0;if(!(a>1))return i.r;e=t[1],i.x=-e.r,e.x=i.r,e.y=0;if(!(a>2))return i.r+e.r;place(e,i,s=t[2]);i=new Node(i),e=new Node(e),s=new Node(s);i.next=s.previous=e;e.next=i.previous=s;s.next=e.previous=i;t:for(c=3;c<a;++c){place(i._,e._,s=t[c]),s=new Node(s);o=e.next,h=i.previous,l=e._.r,u=i._.r;do{if(l<=u){if(intersects(o._,s._)){e=o,i.next=e,e.previous=i,--c;continue t}l+=o._.r,o=o.next}else{if(intersects(h._,s._)){i=h,i.next=e,e.previous=i,--c;continue t}u+=h._.r,h=h.previous}}while(o!==h.next);s.previous=i,s.next=e,i.next=e.previous=e=s;r=score(i);while((s=s.next)!==e){if((n=score(s))<r){i=s,r=n}}e=i.next}i=[e._],s=e;while((s=s.next)!==e)i.push(s._);s=enclose(i);for(c=0;c<a;++c)i=t[c],i.x-=s.x,i.y-=s.y;return s.r}function optional(t){return t==null?null:required(t)}function required(t){if(typeof t!=="function")throw new Error;return t}function constantZero(){return 0}function constant(t){return function(){return t}}function defaultRadius(t){return Math.sqrt(t.value)}function index(){var t=null,i=1,e=1,s=constantZero;function a(a){a.x=i/2,a.y=e/2;if(t){a.eachBefore(radiusLeaf(t)).eachAfter(packChildren(s,.5)).eachBefore(translateChild(1))}else{a.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(s,a.r/Math.min(i,e))).eachBefore(translateChild(Math.min(i,e)/(2*a.r)))}return a}a.radius=function(i){return arguments.length?(t=optional(i),a):t};a.size=function(t){return arguments.length?(i=+t[0],e=+t[1],a):[i,e]};a.padding=function(t){return arguments.length?(s=typeof t==="function"?t:constant(+t),a):s};return a}function radiusLeaf(t){return function(i){if(!i.children){i.r=Math.max(0,+t(i)||0)}}}function packChildren(t,i){return function(e){if(s=e.children){var s,a,r=s.length,n=t(e)*i||0,c;if(n)for(a=0;a<r;++a)s[a].r+=n;c=packEnclose(s);if(n)for(a=0;a<r;++a)s[a].r-=n;e.r=c+n}}}function translateChild(t){return function(i){var e=i.parent;i.r*=t;if(e){i.x=e.x+t*i.x;i.y=e.y+t*i.y}}}var keyPrefix="$",preroot={depth:-1},ambiguous={};function defaultId(t){return t.id}function defaultParentId(t){return t.parentId}function stratify(){var t=defaultId,i=defaultParentId;function e(e){var s,a,r=e.length,n,c,o,h=new Array(r),l,u,f={};for(a=0;a<r;++a){s=e[a],o=h[a]=new Node$1(s);if((l=t(s,a,e))!=null&&(l+="")){u=keyPrefix+(o.id=l);f[u]=u in f?ambiguous:o}}for(a=0;a<r;++a){o=h[a],l=i(e[a],a,e);if(l==null||!(l+="")){if(n)throw new Error("multiple roots");n=o}else{c=f[keyPrefix+l];if(!c)throw new Error("missing: "+l);if(c===ambiguous)throw new Error("ambiguous: "+l);if(c.children)c.children.push(o);else c.children=[o];o.parent=c}}if(!n)throw new Error("no root");n.parent=preroot;n.eachBefore((function(t){t.depth=t.parent.depth+1;--r})).eachBefore(computeHeight);n.parent=null;if(r>0)throw new Error("cycle");return n}e.id=function(i){return arguments.length?(t=required(i),e):t};e.parentId=function(t){return arguments.length?(i=required(t),e):i};return e}var circlePackingCss='.o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}circle-packing .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}circle-packing .annotations{pointer-events:none}circle-packing .annotations .handle{pointer-events:all}circle-packing .label{font:12px "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;text-anchor:middle}circle-packing .label,circle-packing .node--root{pointer-events:none}';var CirclePackingStyle0=circlePackingCss;var configLocalization=Utils.configLocalization,getGlobalInstances=Utils.getGlobalInstances,getActiveLanguageString=Utils.getActiveLanguageString,getContrastingStroke=Utils.getContrastingStroke,createTextStrokeFilter=Utils.createTextStrokeFilter,convertColorsToTextures=Utils.convertColorsToTextures,initializeElementAccess=Utils.initializeElementAccess,initializeDescriptionRoot=Utils.initializeDescriptionRoot,setElementFocusHandler=Utils.setElementFocusHandler,setElementAccessID=Utils.setElementAccessID,setAccessibilityController=Utils.setAccessibilityController,hideNonessentialGroups=Utils.hideNonessentialGroups,setAccessTitle=Utils.setAccessTitle,setAccessSubtitle=Utils.setAccessSubtitle,setAccessLongDescription=Utils.setAccessLongDescription,setAccessExecutiveSummary=Utils.setAccessExecutiveSummary,setAccessPurpose=Utils.setAccessPurpose,setAccessContext=Utils.setAccessContext,setAccessStatistics=Utils.setAccessStatistics,setAccessChartCounts=Utils.setAccessChartCounts,setAccessStructure=Utils.setAccessStructure,setAccessAnnotation=Utils.setAccessAnnotation,retainAccessFocus=Utils.retainAccessFocus,checkAccessFocus=Utils.checkAccessFocus,setElementInteractionAccessState=Utils.setElementInteractionAccessState,drawTooltip=Utils.drawTooltip,setAccessibilityDescriptionWidth=Utils.setAccessibilityDescriptionWidth,annotate=Utils.annotate,getPadding=Utils.getPadding,chartAccessors=Utils.chartAccessors,checkInteraction=Utils.checkInteraction,checkClicked=Utils.checkClicked,checkHovered=Utils.checkHovered,convertVisaColor=Utils.convertVisaColor,getColors=Utils.getColors,getLicenses=Utils.getLicenses,getScopedData=Utils.getScopedData,initTooltipStyle=Utils.initTooltipStyle,transitionEndAll=Utils.transitionEndAll,overrideTitleTooltip=Utils.overrideTitleTooltip,roundTo=Utils.roundTo,scopeDataKeys=Utils.scopeDataKeys,visaColors=Utils.visaColors,validateAccessibilityProps=Utils.validateAccessibilityProps,validateLocalizationProps=Utils.validateLocalizationProps,findTagLevel=Utils.findTagLevel,prepareRenderChange=Utils.prepareRenderChange,resolveLabelCollision=Utils.resolveLabelCollision,setSubTitle=Utils.setSubTitle;var CirclePacking=function(){function t(t){var i=this;registerInstance(this,t);this.clickEvent=createEvent(this,"clickEvent",7);this.hoverEvent=createEvent(this,"hoverEvent",7);this.mouseOutEvent=createEvent(this,"mouseOutEvent",7);this.initialLoadEvent=createEvent(this,"initialLoadEvent",7);this.initialLoadEndEvent=createEvent(this,"initialLoadEndEvent",7);this.drawStartEvent=createEvent(this,"drawStartEvent",7);this.drawEndEvent=createEvent(this,"drawEndEvent",7);this.transitionEndEvent=createEvent(this,"transitionEndEvent",7);this.shouldValidateAccessibility=true;this.shouldValidateLocalization=true;this.currentDepth=0;this.zooming=false;this.timer=0;this.delay=200;this.prevent=false;this.updated=false;this.exitSize=0;this.enterSize=0;this.shouldZoom=false;this.shouldValidateInteractionKeys=false;this.shouldDrawInteractionState=false;this.shouldUpdateAnnotations=false;this.shouldResetRoot=false;this.shouldSetColors=false;this.shouldSetSubTitle=false;this.shouldUpdateDisplayDepth=false;this.shouldUpdateLabels=false;this.shouldAddStrokeUnder=false;this.shouldUpdateCursor=false;this.shouldUpdateData=false;this.shouldUpdateTableData=false;this.shouldValidate=false;this.shouldBindInteractivity=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityAttributes=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetAnnotationAccessibility=false;this.shouldUpdateLayout=false;this.shouldSetTextures=false;this.shouldSetStrokes=false;this.shouldSetTextStrokes=false;this.shouldSetTagLevels=false;this.shouldRedrawWrapper=false;this.shouldSetIDs=false;this.shouldSetLocalizationConfig=false;this.innerInteractionKeys=[];this.defaultsLoaded={};this.bottomLevel="p";this.topLevel="h2";this.strokes={};this.setCircleFilter=function(t,e,s){return!select(s[e]).classed("moving")&&!i.accessibility.hideStrokes?i.filter:null};this.setIDs=function(){i.rootG.selectAll("circle:not(.vcl-accessibility-focus-highlight)").attr("id",(function(t){return"circle-in-pack-"+i.generateValidId(t.data.id)}))};this.generateValidId=function(t){var e=t instanceof Date?t.getTime():t;return(e+"-"+i.chartID).replace(/\W/g,"-")};this.setCircleStyle=function(t,e,s){var a=select(s[e].parentNode).datum();var r=a.data.data;var n=i.colorArr[a.depth]||"#fff";var c=checkClicked(r,i.clickHighlight,i.innerInteractionKeys);var o=checkHovered(r,i.hoverHighlight,i.innerInteractionKeys);var h=a.depth!==0?c&&i.clickStyle.color?visaColors[i.clickStyle.color]||i.clickStyle.color||n:o&&i.hoverStyle.color?visaColors[i.hoverStyle.color]||i.hoverStyle.color||n:n:n;select(s[e]).attr("stroke",c?getContrastingStroke(visaColors[i.clickStyle.color]||i.clickStyle.color||i.preparedColors[a.depth]):o?getContrastingStroke(visaColors[i.hoverStyle.color]||i.hoverStyle.color||i.preparedColors[a.depth]):i.strokes[a.depth]).attr("stroke-width",c?i.clickStyle.strokeWidth||3:o?i.hoverStyle.strokeWidth||2:!i.accessibility.hideStrokes?1:0).attr("stroke-dasharray",o&&!c?"4 3":"");return h};this.localization=CirclePackingDefaultValues.localization;this.mainTitle=CirclePackingDefaultValues.mainTitle;this.subTitle=CirclePackingDefaultValues.subTitle;this.height=CirclePackingDefaultValues.height;this.width=CirclePackingDefaultValues.width;this.margin=CirclePackingDefaultValues.margin;this.padding=CirclePackingDefaultValues.padding;this.circlePadding=CirclePackingDefaultValues.circlePadding;this.highestHeadingLevel=CirclePackingDefaultValues.highestHeadingLevel;this.data=undefined;this.uniqueID=undefined;this.dataDepth=CirclePackingDefaultValues.dataDepth;this.displayDepth=CirclePackingDefaultValues.displayDepth;this.parentAccessor=CirclePackingDefaultValues.parentAccessor;this.nodeAccessor=CirclePackingDefaultValues.nodeAccessor;this.sizeAccessor=CirclePackingDefaultValues.sizeAccessor;this.colorPalette=CirclePackingDefaultValues.colorPalette;this.colors=undefined;this.cursor=CirclePackingDefaultValues.cursor;this.hoverStyle=CirclePackingDefaultValues.hoverStyle;this.clickStyle=CirclePackingDefaultValues.clickStyle;this.hoverOpacity=CirclePackingDefaultValues.hoverOpacity;this.animationConfig=CirclePackingDefaultValues.animationConfig;this.showTooltip=CirclePackingDefaultValues.showTooltip;this.tooltipLabel=CirclePackingDefaultValues.tooltipLabel;this.dataLabel=CirclePackingDefaultValues.dataLabel;this.dataKeyNames=undefined;this.annotations=CirclePackingDefaultValues.annotations;this.accessibility=CirclePackingDefaultValues.accessibility;this.suppressEvents=CirclePackingDefaultValues.suppressEvents;this.interactionKeys=undefined;this.hoverHighlight=undefined;this.clickHighlight=CirclePackingDefaultValues.clickHighlight;this.zoomToNode=undefined}t.prototype.dataWatcher=function(t,i){this.updated=true;this.shouldUpdateData=true;this.shouldUpdateTableData=true;this.shouldValidate=true;this.shouldZoom=true;this.shouldAddStrokeUnder=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldDrawInteractionState=true;this.shouldSetTextures=true;this.shouldSetStrokes=true;this.shouldSetColors=true};t.prototype.titleWatcher=function(t,i){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.subtitleWatcher=function(t,i){this.shouldSetSubTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.headingWatcher=function(t,i){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetSubTitle=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true;this.shouldSetAnnotationAccessibility=true};t.prototype.clusterWatcher=function(t,i){this.shouldUpdateData=true;this.shouldUpdateTableData=true;this.shouldZoom=true;this.shouldAddStrokeUnder=true;this.shouldSetGeometryAriaLabels=true;this.shouldDrawInteractionState=true};t.prototype.nodeWatcher=function(t,i){this.shouldUpdateData=true;this.shouldUpdateTableData=true;this.shouldZoom=true;this.shouldAddStrokeUnder=true;this.shouldSetGeometryAriaLabels=true;this.shouldDrawInteractionState=true};t.prototype.sizeWatcher=function(t,i){this.shouldUpdateData=true;this.shouldUpdateTableData=true;this.shouldSetGeometryAriaLabels=true;this.shouldZoom=true};t.prototype.heightWatcher=function(t,i){this.shouldUpdateLayout=true;this.shouldResetRoot=true;this.shouldUpdateData=true;this.shouldZoom=true;this.shouldAddStrokeUnder=true};t.prototype.dataDepthWatcher=function(t,i){this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldZoom=true};t.prototype.displayDepthWatcher=function(t,i){this.shouldUpdateDisplayDepth=true;this.shouldZoom=true};t.prototype.circlePaddingWatcher=function(t,i){this.shouldUpdateData=true;this.shouldZoom=true};t.prototype.colorsWatcher=function(t,i){this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldSetTextures=true;this.shouldSetStrokes=true};t.prototype.showTooltipWatcher=function(t,i){this.shouldDrawInteractionState=true};t.prototype.tooltipLabelWatcher=function(t,i){this.shouldUpdateTableData=true;this.shouldSetParentSVGAccessibility=true;this.shouldSetGeometryAriaLabels=true};t.prototype.hoverOpacityWatcher=function(t,i){this.shouldDrawInteractionState=true};t.prototype.interactionStyleWatcher=function(t,i){this.shouldDrawInteractionState=true;this.shouldSetTextures=true;this.shouldSetStrokes=true;this.shouldSetColors=true};t.prototype.cursorWatcher=function(t,i){this.shouldUpdateCursor=true};t.prototype.clickWatcher=function(t,i){this.shouldDrawInteractionState=true};t.prototype.hoverWatcher=function(t,i){this.shouldDrawInteractionState=true};t.prototype.zoomWatcher=function(t,i){this.shouldZoom=true};t.prototype.interactionWatcher=function(t,i){this.shouldValidateInteractionKeys=true;this.shouldUpdateTableData=true;this.shouldDrawInteractionState=true;this.shouldSetGeometryAriaLabels=true};t.prototype.dataKeyNamesWatcher=function(t,i){this.shouldSetParentSVGAccessibility=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldSetGeometryAriaLabels=true};t.prototype.labelWatcher=function(t,i){this.shouldUpdateTableData=true;this.shouldUpdateLabels=true;this.shouldAddStrokeUnder=true};t.prototype.accessibilityWatcher=function(t,i){this.shouldValidate=true;var e=t&&t.title?t.title:false;var s=i&&i.title?i.title:false;if(e!==s){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var a=t&&t.executiveSummary?t.executiveSummary:false;var r=i&&i.executiveSummary?i.executiveSummary:false;if(a!==r){this.shouldSetChartAccessibilityExecutiveSummary=true}var n=t&&t.purpose?t.purpose:false;var c=i&&i.purpose?i.purpose:false;if(n!==c){this.shouldSetChartAccessibilityPurpose=true}var o=t&&t.longDescription?t.longDescription:false;var h=i&&i.longDescription?i.longDescription:false;if(o!==h){this.shouldSetChartAccessibilityLongDescription=true}var l=t&&t.contextExplanation?t.contextExplanation:false;var u=i&&i.contextExplanation?i.contextExplanation:false;if(l!==u){this.shouldSetChartAccessibilityContext=true}var f=t&&t.statisticalNotes?t.statisticalNotes:false;var d=i&&i.statisticalNotes?i.statisticalNotes:false;if(f!==d){this.shouldSetChartAccessibilityStatisticalNotes=true}var v=t&&t.structureNotes?t.structureNotes:false;var g=i&&i.structureNotes?i.structureNotes:false;if(v!==g){this.shouldSetChartAccessibilityStructureNotes=true}var p=t&&t.includeDataKeyNames;var k=i&&i.includeDataKeyNames;var m=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var y=i&&i.elementDescriptionAccessor?i.elementDescriptionAccessor:false;if(p!==k||m!==y){if(p!==k){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}var D=t&&t.hideTextures?t.hideTextures:false;var C=i&&i.hideTextures?i.hideTextures:false;if(D!==C){this.shouldSetTextures=true;this.shouldDrawInteractionState=true}var b=t&&t.hideStrokes?t.hideStrokes:false;var P=i&&i.hideStrokes?i.hideStrokes:false;if(b!==P){this.shouldSetStrokes=true;this.shouldDrawInteractionState=true}var V=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;var w=i&&i.keyboardNavConfig&&i.keyboardNavConfig.disabled?i.keyboardNavConfig.disabled:false;var T=t&&t.elementsAreInterface?t.elementsAreInterface:false;var A=i&&i.elementsAreInterface?i.elementsAreInterface:false;if(V!==w||T!==A){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(T!==A){this.shouldDrawInteractionState=true}};t.prototype.localizationWatcher=function(t,i){this.shouldValidate=true;var e=t&&t.language?t.language:false;var s=i&&i.language?i.language:false;if(e!==s){this.shouldSetLocalizationConfig=true;this.shouldUpdateTableData=true;this.shouldRedrawWrapper=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityCount=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}var a=t&&t.numeralLocale?t.numeralLocale:false;var r=i&&i.numeralLocale?i.numeralLocale:false;if(a!==r){this.shouldSetLocalizationConfig=true;this.shouldUpdateTableData=true;this.shouldRedrawWrapper=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityCount=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}};t.prototype.annotationsWatcher=function(t,i){this.shouldValidate=true;this.shouldUpdateAnnotations=true;this.shouldSetAnnotationAccessibility=true};t.prototype.idWatcher=function(t,i){console.error("Change detected in prop uniqueID from value "+i+" to value "+t+". This prop cannot be changed after component has loaded.")};t.prototype.suppressWatcher=function(t,i){this.shouldBindInteractivity=true;this.shouldUpdateCursor=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetSubTitle=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.componentWillLoad=function(){var t=this;var i=this.uniqueID||"circle-pack-"+v4();this.initialLoadEvent.emit({chartID:i});return new Promise((function(e){t.duration=0;t.chartID=i;t.circlePackingEl.id=t.chartID;t.setLocalizationConfig();t.setTagLevels();t.validateInteractionKeys();t.setTableData();t.setLayoutData();t.restructureData();t.shouldValidateAccessibilityProps();t.shouldValidateLocalizationProps();t.setColors();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(i){t.renderRootElements();t.setTooltipInitialStyle();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.prepareChartForDrawing();t.reSetRoot();t.setTextures();t.setSubTitleElements();t.setStrokes();t.setTextStrokes();t.updateDisplayDepth();t.enterUpdateExitCircles(t.circleG,t.filterData(t.currentDepth));var e=t.getZoomTarget();t.drawZoomChildren(e);t.setChartCountAccessibility();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.addStrokeUnder();t.zoom(e);t.drawAnnotations();t.setAnnotationAccessibility();t.onChangeHandler();hideNonessentialGroups(t.root.node(),t.circleG.node(),true);i("component did load")})).then((function(){return t.initialLoadEndEvent.emit({chartID:t.chartID})}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(i){t.duration=!t.animationConfig||!t.animationConfig.disabled?750:0;t.prepareChartForDrawing();if(t.shouldResetRoot){t.reSetRoot();t.shouldResetRoot=false}if(t.shouldSetColors){t.setColors();t.shouldSetColors=false}if(t.shouldSetTextures){t.setTextures();t.shouldSetTextures=false}if(t.shouldSetStrokes){t.setStrokes();t.shouldSetStrokes=false}if(t.shouldSetTextStrokes){t.setTextStrokes();t.shouldSetTextStrokes=false}if(t.shouldSetIDs){t.setIDs();t.shouldSetIDs=false}if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}if(t.shouldUpdateDisplayDepth){t.updateDisplayDepth();t.shouldUpdateDisplayDepth=false}if(t.shouldZoom){var e=t.getZoomTarget();t.drawZoomChildren(e);t.zoom(e);t.shouldZoom=false}else if(t.shouldUpdateLabels){var e=t.getZoomTarget();if(e.children&&e.children.length){t.setLabelSelections(e.children)}t.shouldUpdateLabels=false}if(t.shouldAddStrokeUnder){t.addStrokeUnder();t.shouldAddStrokeUnder=false}if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldBindInteractivity){t.bindInteractivity();t.shouldBindInteractivity=false}if(t.shouldDrawInteractionState){t.updateInteractionState();t.shouldDrawInteractionState=false}if(t.shouldSetSubTitle){t.setSubTitleElements();t.shouldSetSubTitle=false}if(t.shouldUpdateCursor){t.updateCursor();t.shouldUpdateCursor=false}if(t.shouldUpdateAnnotations){t.drawAnnotations();t.shouldUpdateAnnotations=false}if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}t.onChangeHandler();i("component did update")})).then((function(){return t.drawEndEvent.emit({chartID:t.chartID})}))};t.prototype.shouldValidateLocalizationProps=function(){var t=getGlobalInstances();var i=t.i18Next.language;var e=t.i18Next.getResourceBundle(i);var s=t.numeral.localeData();if(this.shouldValidateLocalization&&!this.localization.skipValidation){this.shouldValidateLocalization=false;validateLocalizationProps(this.chartID,Object.assign(Object.assign({},this.localization),{language:e,numeralLocale:s}))}};t.prototype.shouldValidateAccessibilityProps=function(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;validateAccessibilityProps(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickEvent:!this.suppressEvents?this.clickEvent.emit:undefined}})}};t.prototype.setTableData=function(){var t=scopeDataKeys(this,chartAccessors,"circle-packing");this.tableData=getScopedData(this.data,t);this.tableColumns=Object.keys(t)};t.prototype.setLayoutData=function(){this.padding=typeof this.padding==="string"?getPadding(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.restructureData=function(){var t=this;this.diameter=Math.min(this.innerPaddedWidth,this.innerPaddedHeight);this.holder=stratify().id((function(i){return i[t.nodeAccessor]})).parentId((function(i){return i[t.parentAccessor]}))(this.data);this.rootCircle=hierarchy(this.holder).sum((function(i){return i.data[t.sizeAccessor]||1})).sort((function(t,i){return i.data.value-t.data.value}));this.nodes=index().size([this.diameter-this.circlePadding,this.diameter-this.circlePadding]).padding(this.circlePadding)(this.rootCircle).descendants();this.innerDataDepth=this.dataDepth?Math.min(max(this.nodes,(function(t){return t.depth})),this.dataDepth):max(this.nodes,(function(t){return t.depth}));this.nodes=this.nodes.filter((function(i){return!(i.depth>t.innerDataDepth)}))};t.prototype.getLanguageString=function(){return getActiveLanguageString(this.localization)};t.prototype.setLocalizationConfig=function(){configLocalization(this.localization)};t.prototype.validateInteractionKeys=function(){this.innerInteractionKeys=!this.interactionKeys||this.interactionKeys&&this.interactionKeys.length===0?[this.nodeAccessor]:__spreadArray([],this.interactionKeys,true)};t.prototype.prepareChartForDrawing=function(){var t=this.zoomToNode?this.generateValidId(this.zoomToNode[this.nodeAccessor]):"";var i=this.zoomToNode?this.rootG.select("#circle-in-pack-"+t).data()[0]:this.rootCircle;this.view=!this.view?[i.x,i.y,i.r*2]:this.view;this.zoomRatio=!this.zoomRatio?this.diameter/this.view[2]:this.zoomRatio;this.currentDepth=i.depth};t.prototype.renderRootElements=function(){this.svg=select(this.circlePackingEl).select(".visa-viz-circle-packing-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height).attr("data-testid","root-svg");this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID).attr("data-testid","margin-container");this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID).attr("data-testid","padding-container");this.circleG=this.rootG.append("g").attr("class","circle-pack-group").attr("data-testid","circle-group");this.textG=this.rootG.append("g").attr("class","circle-pack-text-group").attr("data-testid","dataLabel-group");this.subTitleG=select(this.circlePackingEl).select(".circle-packing-sub-title");this.tooltipG=select(this.circlePackingEl).select(".circle-packing-tooltip")};t.prototype.reSetRoot=function(){var t=prepareRenderChange({selection:this.svg,duration:this.duration,namespace:"root_reset"});t.attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);var i=prepareRenderChange({selection:this.root,duration:this.duration,namespace:"root_reset"});i.attr("transform","translate(".concat(this.diameter/2+this.margin.left,", ").concat(this.diameter/2+this.margin.top,")"));var e=prepareRenderChange({selection:this.rootG,duration:this.duration,namespace:"root_reset"});e.attr("transform","translate(".concat(this.padding.left,", ").concat(this.padding.top,")"));if(typeof this.filter!=="undefined"){this.enterUpdateExitCircles(this.circleG,this.filterData(0))}setAccessibilityDescriptionWidth(this.chartID,this.width)};t.prototype.setGlobalSelections=function(){this.circle=this.rootG.selectAll("circle:not(.vcl-accessibility-focus-highlight)")};t.prototype.enterUpdateExitCircles=function(t,i){var e=i[0].depth;var s=t.selectAll(".g-level-"+e).data(i,(function(t){return t.data.id}));this.enterCircle=s.enter().append("g");this.enterSize+=this.enterCircle.size();this.exitCircle=s.exit();this.enterCircles(e);this.exitCircles(this.exitCircle,true);this.updateParentCircle=s.merge(this.enterCircle);this.updateParentCircle.order();this.checkRecursion(e)};t.prototype.enterCircles=function(t){var i=this;this.enterCircle.attr("class","g-level-"+t).attr("id",(function(t){return"circle-in-pack-"+i.generateValidId(t.data.id)}));this.enterCircle.append("circle").attr("filter",this.setCircleFilter).classed("node node-level-"+t,true).classed("node--root",(function(t,i,e){var s=select(e[i].parentNode).datum();return!s.parent})).on("mouseover",!this.suppressEvents?function(t,e,s){var a=select(s[e].parentNode).datum();i.onHoverHandler(a,s[e])}:null).on("mouseout",!this.suppressEvents?function(){i.onMouseOutHandler()}:null).on("click",!this.suppressEvents?function(t,e,s){var a=select(s[e].parentNode).datum();if(!i.zooming){i.clickEvent.emit({data:a.data.data,target:s[e]})}}:null).attr("fill",this.setCircleStyle).attr("opacity",(function(t,e,s){var a=select(s[e].parentNode).datum();var r=a.data.data;return checkInteraction(r,1,i.hoverOpacity,i.hoverHighlight,i.clickHighlight,i.innerInteractionKeys)})).each((function(t,e,s){initializeElementAccess(s[e]);setElementFocusHandler({node:s[e],geomType:"node",includeKeyNames:i.accessibility.includeDataKeyNames,dataKeys:scopeDataKeys(i,chartAccessors,"circle-packing"),dataKeyNames:i.dataKeyNames,recursive:true,groupName:"node",uniqueID:i.chartID});setElementAccessID({node:s[e],uniqueID:i.chartID});var a=select(s[e].parentNode).datum();var r=checkInteraction(a,true,false,"",i.clickHighlight,i.innerInteractionKeys);r=i.clickHighlight&&i.clickHighlight.length?r:false;var n=i.accessibility.elementsAreInterface;setElementInteractionAccessState(s[e],r,n)})).attr("data-testid","circle").attr("data-id",(function(t,e,s){var a=select(s[e].parentNode).datum();var r=a.data.data;return"circle-".concat(r[i.parentAccessor],"-").concat(r[i.nodeAccessor])})).attr("cursor",!this.suppressEvents?this.cursor:null).attr("transform",(function(t){return"translate("+roundTo((t.x-i.view[0])*i.zoomRatio,4)+","+roundTo((t.y-i.view[1])*i.zoomRatio,4)+")"})).attr("r",0)};t.prototype.exitCircles=function(t,i){if(t.size()){this.exitSize+=t.size();if(i){this.exitSize+=t.selectAll("g").size()}var e=checkAccessFocus(this.rootG.node());t.remove();this.setChartCountAccessibility();this.setGeometryAriaLabels();retainAccessFocus({parentGNode:this.rootG.node(),focusDidExist:e,recursive:true})}};t.prototype.checkRecursion=function(t){var i=this;this.updateParentCircle.each((function(e,s,a){var r=i.currentDepth+i.innerDisplayDepth;var n=0;if(e.depth+1<=r){n=t+1}if(n&&e.children&&e.children.length){i.enterUpdateExitCircles(select(a[s]),e.children)}else{i.exitCircles(select(a[s]).selectAll("g"),false)}}))};t.prototype.setLabelSelections=function(t){var i=this.textG.selectAll("text").data(t,(function(t){return(t.data||{}).id}));this.enterText=i.enter().append("text");this.updateText=i.merge(this.enterText);this.exitText=i.exit().remove();this.enterLabels();this.drawLabels()};t.prototype.enterLabels=function(){var t=this;this.enterText.attr("filter",this.textFilter).attr("class","label circle-packing-dataLabel").attr("cursor",!this.suppressEvents?this.cursor:null).attr("data-testid","dataLabel").attr("data-x",(function(i){return roundTo((i.x-t.view[0])*t.zoomRatio,4)})).attr("data-y",(function(i){return roundTo((i.y-t.view[1])*t.zoomRatio,4)})).attr("data-translate-x",this.diameter/2+this.margin.left).attr("data-translate-y",this.diameter/2+this.margin.top).attr("x",(function(i){return roundTo((i.x-t.view[0])*t.zoomRatio,4)})).attr("y",(function(i){return roundTo((i.y-t.view[1])*t.zoomRatio,4)})).attr("text-anchor","middle")};t.prototype.drawLabels=function(){var t=this;this.updateText.attr("opacity",(function(i){return t.dataLabel.visible?1:0})).text((function(i){return t.dataLabel.labelAccessor?i.data.data[t.dataLabel.labelAccessor]:i.data.data[t.nodeAccessor]}));if(!this.shouldZoom&&this.shouldUpdateLabels)this.placeLabels()};t.prototype.placeLabels=function(){var t=this;var i=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;var e=this.updateText.classed("moving",(function(i,e,s){var a=+select(s[e]).attr("data-x");var r=+select(s[e]).attr("data-y");var n=roundTo((i.x-t.view[0])*t.zoomRatio,4);var c=roundTo((i.y-t.view[1])*t.zoomRatio,4);return a!==n||r!==c})).attr("data-x",(function(i){return roundTo((i.x-t.view[0])*t.zoomRatio,4)})).attr("data-y",(function(i){return roundTo((i.y-t.view[1])*t.zoomRatio,4)})).attr("data-translate-x",this.diameter/2+this.margin.left).attr("data-translate-y",this.diameter/2+this.margin.top).style("visibility",(function(i,e,s){return t.dataLabel.placement==="auto"||t.dataLabel.collisionHideOnly?select(s[e]).style("visibility"):null})).attr("filter",null).transition("place").duration(this.duration);var s={all:{validPositions:["middle","top","bottom","left","right","bottom-right","bottom-left","top-left","top-right"],offsets:[1,1,2,4,4,1,1,1,1]},centroid:{validPositions:["middle"],offsets:[1]},top:{validPositions:["top","top-left","top-right"],offsets:[1,1,1]},middle:{validPositions:["middle","left","right"],offsets:[1,4,4]},bottom:{validPositions:["bottom","bottom-left","bottom-right"],offsets:[2,1,1]},right:{validPositions:["right","top-right","bottom-right"],offsets:[4,1,1]},left:{validPositions:["left","top-left","bottom-left"],offsets:[4,1,1]}};var a=this.dataLabel&&this.dataLabel.collisionPlacement;var r=i?["middle"]:a&&s[a]?s[a].validPositions:s["all"].validPositions;var n=i?[1]:a&&s[a]?s[a].offsets:s["all"].offsets;if(this.dataLabel.visible&&(this.dataLabel.placement==="auto"||this.dataLabel.collisionHideOnly)){this.bitmaps=resolveLabelCollision({labelSelection:e,avoidMarks:[],validPositions:r,offsets:n,accessors:[this.parentAccessor,this.nodeAccessor],size:[roundTo(this.innerPaddedWidth),roundTo(this.innerPaddedHeight)],hideOnly:this.dataLabel.visible&&i});if(i){e.attr("x",(function(i){return roundTo((i.x-t.view[0])*t.zoomRatio,4)})).attr("y",(function(i){return roundTo((i.y-t.view[1])*t.zoomRatio,4)}))}}else{e.attr("x",(function(i){return roundTo((i.x-t.view[0])*t.zoomRatio,4)})).attr("y",(function(i){return roundTo((i.y-t.view[1])*t.zoomRatio,4)}))}e.call(transitionEndAll,(function(){t.updateText.classed("moving",false);setTimeout((function(){t.addStrokeUnder()}),0)}))};t.prototype.addStrokeUnder=function(){this.updateText.attr("filter",this.textFilter)};t.prototype.setTextStrokes=function(){this.textFilter=createTextStrokeFilter({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.filter=createTextStrokeFilter({root:this.svg.node(),id:this.chartID,color:"#ffffff",strokeSizeOverride:1})};t.prototype.bindInteractivity=function(){var t=this;this.circle.on("mouseover",!this.suppressEvents?function(i,e,s){var a=select(s[e].parentNode).datum();t.onHoverHandler(a,s[e])}:null).on("mouseout",!this.suppressEvents?function(){t.onMouseOutHandler()}:null).on("click",!this.suppressEvents?function(i,e,s){var a=select(s[e].parentNode).datum();if(!t.zooming){t.clickEvent.emit({data:a.data.data,target:s[e]})}}:null)};t.prototype.drawAnnotations=function(){annotate({source:this.rootG.node(),data:this.annotations,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})};t.prototype.setAnnotationAccessibility=function(){setAccessAnnotation(this.getLanguageString(),this.circlePackingEl,this.annotations,undefined)};t.prototype.setSubTitleElements=function(){setSubTitle({root:this.subTitleG,subTitle:this.subTitle})};t.prototype.setColors=function(){this.preparedColors=this.colors?convertVisaColor(this.colors):getColors(this.colorPalette,this.innerDataDepth+1)};t.prototype.setTextures=function(){var t=this.preparedColors.range?this.preparedColors.range():this.preparedColors;if(this.accessibility.hideTextures||t.length>6){this.colorArr=this.preparedColors}else{var i=convertColorsToTextures({colors:t,rootSVG:this.svg.node(),id:this.chartID,scheme:"categorical",disableTransitions:!this.duration});this.colorArr=this.preparedColors.range?this.preparedColors.copy().range(i):i}};t.prototype.setStrokes=function(){var t=this;this.strokes=[];this.preparedColors.forEach((function(i){t.strokes.push(getContrastingStroke(i))}))};t.prototype.updateDisplayDepth=function(){var t=this;this.innerDisplayDepth=this.displayDepth?Math.min(max(this.nodes,(function(t){return t.depth})),this.displayDepth):max(this.nodes,(function(t){return t.depth}));if(this.circleG){this.circleG.selectAll("g").each((function(i,e,s){if(i.depth>t.innerDisplayDepth){t.exitSize++;t.exitSize+=select(s[e]).selectAll("g").size();select(s[e]).remove()}}))}};t.prototype.updateCursor=function(){this.circle.attr("cursor",!this.suppressEvents?this.cursor:null)};t.prototype.updateInteractionState=function(){var t=this;this.circle.attr("fill",this.setCircleStyle).attr("filter",this.setCircleFilter).attr("opacity",(function(i,e,s){var a=select(s[e].parentNode).datum();var r=a.data.data;return checkInteraction(r,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)})).each((function(i,e,s){var a=select(s[e].parentNode).datum();var r=checkInteraction(a,true,false,"",t.clickHighlight,t.innerInteractionKeys);r=t.clickHighlight&&t.clickHighlight.length?r:false;var n=t.accessibility.elementsAreInterface;setElementInteractionAccessState(s[e],r,n)}));if(!this.zooming){retainAccessFocus({parentGNode:this.rootG.node(),recursive:true})}};t.prototype.drawZoomChildren=function(t){if(t.children&&t.children.length){var i=this.generateValidId(t.data.id);this.enterUpdateExitCircles(this.rootG.select("#circle-in-pack-"+i),t.children);this.setGlobalSelections();this.setLabelSelections(t.children)}else if(t){this.setGlobalSelections();this.setLabelSelections([t])}};t.prototype.getZoomTarget=function(){var t=this.zoomToNode?this.generateValidId(this.zoomToNode[this.nodeAccessor]):"";return this.zoomToNode?this.rootG.select("#circle-in-pack-"+t).datum():this.rootCircle};t.prototype.zoom=function(t){var i=this;this.zooming=true;this.view=[t.x,t.y,t.r*2];this.zoomRatio=this.diameter/this.view[2];this.circle.classed("moving",(function(t,e,s){var a=select(s[e].parentNode).datum();var r=+select(s[e]).attr("data-cx");var n=+select(s[e]).attr("data-cy");var c=+select(s[e]).attr("r");var o=roundTo((a.x-i.view[0])*i.zoomRatio,4);var h=roundTo((a.y-i.view[1])*i.zoomRatio,4);var l=a.r*i.zoomRatio;return c!==l||r!==o||n!==h})).attr("data-cx",(function(t,e,s){var a=select(s[e].parentNode).datum();return roundTo((a.x-i.view[0])*i.zoomRatio,4)})).attr("data-cy",(function(t,e,s){var a=select(s[e].parentNode).datum();return roundTo((a.y-i.view[1])*i.zoomRatio,4)})).attr("data-r",(function(t,e,s){var a=select(s[e].parentNode).datum();return a.r*i.zoomRatio})).attr("data-translate-x",this.diameter/2+this.margin.left).attr("data-translate-y",this.diameter/2+this.margin.top);var e=this.circle.filter(".moving").attr("filter",null).transition("zoom").duration(this.duration).attr("transform",(function(t,e,s){var a=select(s[e].parentNode).datum();return"translate("+roundTo((a.x-i.view[0])*i.zoomRatio,4)+","+roundTo((a.y-i.view[1])*i.zoomRatio,4)+")"})).attr("r",(function(t,e,s){var a=select(s[e].parentNode).datum();return a.r*i.zoomRatio}));var s=function(){i.zooming=false;i.circle.classed("moving",false);setTimeout((function(){i.circle.attr("filter",i.setCircleFilter)}),0);retainAccessFocus({parentGNode:i.rootG.node(),recursive:true});i.transitionEndEvent.emit({chartID:i.chartID})};if(this.duration&&e.size()>0){e.attrTween("x",(function(t,e,s){var a=select(s[e]).classed("vcl-accessibility-focus-source");return function(){if(a){retainAccessFocus({parentGNode:i.rootG.node(),recursive:true})}return 0}})).call(transitionEndAll,s)}else{s()}this.placeLabels()};t.prototype.onHoverHandler=function(t,i){overrideTitleTooltip(this.chartID,true);this.hoverEvent.emit({data:t.data.data,target:i});if(this.showTooltip){this.eventsTooltip({data:t.data.data,evt:event,isToShow:true})}};t.prototype.onMouseOutHandler=function(){overrideTitleTooltip(this.chartID,false);this.mouseOutEvent.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){initTooltipStyle(this.tooltipG)};t.prototype.eventsTooltip=function(t){var i=t.data,e=t.evt,s=t.isToShow;drawTooltip({root:this.tooltipG,data:i,event:e,isToShow:s,tooltipLabel:this.tooltipLabel,dataLabel:this.dataLabel,dataKeyNames:this.dataKeyNames,ordinalAccessor:this.nodeAccessor,groupAccessor:this.parentAccessor,valueAccessor:this.sizeAccessor,chartType:"circle-packing"})};t.prototype.setTagLevels=function(){this.topLevel=findTagLevel(this.highestHeadingLevel);this.bottomLevel=findTagLevel(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){initializeDescriptionRoot({language:this.getLanguageString(),rootEle:this.circlePackingEl,title:this.accessibility.title||this.mainTitle,chartTag:"circle-packing",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,recursive:true,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled,hideDataTable:this.accessibility.hideDataTableButton});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){setAccessibilityController({chartTag:"circle-packing",language:this.getLanguageString(),node:this.svg.node(),title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"node",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:scopeDataKeys(this,chartAccessors,"circle-packing"),dataKeyNames:this.dataKeyNames,groupAccessor:this.parentAccessor,groupName:"node",recursive:true,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})};t.prototype.setGeometryAccessibilityAttributes=function(){this.rootG.selectAll(".node").each((function(t,i,e){initializeElementAccess(e[i])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var i=scopeDataKeys(this,chartAccessors,"circle-packing");this.rootG.selectAll(".node").each((function(e,s,a){setElementFocusHandler({chartTag:"circle-packing",langauge:t.getLanguageString(),node:a[s],geomType:"node",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:i,dataKeyNames:t.dataKeyNames,recursive:true,groupName:"node",uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});setElementAccessID({node:a[s],uniqueID:t.chartID})}))};t.prototype.setChartAccessibilityTitle=function(){setAccessTitle(this.getLanguageString(),this.circlePackingEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){setAccessSubtitle(this.getLanguageString(),this.circlePackingEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){setAccessLongDescription(this.getLanguageString(),this.circlePackingEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){setAccessExecutiveSummary(this.getLanguageString(),this.circlePackingEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){setAccessPurpose(this.getLanguageString(),this.circlePackingEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){setAccessContext(this.getLanguageString(),this.circlePackingEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){setAccessStatistics(this.getLanguageString(),this.circlePackingEl,this.accessibility.statisticalNotes)};t.prototype.setChartCountAccessibility=function(){setAccessChartCounts({rootEle:this.circlePackingEl,parentGNode:this.circleG.node(),chartTag:"circle-packing",geomType:"node",groupName:"node",recursive:true})};t.prototype.setChartAccessibilityStructureNotes=function(){setAccessStructure(this.getLanguageString(),this.circlePackingEl,this.accessibility.structureNotes)};t.prototype.onChangeHandler=function(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){var t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.updated=false;this.enterSize=0;this.exitSize=0};t.prototype.filterData=function(t){return this.nodes.filter((function(i){if(i.depth===t){return true}return false}))};t.prototype.render=function(){this.drawStartEvent.emit({chartID:this.chartID});this.init();if(this.shouldSetLocalizationConfig){this.setLocalizationConfig();this.shouldSetLocalizationConfig=false}if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidateLocalizationProps();this.shouldValidate=false}if(this.shouldUpdateLayout){this.setLayoutData();this.shouldUpdateLayout=false}if(this.shouldUpdateData){this.restructureData();this.shouldUpdateData=false}return h("div",{key:"79ec0386c06e1e0c360cef9d80eafe35b5b69a52",class:"o-layout","data-testid":"outer-layout"},h("div",{key:"7866aa053778a794af1ca4d387ec727e42f6da62",class:"o-layout--chart","data-testid":"layout-chart"},h(this.topLevel,{key:"638cea8cdfcd360aa6fdb50791f169cba9a3902b","data-testid":"main-title"},this.mainTitle),h(this.bottomLevel,{key:"bd19899287b8cf655b1537874f22f7a46f7a320b",class:"visa-ui-text--instructions circle-packing-sub-title vcl-sub-title","data-testid":"sub-title"}),h("keyboard-instructions",{key:"3734584d4822584f3dd046d2dd75aebba16d17e6",uniqueID:this.chartID,geomType:"node",groupName:"node collection",language:this.getLanguageString(),chartTag:"circle-packing",width:this.width-(this.margin?this.margin.right||0:0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:true,disabled:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),h("div",{key:"c8c32a11274566ca897d7e1c312af6fab62106d4",class:"visa-viz-circle-packing-container","data-testid":"chart-container"}),h("div",{key:"39aa91db80095f8ad5f9ae70c2a05bf74ff7da88",class:"circle-packing-tooltip vcl-tooltip","data-testid":"tooltip-container",style:{display:this.showTooltip?"block":"none"}}),h("data-table",{key:"baa297fb4e9e490753f7e952642a663950db210b",uniqueID:this.chartID,language:this.getLanguageString(),unitTest:true,isCompact:true,tableColumns:this.tableColumns,dataKeyNames:this.dataKeyNames,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))};t.prototype.init=function(){var t=Object.keys(CirclePackingDefaultValues);var i=0;var e={showTooltip:{exception:false},circlePadding:{exception:0},mainTitle:{exception:""},subTitle:{exception:""},hoverOpacity:{exception:0}};for(i=0;i<t.length;i++){var s=!e[t[i]]?false:this[t[i]]===e[t[i]].exception;if(!(this[t[i]]||s)&&!(CirclePackingDefaultValues[t[i]]===this[t[i]])){this[t[i]]=CirclePackingDefaultValues[t[i]]}}};Object.defineProperty(t.prototype,"circlePackingEl",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{data:["dataWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],highestHeadingLevel:["headingWatcher"],parentAccessor:["clusterWatcher"],nodeAccessor:["nodeWatcher"],sizeAccessor:["sizeWatcher"],height:["heightWatcher"],width:["heightWatcher"],padding:["heightWatcher"],margin:["heightWatcher"],dataDepth:["dataDepthWatcher"],displayDepth:["displayDepthWatcher"],circlePadding:["circlePaddingWatcher"],colors:["colorsWatcher"],colorPalette:["colorsWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],hoverOpacity:["hoverOpacityWatcher"],clickStyle:["interactionStyleWatcher"],hoverStyle:["interactionStyleWatcher"],cursor:["cursorWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],zoomToNode:["zoomWatcher"],interactionKeys:["interactionWatcher"],dataKeyNames:["dataKeyNamesWatcher"],dataLabel:["labelWatcher"],accessibility:["accessibilityWatcher"],localization:["localizationWatcher"],annotations:["annotationsWatcher"],uniqueID:["idWatcher"],suppressEvents:["suppressWatcher"]}},enumerable:false,configurable:true});return t}();window["VisaChartsLibOSSLicenses"]=getLicenses();CirclePacking.style=CirclePackingStyle0;export{CirclePacking as circle_packing};
//# sourceMappingURL=circle-packing.entry.js.map