{"version":3,"names":["arcInnerRadius","d","innerRadius","arcOuterRadius","outerRadius","arcStartAngle","startAngle","arcEndAngle","endAngle","arcPadAngle","padAngle","intersect","x0","y0","x1","y1","x2","y2","x3","y3","x10","y10","x32","y32","t","epsilon","cornerTangents","r1","rc","cw","x01","y01","lo","sqrt","ox","oy","x11","y11","x00","y00","dx","dy","d2","r","D","max","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","cx","cy","arc","cornerRadius","constant","padRadius","context","path","withPath","buffer","r0","apply","this","arguments","a0","halfPi","a1","da","abs","moveTo","tau","cos","sin","a01","a11","a00","a10","da0","da1","ap","rp","min","rc0","rc1","t0","t1","p0","asin","p1","oc","pi","ax","ay","bx","by","kc","acos","lc","atan2","lineTo","closePath","centroid","a","_","length","descending","b","NaN","identity","pie","value","sortValues","sort","data","i","n","array","j","k","sum","index","Array","arcs","Math","p","pa","v","propDefaultValues","Utils","PieChartDefaultValues","mainTitle","subTitle","text","centerTitle","centerSubTitle","height","width","margin","top","bottom","right","left","padding","localization","ordinalAccessor","valueAccessor","innerRatio","showEdgeLine","showPercentage","showLabelNote","labelOffset","accessibility","animationConfig","highestHeadingLevel","colorPalette","colorPaletteSequential","sortOrder","sortOrderAsc","hoverStyle","clickStyle","referenceStyle","hoverOpacity","cursor","showTooltip","dataLabel","dataLabelNormalizedOut","tooltipLabel","annotations","suppressEvents","clickHighlight","pieChartCss","PieChartStyle0","getGlobalInstances","configLocalization","getActiveLanguageString","checkAttributeTransitions","createTextStrokeFilter","drawHoverStrokes","removeHoverStrokes","buildStrokes","convertColorsToTextures","initializeDescriptionRoot","initializeElementAccess","setElementFocusHandler","setElementAccessID","setAccessibilityController","hideNonessentialGroups","setAccessTitle","setAccessSubtitle","setAccessLongDescription","setAccessExecutiveSummary","setAccessPurpose","setAccessContext","setAccessStatistics","setAccessChartCounts","setAccessStructure","setAccessAnnotation","retainAccessFocus","checkAccessFocus","setElementInteractionAccessState","setAccessibilityDescriptionWidth","autoTextColor","annotate","chartAccessors","checkInteraction","checkClicked","checkHovered","convertVisaColor","drawTooltip","formatStats","getColors","getLicenses","getPadding","getScopedData","initTooltipStyle","transitionEndAll","overrideTitleTooltip","scopeDataKeys","visaColors","validateAccessibilityProps","validateLocalizationProps","findTagLevel","prepareRenderChange","roundTo","getTextWidth","resolveLabelCollision","setSubTitle","PieChart","shouldValidateAccessibility","shouldValidateLocalization","updated","shouldValidate","shouldUpdateCenterTitle","shouldUpdateTableData","shouldResetRoot","shouldUpdateLabels","shouldUpdateAnnotations","shouldUpdateData","shouldSetColors","shouldSetSubTitle","shouldUpdateCursor","shouldUpdateGeometries","shouldUpdateEdgeLines","shouldUpdateInnerRatio","shouldUpdateLayout","shouldSetPieRadius","shouldPrepareChartData","shouldUpdateReferenceLines","shouldValidateInteractionKeys","shouldSetGlobalSelections","shouldSetTestingAttributes","shouldEnterUpdateExit","shouldBindInteractivity","shouldSetSelectionClass","shouldDrawInteractionState","shouldSetLabelOpacity","shouldCheckLabelColor","shouldUpdateScales","shouldUpdateDescriptionWrapper","shouldSetChartAccessibilityTitle","shouldSetChartAccessibilitySubtitle","shouldSetChartAccessibilityLongDescription","shouldSetChartAccessibilityExecutiveSummary","shouldSetChartAccessibilityStatisticalNotes","shouldSetChartAccessibilityStructureNotes","shouldSetParentSVGAccessibility","shouldSetGeometryAccessibilityAttributes","shouldSetGeometryAriaLabels","shouldSetGroupAccessibilityAttributes","shouldSetGroupAccessibilityLabel","shouldSetChartAccessibilityPurpose","shouldSetChartAccessibilityContext","shouldRedrawWrapper","shouldSetTagLevels","shouldSetChartAccessibilityCount","shouldSetAnnotationAccessibility","shouldSetTextures","shouldSetStrokes","shouldSetLocalizationConfig","strokes","topLevel","bottomLevel","textTreatmentHandler","specifiedPlacement","placement","bgColor","innerInteractionKeys","color","hoverHighlight","preparedColors","dark_text","me","select","attr","classed","root","svg","node","id","chartID","titleWatcher","_newVal","_oldVal","subtitleWatcher","headingWatcher","centerTitleWatcher","layoutWatcher","dataWatcher","idWatcher","newVal","console","error","ordinalAccessorWatcher","interactionKeys","valueAccessorWatcher","sortWatcher","paletteWatcher","colorsWatcher","innerRatioWatcher","showEdgeLineWatcher","referenceWatcher","hoverOpacityWatcher","cursorWatcher","showPercentageWatcher","showTooltipWatcher","tooltipLabelWatcher","labelWatcher","newPlacementVal","oldPlacementVal","newVisibleVal","visible","oldVisibleVal","labelNoteWatcher","labelOffsetWatcher","localizationWatcher","newLanguage","language","oldLanguage","newNumeralLocale","numeralLocale","oldNumeralLocale","accessibilityWatcher","newTitle","title","oldTitle","newExecutiveSummary","executiveSummary","oldExecutiveSummary","newPurpose","purpose","oldPurpose","newLongDescription","longDescription","oldLongDescription","newContext","contextExplanation","oldContext","newStatisticalNotes","statisticalNotes","oldStatisticalNotes","newStructureNotes","structureNotes","oldStructureNotes","newincludeDataKeyNames","includeDataKeyNames","oldincludeDataKeyNames","newElementDescriptionAccessor","elementDescriptionAccessor","oldElementDescriptionAccessor","newTextures","hideTextures","oldTextures","newSmallValue","showSmallLabels","oldSmallValue","newStrokes","hideStrokes","oldStrokes","newKeyNav","keyboardNavConfig","disabled","oldKeyNav","newInterface","elementsAreInterface","oldInterface","annotationsWatcher","referenceDataWatcher","suppressWatcher","clickStyleWatcher","hoverStyleWatcher","clickWatcher","hoverWatcher","interactionWatcher","dataKeyNamesWatcher","unitTestWatcher","componentWillLoad","uniqueID","uuid","initialLoadEvent","emit","Promise","resolve","duration","pieChartEl","setLocalizationConfig","setTagLevels","prepareScales","prepareData","setLayoutData","setPieRadius","validateInteractionKeys","setTableData","shouldValidateAccessibilityProps","shouldValidateLocalizationProps","setColors","componentWillUpdate","componentDidLoad","defaults","renderRootElements","setTooltipInitialStyle","setChartDescriptionWrapper","setChartAccessibilityTitle","setChartAccessibilitySubtitle","setChartAccessibilityLongDescription","setChartAccessibilityExecutiveSummary","setChartAccessibilityPurpose","setChartAccessibilityContext","setChartAccessibilityStatisticalNotes","setChartAccessibilityStructureNotes","setParentSVGAccessibility","reSetRoot","setTextures","setStrokes","setSubTitleElements","setGlobalSelections","setTestingAttributes","setInnerRatio","enterGeometries","updateGeometries","exitGeometries","enterLabels","updateLabels","exitLabels","enterEdgeLine","updateEdgeLine","exitEdgeLine","drawGeometries","drawEdgeLine","drawReferenceLines","drawCenterTitle","drawDataLabels","setChartCountAccessibility","setGeometryAccessibilityAttributes","setGeometryAriaLabels","setSelectedClass","updateCursor","bindInteractivity","drawAnnotations","setAnnotationAccessibility","onChangeHandler","pieG","setGroupAccessibilityAttributes","setGroupAccessibilityID","then","initialLoadEndEvent","componentDidUpdate","updateInteractionState","setLabelOpacity","checkLabelColorAgainstBackground","drawEndEvent","windowInstances","languageString","i18Next","languageObject","getResourceBundle","numeralObject","numeral","localeData","skipValidation","Object","assign","disableValidation","NORMALIZED","onClickEvent","undefined","clickEvent","misc","normalized","hasOwnProperty","getLanguageString","innerHeight","innerWidth","innerPaddedHeight","innerPaddedWidth","radius","preppedData","Number","dataSum","map","parseFloat","getSum","refArr","referenceData","dataTotal","forEach","refPrep","push","refPie","pieData","refData","_a","_b","keys","label","dataKeyNames","tableData","tableColumns","subTitleG","colorFromProps","colors","base_grey","colorsArray","range","colorArr","textures","rootSVG","scheme","disableTransitions","copy","stacked","unitTest","rootG","tooltipG","labelG","refLabelG","edgeG","updatingLabels","updatingLabelsNotes","updatingEdges","update","references","selectAll","updatingRefLabels","updatingRefLabelsNotes","append","style","changeSvg","selection","namespace","easing","easeCircleIn","changeRoot","changeRootG","dataBoundToGeometries","enter","exit","merge","exitSize","size","enterSize","dataBoundToLabels","enteringLabels","exitingLabels","dataBoundToLabelsNotes","enteringLabelsNotes","exitingLabelsNotes","dataBoundToRefLabels","enteringRefLabels","exitingRefLabels","dataBoundToRefLabelsNotes","enteringRefLabelsNotes","exitingRefLabelsNotes","dataBoundToEdges","enteringEdges","exitingEdges","clicked","hovered","baseColor","state","inputElement","key","strokeWidth","fill","parentGNode","labelOpacity","noteOpacity","tempLabels","tempNotes","prevOpacity","styleVisibility","targetOpacity","collisionHideOnly","labelsAdded","filter","labelsRemoved","notesAdded","notesRemoved","validPositions","offsets","bitmaps","labelSelection","avoidMarks","accessors","hideOnly","removeOnly","suppressMarkDraw","group","interrupt","on","onClickHandler","onHoverHandler","onMouseOutHandler","each","_d","order","transition","ease","end","interpolator","interpolate","_current","call","focusDidExist","remove","geometryIsUpdating","newValue","inner","arcPadding","labelEnd","start","transitionEndEvent","selected","selectable","currentRefPie","enterRefPie","exitRefPie","updateRefPie","opacity","dashed","EPSILON","PI","format","titleRoot","textElement","getComputedStyle","fontSize","textWidth","textContent","fontFamily","textHeight","edgeOpacity","source","rootEle","chartTag","redraw","disableKeyNav","hideDataTable","hideDataTableButton","description","geomType","includeKeyNames","dataKeys","groupName","onChangeFunc","added","removed","target","hoverEvent","eventsTooltip","evt","event","isToShow","mouseOutEvent","chartType","render","drawStartEvent","init","h","class","isInteractive","hasCousinNavigation","display","isCompact","exceptions","exception","window"],"sources":["node_modules/d3-shape/src/arc.js","node_modules/d3-shape/src/descending.js","node_modules/d3-shape/src/identity.js","node_modules/d3-shape/src/pie.js","src/components/pie-chart/pie-chart-default-values.ts","src/components/pie-chart/pie-chart.scss?tag=pie-chart","src/components/pie-chart/pie-chart.tsx"],"sourcesContent":["import constant from \"./constant.js\";\nimport {abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau} from \"./math.js\";\nimport {withPath} from \"./path.js\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0, y10 = y1 - y0,\n      x32 = x3 - x2, y32 = y3 - y2,\n      t = y32 * x10 - x32 * y10;\n  if (t * t < epsilon) return;\n  t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\n  return [x0 + t * x10, y0 + t * y10];\n}\n\n// Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function() {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null,\n      path = withPath(arc);\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n\n    if (!context) context = buffer = path();\n\n    // Ensure that the outer radius is always larger than the inner radius.\n    if (r1 < r0) r = r1, r1 = r0, r0 = r;\n\n    // Is it a point?\n    if (!(r1 > epsilon)) context.moveTo(0, 0);\n\n    // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n      context.moveTo(r1 * cos(a0), r1 * sin(a0));\n      context.arc(0, 0, r1, a0, a1, !cw);\n      if (r0 > epsilon) {\n        context.moveTo(r0 * cos(a1), r0 * sin(a1));\n        context.arc(0, 0, r0, a1, a0, cw);\n      }\n    }\n\n    // Or is it a circular or annular sector?\n    else {\n      var a01 = a0,\n          a11 = a1,\n          a00 = a0,\n          a10 = a1,\n          da0 = da,\n          da1 = da,\n          ap = padAngle.apply(this, arguments) / 2,\n          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n          rc0 = rc,\n          rc1 = rc,\n          t0,\n          t1;\n\n      // Apply padding? Note that since r1 ≥ r0, da1 ≥ da0.\n      if (rp > epsilon) {\n        var p0 = asin(rp / r0 * sin(ap)),\n            p1 = asin(rp / r1 * sin(ap));\n        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;\n        else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;\n        else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n      }\n\n      var x01 = r1 * cos(a01),\n          y01 = r1 * sin(a01),\n          x10 = r0 * cos(a10),\n          y10 = r0 * sin(a10);\n\n      // Apply rounded corners?\n      if (rc > epsilon) {\n        var x11 = r1 * cos(a11),\n            y11 = r1 * sin(a11),\n            x00 = r0 * cos(a00),\n            y00 = r0 * sin(a00),\n            oc;\n\n        // Restrict the corner radius according to the sector angle. If this\n        // intersection fails, it’s probably because the arc is too small, so\n        // disable the corner radius entirely.\n        if (da < pi) {\n          if (oc = intersect(x01, y01, x00, y00, x11, y11, x10, y10)) {\n            var ax = x01 - oc[0],\n                ay = y01 - oc[1],\n                bx = x11 - oc[0],\n                by = y11 - oc[1],\n                kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n                lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n            rc0 = min(rc, (r0 - lc) / (kc - 1));\n            rc1 = min(rc, (r1 - lc) / (kc + 1));\n          } else {\n            rc0 = rc1 = 0;\n          }\n        }\n      }\n\n      // Is the sector collapsed to a line?\n      if (!(da1 > epsilon)) context.moveTo(x01, y01);\n\n      // Does the sector’s outer ring have rounded corners?\n      else if (rc1 > epsilon) {\n        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n\n        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the outer ring just a circular arc?\n      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);\n\n      // Is there no inner ring, and it’s a circular sector?\n      // Or perhaps it’s an annular sector collapsed due to padding?\n      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);\n\n      // Does the sector’s inner ring (or point) have rounded corners?\n      else if (rc0 > epsilon) {\n        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n\n        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the inner ring just a circular arc?\n      else context.arc(0, 0, r0, a10, a00, cw);\n    }\n\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function() {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function(_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function(_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function(_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function(_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), arc) : context;\n  };\n\n  return arc;\n}\n","export default function(a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n","export default function(d) {\n  return d;\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport descending from \"./descending.js\";\nimport identity from \"./identity.js\";\nimport {tau} from \"./math.js\";\n\nexport default function() {\n  var value = identity,\n      sortValues = descending,\n      sort = null,\n      startAngle = constant(0),\n      endAngle = constant(tau),\n      padAngle = constant(0);\n\n  function pie(data) {\n    var i,\n        n = (data = array(data)).length,\n        j,\n        k,\n        sum = 0,\n        index = new Array(n),\n        arcs = new Array(n),\n        a0 = +startAngle.apply(this, arguments),\n        da = Math.min(tau, Math.max(-tau, endAngle.apply(this, arguments) - a0)),\n        a1,\n        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),\n        pa = p * (da < 0 ? -1 : 1),\n        v;\n\n    for (i = 0; i < n; ++i) {\n      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {\n        sum += v;\n      }\n    }\n\n    // Optionally sort the arcs by previously-computed values or by data.\n    if (sortValues != null) index.sort(function(i, j) { return sortValues(arcs[i], arcs[j]); });\n    else if (sort != null) index.sort(function(i, j) { return sort(data[i], data[j]); });\n\n    // Compute the arcs! They are stored in the original data's order.\n    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {\n      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {\n        data: data[j],\n        index: i,\n        value: v,\n        startAngle: a0,\n        endAngle: a1,\n        padAngle: p\n      };\n    }\n\n    return arcs;\n  }\n\n  pie.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pie) : value;\n  };\n\n  pie.sortValues = function(_) {\n    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;\n  };\n\n  pie.sort = function(_) {\n    return arguments.length ? (sort = _, sortValues = null, pie) : sort;\n  };\n\n  pie.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : startAngle;\n  };\n\n  pie.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : endAngle;\n  };\n\n  pie.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : padAngle;\n  };\n\n  return pie;\n}\n","/**\n * Copyright (c) 2020, 2021, 2022, 2023 Visa, Inc.\n *\n * This source code is licensed under the MIT license\n * https://github.com/visa/visa-chart-components/blob/master/LICENSE\n *\n **/\nimport Utils from '@visa/visa-charts-utils';\n\nconst { propDefaultValues } = Utils;\n\nexport class PieChartDefaultValues {\n  static readonly mainTitle = 'Pie Chart Title';\n  static readonly subTitle = propDefaultValues.subTitle.text;\n  static readonly centerTitle = '';\n  static readonly centerSubTitle = '';\n  static readonly height = 325;\n  static readonly width = 600;\n  static readonly margin = {\n    top: 600 * 0.05,\n    bottom: 600 * 0.05,\n    right: 600 * 0.05,\n    left: 600 * 0.05\n  };\n  static readonly padding = {\n    top: 20,\n    bottom: 50,\n    right: 70,\n    left: 70\n  };\n\n  static readonly localization = propDefaultValues.localization;\n\n  static readonly ordinalAccessor = 'label';\n  static readonly valueAccessor = 'value';\n  static readonly innerRatio = 0.7;\n  static readonly showEdgeLine = false;\n  static readonly showPercentage = true;\n  static readonly showLabelNote = true;\n  static readonly labelOffset = 25;\n\n  static readonly accessibility = propDefaultValues.accessibility;\n  static readonly animationConfig = propDefaultValues.animationConfig;\n  static readonly highestHeadingLevel = propDefaultValues.highestHeadingLevel;\n\n  static readonly colorPalette = propDefaultValues.colorPaletteSequential;\n  static readonly sortOrder = propDefaultValues.sortOrderAsc;\n\n  static readonly hoverStyle = propDefaultValues.hoverStyle;\n  static readonly clickStyle = propDefaultValues.clickStyle;\n  static readonly referenceStyle = propDefaultValues.referenceStyle;\n  static readonly hoverOpacity = propDefaultValues.hoverOpacity;\n  static readonly cursor = propDefaultValues.cursor;\n\n  static readonly showTooltip = propDefaultValues.showTooltip;\n  static readonly dataLabel = propDefaultValues.dataLabelNormalizedOut;\n  static readonly dataKeyNames;\n  static readonly tooltipLabel = propDefaultValues.tooltipLabel;\n  static readonly annotations = propDefaultValues.annotations;\n  static readonly suppressEvents = propDefaultValues.suppressEvents;\n  static readonly hoverHighlight;\n  static readonly clickHighlight = propDefaultValues.clickHighlight;\n}\n","/**\n * Copyright (c) 2020, 2021, 2023, 2024 Visa, Inc.\n *\n * This source code is licensed under the MIT license\n * https://github.com/visa/visa-chart-components/blob/master/LICENSE\n *\n **/\npie-chart {\n  .annotations {\n    pointer-events: none;\n    .handle {\n      pointer-events: all;\n    }\n  }\n\n  .screen-reader-info {\n    position: absolute;\n    left: -9999px;\n    top: auto;\n    width: 1px;\n    height: 1px;\n    overflow: hidden;\n  }\n\n  .data-table-link {\n    color: #767676;\n    text-decoration: none;\n    font-size: 12px;\n    margin-left: 5%;\n  }\n\n  .hidden {\n    display: none;\n  }\n\n  .pie-tooltip {\n    z-index: 1;\n  }\n\n  .arc {\n    text {\n      font: 0.625rem sans-serif;\n      text-anchor: middle;\n      cursor: default;\n    }\n  }\n\n  .pie-dataLabel-highlight {\n    font-size: 1.5rem;\n    font-weight: 300;\n  }\n  .pie-dataLabel-note {\n    font-size: 0.75rem;\n    fill: #767676;\n  }\n\n  .pie-center-title-group {\n    fill: #767676;\n    .visa-ui-header--1 {\n      font-size: 2rem;\n    }\n  }\n}\n","/**\n * Copyright (c) 2020, 2021, 2022, 2023 Visa, Inc.\n *\n * This source code is licensed under the MIT license\n * https://github.com/visa/visa-chart-components/blob/master/LICENSE\n *\n **/\nimport { Component, Element, Prop, Watch, h, Event, EventEmitter } from '@stencil/core';\nimport { select, event } from 'd3-selection';\nimport { arc, pie } from 'd3-shape';\nimport {\n  IBoxModelType,\n  ILocalizationType,\n  IHoverStyleType,\n  IClickStyleType,\n  IReferenceStyleType,\n  IDataLabelType,\n  ITooltipLabelType,\n  IAnimationConfig,\n  IAccessibilityType,\n  ISubTitleType\n} from '@visa/charts-types';\nimport { PieChartDefaultValues } from './pie-chart-default-values';\nimport { easeCircleIn } from 'd3-ease';\nimport { interpolate } from 'd3-interpolate';\nimport 'd3-transition';\nimport { v4 as uuid } from 'uuid';\nimport Utils from '@visa/visa-charts-utils';\n\nconst {\n  getGlobalInstances,\n  configLocalization,\n  getActiveLanguageString,\n  // verifyTextHasSpace,\n  checkAttributeTransitions,\n  createTextStrokeFilter,\n  drawHoverStrokes,\n  removeHoverStrokes,\n  buildStrokes,\n  convertColorsToTextures,\n  initializeDescriptionRoot,\n  initializeElementAccess,\n  setElementFocusHandler,\n  setElementAccessID,\n  setAccessibilityController,\n  hideNonessentialGroups,\n  setAccessTitle,\n  setAccessSubtitle,\n  setAccessLongDescription,\n  setAccessExecutiveSummary,\n  setAccessPurpose,\n  setAccessContext,\n  setAccessStatistics,\n  setAccessChartCounts,\n  setAccessStructure,\n  setAccessAnnotation,\n  retainAccessFocus,\n  checkAccessFocus,\n  setElementInteractionAccessState,\n  setAccessibilityDescriptionWidth,\n  autoTextColor,\n  annotate,\n  chartAccessors,\n  checkInteraction,\n  checkClicked,\n  checkHovered,\n  convertVisaColor,\n  drawTooltip,\n  formatStats,\n  getColors,\n  getLicenses,\n  getPadding,\n  getScopedData,\n  initTooltipStyle,\n  transitionEndAll,\n  overrideTitleTooltip,\n  scopeDataKeys,\n  visaColors,\n  validateAccessibilityProps,\n  validateLocalizationProps,\n  findTagLevel,\n  prepareRenderChange,\n  roundTo,\n  getTextWidth,\n  resolveLabelCollision,\n  setSubTitle\n} = Utils;\n@Component({\n  tag: 'pie-chart',\n  styleUrl: 'pie-chart.scss'\n})\nexport class PieChart {\n  @Event() clickEvent: EventEmitter;\n  @Event() hoverEvent: EventEmitter;\n  @Event() mouseOutEvent: EventEmitter;\n  @Event() initialLoadEvent: EventEmitter;\n  @Event() initialLoadEndEvent: EventEmitter;\n  @Event() drawStartEvent: EventEmitter;\n  @Event() drawEndEvent: EventEmitter;\n  @Event() transitionEndEvent: EventEmitter;\n\n  // Chart Attributes (1/7)\n  @Prop({ mutable: true }) localization: ILocalizationType = PieChartDefaultValues.localization;\n  @Prop({ mutable: true }) mainTitle: string = PieChartDefaultValues.mainTitle;\n  @Prop({ mutable: true }) subTitle: string | ISubTitleType = PieChartDefaultValues.subTitle;\n  @Prop({ mutable: true }) centerTitle: string = PieChartDefaultValues.centerTitle;\n  @Prop({ mutable: true }) centerSubTitle: string = PieChartDefaultValues.centerSubTitle;\n  @Prop({ mutable: true }) height: number = PieChartDefaultValues.height;\n  @Prop({ mutable: true }) width: number = PieChartDefaultValues.width;\n  @Prop({ mutable: true }) highestHeadingLevel: string | number = PieChartDefaultValues.highestHeadingLevel;\n\n  @Prop({ mutable: true }) margin: IBoxModelType = PieChartDefaultValues.margin;\n  @Prop({ mutable: true }) padding: IBoxModelType = PieChartDefaultValues.padding;\n\n  // Data (2/7)\n  @Prop() data: object[];\n  @Prop() uniqueID: string;\n  @Prop({ mutable: true }) ordinalAccessor: string = PieChartDefaultValues.ordinalAccessor;\n  @Prop({ mutable: true }) valueAccessor: string = PieChartDefaultValues.valueAccessor;\n  @Prop({ mutable: true }) sortOrder: string = PieChartDefaultValues.sortOrder;\n\n  // Color & Shape (4/7)\n  @Prop({ mutable: true }) colorPalette: string = PieChartDefaultValues.colorPalette;\n  @Prop({ mutable: true }) colors: string[];\n  @Prop({ mutable: true }) innerRatio: number = PieChartDefaultValues.innerRatio;\n  @Prop({ mutable: true }) showEdgeLine: boolean = PieChartDefaultValues.showEdgeLine;\n  @Prop({ mutable: true }) hoverStyle: IHoverStyleType = PieChartDefaultValues.hoverStyle;\n  @Prop({ mutable: true }) clickStyle: IClickStyleType = PieChartDefaultValues.clickStyle;\n  @Prop({ mutable: true }) referenceStyle: IReferenceStyleType = PieChartDefaultValues.referenceStyle;\n  @Prop({ mutable: true }) cursor: string = PieChartDefaultValues.cursor;\n  @Prop({ mutable: true }) hoverOpacity: number = PieChartDefaultValues.hoverOpacity;\n  @Prop({ mutable: true }) animationConfig: IAnimationConfig = PieChartDefaultValues.animationConfig;\n\n  // Data label (5/7)\n  @Prop({ mutable: true }) showPercentage: boolean = PieChartDefaultValues.showPercentage;\n  @Prop({ mutable: true }) showTooltip: boolean = PieChartDefaultValues.showTooltip;\n  @Prop({ mutable: true }) showLabelNote: boolean = PieChartDefaultValues.showLabelNote;\n  @Prop({ mutable: true }) labelOffset: number = PieChartDefaultValues.labelOffset;\n  @Prop({ mutable: true }) dataLabel: IDataLabelType = PieChartDefaultValues.dataLabel;\n  @Prop({ mutable: true }) dataKeyNames: object;\n  @Prop({ mutable: true }) tooltipLabel: ITooltipLabelType = PieChartDefaultValues.tooltipLabel;\n  @Prop({ mutable: true }) accessibility: IAccessibilityType = PieChartDefaultValues.accessibility;\n  @Prop({ mutable: true }) annotations: object[] = PieChartDefaultValues.annotations;\n\n  // Calculation (6/7)\n  @Prop() referenceData: object[];\n\n  // Interactivity (7/7)\n  @Prop({ mutable: true }) suppressEvents: boolean = PieChartDefaultValues.suppressEvents;\n  @Prop({ mutable: true }) hoverHighlight: object;\n  @Prop({ mutable: true }) clickHighlight: object[] = PieChartDefaultValues.clickHighlight;\n  @Prop({ mutable: true }) interactionKeys: string[];\n\n  // Testing (8/7)\n  @Prop() unitTest: boolean = false;\n  //  @Prop() debugMode: boolean = false;\n\n  @Element()\n  pieChartEl: HTMLElement;\n  shouldValidateAccessibility: boolean = true;\n  shouldValidateLocalization: boolean = true;\n  graphDataMerged: any;\n  preppedData: any;\n  svg: any;\n  root: any;\n  rootG: any;\n  arc: any;\n  edgeG: any;\n  current: any;\n  enter: any;\n  exit: any;\n  enteringLabels: any;\n  exitingLabels: any;\n  updatingLabels: any;\n  enteringRefLabels: any;\n  exitingRefLabels: any;\n  updatingRefLabels: any;\n  enteringLabelsNotes: any;\n  exitingLabelsNotes: any;\n  updatingLabelsNotes: any;\n  enteringRefLabelsNotes: any;\n  exitingRefLabelsNotes: any;\n  updatingRefLabelsNotes: any;\n  enteringEdges: any;\n  exitingEdges: any;\n  updatingEdges: any;\n  update: any;\n  updateRefPie: any;\n  duration: number;\n  defaults: boolean;\n  innerWidth: number;\n  innerHeight: number;\n  innerPaddedHeight: number;\n  innerPaddedWidth: number;\n  radius: number;\n  innerRadius: number;\n  outerRadius: number;\n  pie: any;\n  pieBackground: any;\n  pieG: any;\n  placement: string;\n  refArr: any;\n  edges: any;\n  refEdges: any;\n  pieData: any;\n  colorArr: any;\n  preparedColors: any;\n  refData: any;\n  labelsCurrent: any;\n  labelG: any;\n  tooltipG: any;\n  subTitleG: any;\n  references: any;\n  refLabelG: any;\n  refLabelsCurrent: any;\n  labelsCurrentNotes: any;\n  refLabelsCurrentNotes: any;\n  tableData: any;\n  tableColumns: any;\n  updated: boolean = true;\n  enterSize: number;\n  exitSize: number;\n  chartID: string;\n  innerInteractionKeys: any;\n  shouldValidate: boolean = false;\n  shouldUpdateCenterTitle: boolean = false;\n  shouldUpdateTableData: boolean = false;\n  shouldResetRoot: boolean = false;\n  shouldUpdateLabels: boolean = false;\n  shouldUpdateAnnotations: boolean = false;\n  shouldUpdateData: boolean = false;\n  shouldSetColors: boolean = false;\n  shouldSetSubTitle: boolean = false;\n  shouldUpdateCursor: boolean = false;\n  shouldUpdateGeometries: boolean = false;\n  shouldUpdateEdgeLines: boolean = false;\n  shouldUpdateInnerRatio: boolean = false;\n  shouldUpdateLayout: boolean = false;\n  shouldSetPieRadius: boolean = false;\n  shouldPrepareChartData: boolean = false;\n  shouldUpdateReferenceLines: boolean = false;\n  shouldValidateInteractionKeys: boolean = false;\n  shouldSetGlobalSelections: boolean = false;\n  shouldSetTestingAttributes: boolean = false;\n  shouldEnterUpdateExit: boolean = false;\n  shouldBindInteractivity: boolean = false;\n  shouldSetSelectionClass: boolean = false;\n  shouldDrawInteractionState: boolean = false;\n  shouldSetLabelOpacity: boolean = false;\n  shouldCheckLabelColor: boolean = false;\n  shouldUpdateScales: boolean = false;\n  shouldUpdateDescriptionWrapper: boolean = false;\n  shouldSetChartAccessibilityTitle: boolean = false;\n  shouldSetChartAccessibilitySubtitle: boolean = false;\n  shouldSetChartAccessibilityLongDescription: boolean = false;\n  shouldSetChartAccessibilityExecutiveSummary: boolean = false;\n  shouldSetChartAccessibilityStatisticalNotes: boolean = false;\n  shouldSetChartAccessibilityStructureNotes: boolean = false;\n  shouldSetParentSVGAccessibility: boolean = false;\n  shouldSetGeometryAccessibilityAttributes: boolean = false;\n  shouldSetGeometryAriaLabels: boolean = false;\n  shouldSetGroupAccessibilityAttributes: boolean = false;\n  shouldSetGroupAccessibilityLabel: boolean = false;\n  shouldSetChartAccessibilityPurpose: boolean = false;\n  shouldSetChartAccessibilityContext: boolean = false;\n  shouldRedrawWrapper: boolean = false;\n  shouldSetTagLevels: boolean = false;\n  shouldSetChartAccessibilityCount: boolean = false;\n  shouldSetAnnotationAccessibility: boolean = false;\n  shouldSetTextures: boolean = false;\n  shouldSetStrokes: boolean = false;\n  shouldSetLocalizationConfig: boolean = false;\n  strokes: any = {};\n  topLevel: string = 'h2';\n  bottomLevel: string = 'p';\n  bitmaps: any;\n\n  @Watch('mainTitle')\n  titleWatcher(_newVal, _oldVal) {\n    this.shouldValidate = true;\n    this.shouldUpdateDescriptionWrapper = true;\n    this.shouldSetChartAccessibilityTitle = true;\n    this.shouldSetParentSVGAccessibility = true;\n  }\n\n  @Watch('subTitle')\n  subtitleWatcher(_newVal, _oldVal) {\n    this.shouldSetSubTitle = true;\n    this.shouldSetChartAccessibilitySubtitle = true;\n    this.shouldSetParentSVGAccessibility = true;\n  }\n\n  @Watch('highestHeadingLevel')\n  headingWatcher(_newVal, _oldVal) {\n    this.shouldRedrawWrapper = true;\n    this.shouldSetTagLevels = true;\n    this.shouldSetChartAccessibilityCount = true;\n    this.shouldSetAnnotationAccessibility = true;\n    this.shouldUpdateDescriptionWrapper = true;\n    this.shouldSetSubTitle = true;\n    this.shouldSetChartAccessibilityTitle = true;\n    this.shouldSetChartAccessibilitySubtitle = true;\n    this.shouldSetChartAccessibilityLongDescription = true;\n    this.shouldSetChartAccessibilityContext = true;\n    this.shouldSetChartAccessibilityExecutiveSummary = true;\n    this.shouldSetChartAccessibilityPurpose = true;\n    this.shouldSetChartAccessibilityStatisticalNotes = true;\n    this.shouldSetChartAccessibilityStructureNotes = true;\n  }\n\n  @Watch('centerTitle')\n  @Watch('centerSubTitle')\n  centerTitleWatcher(_newVal, _oldVal) {\n    this.shouldUpdateCenterTitle = true;\n  }\n\n  @Watch('height')\n  @Watch('width')\n  @Watch('padding')\n  @Watch('margin')\n  layoutWatcher(_newVal, _oldVal) {\n    this.shouldUpdateLayout = true;\n    this.shouldUpdateData = true;\n    this.shouldResetRoot = true;\n    this.shouldUpdateGeometries = true;\n    this.shouldUpdateScales = true;\n    this.shouldSetPieRadius = true;\n    this.shouldSetGlobalSelections = true;\n    this.shouldEnterUpdateExit = true;\n    this.shouldUpdateLabels = true;\n    this.shouldUpdateEdgeLines = true;\n    this.shouldUpdateReferenceLines = true;\n    this.shouldUpdateAnnotations = true;\n  }\n\n  @Watch('data')\n  dataWatcher(_newVal, _oldVal) {\n    this.updated = true;\n    this.shouldUpdateData = true;\n    this.shouldSetGlobalSelections = true;\n    this.shouldSetTestingAttributes = true;\n    this.shouldEnterUpdateExit = true;\n    this.shouldDrawInteractionState = true;\n    this.shouldUpdateTableData = true;\n    this.shouldValidate = true;\n    this.shouldUpdateGeometries = true;\n    this.shouldUpdateEdgeLines = true;\n    this.shouldUpdateLabels = true;\n    this.shouldUpdateReferenceLines = true;\n    this.shouldUpdateAnnotations = true;\n    this.shouldSetGeometryAccessibilityAttributes = true;\n    this.shouldSetGeometryAriaLabels = true;\n    this.shouldSetTextures = true;\n    this.shouldSetStrokes = true;\n    this.shouldSetColors = true;\n    this.shouldCheckLabelColor = true;\n  }\n\n  @Watch('uniqueID')\n  idWatcher(newVal, _oldVal) {\n    console.error(\n      'Change detected in prop uniqueID from value ' +\n        _oldVal +\n        ' to value ' +\n        newVal +\n        '. This prop cannot be changed after component has loaded.'\n    );\n    // this.chartID = newVal || 'pie-chart-' + uuid();\n    // this.pieChartEl.id = this.chartID;\n    // this.shouldValidate = true;\n    // this.shouldUpdateDescriptionWrapper = true;\n    // this.shouldSetParentSVGAccessibility = true;\n    // this.shouldSetTextures = true;\n    // this.shouldCheckLabelColor = true;\n    // this.shouldDrawInteractionState = true;\n    // this.shouldSetStrokes = true;\n  }\n\n  @Watch('ordinalAccessor')\n  ordinalAccessorWatcher(_newVal, _oldVal) {\n    this.shouldValidate = true;\n    this.shouldUpdateData = true;\n    this.shouldSetGlobalSelections = true;\n    this.shouldUpdateTableData = true;\n    this.shouldUpdateGeometries = true;\n    this.shouldDrawInteractionState = true;\n    this.shouldUpdateEdgeLines = true;\n    this.shouldUpdateReferenceLines = true;\n    this.shouldSetGeometryAriaLabels = true;\n    this.shouldSetLabelOpacity = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldSetTextures = true;\n    this.shouldSetStrokes = true;\n    if (!(this.interactionKeys && this.interactionKeys.length)) {\n      this.shouldValidateInteractionKeys = true;\n      this.shouldSetSelectionClass = true;\n    }\n  }\n\n  @Watch('valueAccessor')\n  valueAccessorWatcher(_newVal, _oldVal) {\n    this.shouldValidate = true;\n    this.shouldUpdateData = true;\n    this.shouldUpdateScales = true;\n    this.shouldSetGlobalSelections = true;\n    this.shouldUpdateTableData = true;\n    this.shouldUpdateGeometries = true;\n    this.shouldUpdateEdgeLines = true;\n    this.shouldDrawInteractionState = true;\n    this.shouldSetLabelOpacity = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldUpdateLabels = true;\n    this.shouldUpdateReferenceLines = true;\n    this.shouldUpdateAnnotations = true;\n    this.shouldSetGeometryAriaLabels = true;\n  }\n\n  @Watch('sortOrder')\n  sortWatcher(_newVal, _oldVal) {\n    this.updated = true;\n    this.shouldUpdateData = true;\n    this.shouldSetGlobalSelections = true;\n    this.shouldSetTestingAttributes = true;\n    this.shouldEnterUpdateExit = true;\n    this.shouldDrawInteractionState = true;\n    this.shouldUpdateTableData = true;\n    this.shouldUpdateGeometries = true;\n    this.shouldUpdateEdgeLines = true;\n    this.shouldUpdateLabels = true;\n    this.shouldUpdateReferenceLines = true;\n    this.shouldUpdateAnnotations = true;\n    this.shouldSetGeometryAccessibilityAttributes = true;\n    this.shouldSetGeometryAriaLabels = true;\n  }\n\n  @Watch('colorPalette')\n  paletteWatcher(_newVal, _oldVal) {\n    this.shouldSetColors = true;\n    this.shouldDrawInteractionState = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldSetTextures = true;\n    this.shouldSetStrokes = true;\n  }\n\n  @Watch('colors')\n  colorsWatcher(_newVal, _oldVal) {\n    this.shouldSetColors = true;\n    this.shouldDrawInteractionState = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldSetTextures = true;\n    this.shouldSetStrokes = true;\n  }\n\n  @Watch('innerRatio')\n  innerRatioWatcher(_newVal, _oldVal) {\n    this.shouldSetPieRadius = true;\n    this.shouldUpdateData = true;\n    this.shouldUpdateInnerRatio = true;\n    this.shouldUpdateGeometries = true;\n    this.shouldUpdateEdgeLines = true;\n    this.shouldUpdateReferenceLines = true;\n  }\n\n  @Watch('showEdgeLine')\n  showEdgeLineWatcher(_newVal, _oldVal) {\n    this.shouldUpdateEdgeLines = true;\n  }\n\n  @Watch('referenceStyle')\n  referenceWatcher(_newVal, _oldVal) {\n    this.shouldUpdateReferenceLines = true;\n  }\n\n  @Watch('hoverOpacity')\n  hoverOpacityWatcher(_newVal, _oldVal) {\n    this.shouldDrawInteractionState = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldSetLabelOpacity = true;\n  }\n\n  @Watch('cursor')\n  cursorWatcher(_newVal, _oldVal) {\n    this.shouldUpdateCursor = true;\n  }\n\n  @Watch('showPercentage')\n  showPercentageWatcher(_newVal, _oldVal) {\n    this.shouldUpdateLabels = true;\n    this.shouldSetGeometryAriaLabels = true;\n    this.shouldUpdateTableData = true;\n  }\n\n  @Watch('showTooltip')\n  showTooltipWatcher(_newVal, _oldVal) {\n    this.shouldDrawInteractionState = true;\n  }\n\n  @Watch('tooltipLabel')\n  tooltipLabelWatcher(_newVal, _oldVal) {\n    this.shouldValidate = true;\n    this.shouldUpdateTableData = true;\n    this.shouldSetParentSVGAccessibility = true;\n    this.shouldSetGeometryAriaLabels = true;\n  }\n\n  @Watch('dataLabel')\n  labelWatcher(_newVal, _oldVal) {\n    this.shouldUpdateLabels = true;\n    this.shouldValidate = true;\n    this.shouldUpdateTableData = true;\n    const newPlacementVal = _newVal && _newVal.placement ? _newVal.placement : false;\n    const oldPlacementVal = _oldVal && _oldVal.placement ? _oldVal.placement : false;\n    const newVisibleVal = _newVal && _newVal.visible;\n    const oldVisibleVal = _oldVal && _oldVal.visible;\n    if (newVisibleVal !== oldVisibleVal) {\n      this.shouldSetLabelOpacity = true;\n    }\n    if (newPlacementVal !== oldPlacementVal) {\n      this.shouldSetLabelOpacity = true;\n      this.shouldCheckLabelColor = true;\n    }\n  }\n\n  @Watch('showLabelNote')\n  labelNoteWatcher(_newVal, _oldVal) {\n    this.shouldSetLabelOpacity = true;\n    this.shouldUpdateLabels = true;\n  }\n\n  @Watch('labelOffset')\n  labelOffsetWatcher(_newVal, _oldVal) {\n    this.shouldUpdateLabels = true;\n  }\n\n  @Watch('localization')\n  localizationWatcher(_newVal, _oldVal) {\n    this.shouldValidate = true;\n\n    // language\n    const newLanguage = _newVal && _newVal.language ? _newVal.language : false;\n    const oldLanguage = _oldVal && _oldVal.language ? _oldVal.language : false;\n    if (newLanguage !== oldLanguage) {\n      this.shouldSetLocalizationConfig = true;\n      this.shouldUpdateTableData = true;\n      this.shouldCheckLabelColor = true;\n      this.shouldRedrawWrapper = true;\n      this.shouldUpdateDescriptionWrapper = true;\n      this.shouldSetChartAccessibilityCount = true;\n      this.shouldUpdateDescriptionWrapper = true;\n      this.shouldSetGeometryAriaLabels = true;\n      this.shouldSetParentSVGAccessibility = true;\n    }\n\n    // numeralLocale\n    const newNumeralLocale = _newVal && _newVal.numeralLocale ? _newVal.numeralLocale : false;\n    const oldNumeralLocale = _oldVal && _oldVal.numeralLocale ? _oldVal.numeralLocale : false;\n    if (newNumeralLocale !== oldNumeralLocale) {\n      this.shouldSetLocalizationConfig = true;\n      this.shouldUpdateTableData = true;\n      this.shouldCheckLabelColor = true;\n      this.shouldRedrawWrapper = true;\n      this.shouldUpdateDescriptionWrapper = true;\n      this.shouldSetChartAccessibilityCount = true;\n      this.shouldUpdateDescriptionWrapper = true;\n      this.shouldSetGeometryAriaLabels = true;\n      this.shouldSetParentSVGAccessibility = true;\n    }\n  }\n\n  @Watch('accessibility')\n  accessibilityWatcher(_newVal, _oldVal) {\n    this.shouldValidate = true;\n    const newTitle = _newVal && _newVal.title ? _newVal.title : false;\n    const oldTitle = _oldVal && _oldVal.title ? _oldVal.title : false;\n    if (newTitle !== oldTitle) {\n      this.shouldUpdateDescriptionWrapper = true;\n      this.shouldSetChartAccessibilityTitle = true;\n      this.shouldSetParentSVGAccessibility = true;\n    }\n    const newExecutiveSummary = _newVal && _newVal.executiveSummary ? _newVal.executiveSummary : false;\n    const oldExecutiveSummary = _oldVal && _oldVal.executiveSummary ? _oldVal.executiveSummary : false;\n    if (newExecutiveSummary !== oldExecutiveSummary) {\n      this.shouldSetChartAccessibilityExecutiveSummary = true;\n    }\n    const newPurpose = _newVal && _newVal.purpose ? _newVal.purpose : false;\n    const oldPurpose = _oldVal && _oldVal.purpose ? _oldVal.purpose : false;\n    if (newPurpose !== oldPurpose) {\n      this.shouldSetChartAccessibilityPurpose = true;\n    }\n    const newLongDescription = _newVal && _newVal.longDescription ? _newVal.longDescription : false;\n    const oldLongDescription = _oldVal && _oldVal.longDescription ? _oldVal.longDescription : false;\n    if (newLongDescription !== oldLongDescription) {\n      this.shouldSetChartAccessibilityLongDescription = true;\n    }\n    const newContext = _newVal && _newVal.contextExplanation ? _newVal.contextExplanation : false;\n    const oldContext = _oldVal && _oldVal.contextExplanation ? _oldVal.contextExplanation : false;\n    if (newContext !== oldContext) {\n      this.shouldSetChartAccessibilityContext = true;\n    }\n    const newStatisticalNotes = _newVal && _newVal.statisticalNotes ? _newVal.statisticalNotes : false;\n    const oldStatisticalNotes = _oldVal && _oldVal.statisticalNotes ? _oldVal.statisticalNotes : false;\n    if (newStatisticalNotes !== oldStatisticalNotes) {\n      this.shouldSetChartAccessibilityStatisticalNotes = true;\n    }\n    const newStructureNotes = _newVal && _newVal.structureNotes ? _newVal.structureNotes : false;\n    const oldStructureNotes = _oldVal && _oldVal.structureNotes ? _oldVal.structureNotes : false;\n    if (newStructureNotes !== oldStructureNotes) {\n      this.shouldSetChartAccessibilityStructureNotes = true;\n    }\n    const newincludeDataKeyNames = _newVal && _newVal.includeDataKeyNames;\n    const oldincludeDataKeyNames = _oldVal && _oldVal.includeDataKeyNames;\n    const newElementDescriptionAccessor =\n      _newVal && _newVal.elementDescriptionAccessor ? _newVal.elementDescriptionAccessor : false;\n    const oldElementDescriptionAccessor =\n      _oldVal && _oldVal.elementDescriptionAccessor ? _oldVal.elementDescriptionAccessor : false;\n    if (\n      newincludeDataKeyNames !== oldincludeDataKeyNames ||\n      newElementDescriptionAccessor !== oldElementDescriptionAccessor\n    ) {\n      if (newincludeDataKeyNames !== oldincludeDataKeyNames) {\n        // this one is tricky because it needs to run after the lifecycle\n        // AND it could run in the off-chance this prop is changed\n        this.shouldSetGroupAccessibilityLabel = true;\n      }\n      this.shouldSetGeometryAriaLabels = true;\n      this.shouldSetParentSVGAccessibility = true;\n    }\n    const newTextures = _newVal && _newVal.hideTextures ? _newVal.hideTextures : false;\n    const oldTextures = _oldVal && _oldVal.hideTextures ? _oldVal.hideTextures : false;\n    if (newTextures !== oldTextures) {\n      this.shouldSetTextures = true;\n      this.shouldDrawInteractionState = true;\n    }\n    const newSmallValue = _newVal && _newVal.showSmallLabels ? _newVal.showSmallLabels : false;\n    const oldSmallValue = _oldVal && _oldVal.showSmallLabels ? _oldVal.showSmallLabels : false;\n    if (newSmallValue !== oldSmallValue) {\n      this.shouldSetLabelOpacity = true;\n    }\n    const newStrokes = _newVal && _newVal.hideStrokes ? _newVal.hideStrokes : false;\n    const oldStrokes = _oldVal && _oldVal.hideStrokes ? _oldVal.hideStrokes : false;\n    if (newStrokes !== oldStrokes) {\n      this.shouldSetStrokes = true;\n      this.shouldDrawInteractionState = true;\n    }\n    const newKeyNav =\n      _newVal && _newVal.keyboardNavConfig && _newVal.keyboardNavConfig.disabled\n        ? _newVal.keyboardNavConfig.disabled\n        : false;\n    const oldKeyNav =\n      _oldVal && _oldVal.keyboardNavConfig && _oldVal.keyboardNavConfig.disabled\n        ? _oldVal.keyboardNavConfig.disabled\n        : false;\n    const newInterface = _newVal && _newVal.elementsAreInterface ? _newVal.elementsAreInterface : false;\n    const oldInterface = _oldVal && _oldVal.elementsAreInterface ? _oldVal.elementsAreInterface : false;\n    if (newKeyNav !== oldKeyNav || newInterface !== oldInterface) {\n      this.shouldSetGeometryAriaLabels = true;\n      this.shouldSetParentSVGAccessibility = true;\n      this.shouldUpdateDescriptionWrapper = true;\n      this.shouldRedrawWrapper = true;\n      this.shouldSetChartAccessibilityTitle = true;\n      this.shouldSetChartAccessibilitySubtitle = true;\n      this.shouldSetChartAccessibilityLongDescription = true;\n      this.shouldSetChartAccessibilityContext = true;\n      this.shouldSetChartAccessibilityExecutiveSummary = true;\n      this.shouldSetChartAccessibilityPurpose = true;\n      this.shouldSetChartAccessibilityStatisticalNotes = true;\n      this.shouldSetChartAccessibilityStructureNotes = true;\n    }\n    if (newInterface !== oldInterface) {\n      this.shouldSetSelectionClass = true;\n    }\n  }\n\n  @Watch('annotations')\n  annotationsWatcher(_newVal, _oldVal) {\n    this.shouldValidate = true;\n    this.shouldUpdateAnnotations = true;\n    this.shouldSetAnnotationAccessibility = true;\n  }\n\n  @Watch('referenceData')\n  referenceDataWatcher(_newVal, _oldVal) {\n    this.shouldValidate = true;\n    this.shouldUpdateReferenceLines = true;\n    this.shouldUpdateTableData = true;\n    this.shouldSetAnnotationAccessibility = true;\n  }\n\n  @Watch('suppressEvents')\n  suppressWatcher(_newVal, _oldVal) {\n    this.shouldBindInteractivity = true;\n    this.shouldUpdateCursor = true;\n    this.shouldSetGeometryAriaLabels = true;\n    this.shouldSetParentSVGAccessibility = true;\n    this.shouldUpdateDescriptionWrapper = true;\n    this.shouldRedrawWrapper = true;\n    this.shouldValidate = true;\n    this.shouldSetSubTitle = true;\n    this.shouldSetChartAccessibilityTitle = true;\n    this.shouldSetChartAccessibilitySubtitle = true;\n    this.shouldSetChartAccessibilityLongDescription = true;\n    this.shouldSetChartAccessibilityContext = true;\n    this.shouldSetChartAccessibilityExecutiveSummary = true;\n    this.shouldSetChartAccessibilityPurpose = true;\n    this.shouldSetChartAccessibilityStatisticalNotes = true;\n    this.shouldSetChartAccessibilityStructureNotes = true;\n  }\n\n  @Watch('clickStyle')\n  clickStyleWatcher(_newVal, _oldVal) {\n    this.shouldDrawInteractionState = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldSetLabelOpacity = true;\n    this.shouldSetStrokes = true;\n  }\n  @Watch('hoverStyle')\n  hoverStyleWatcher(_newVal, _oldVal) {\n    this.shouldDrawInteractionState = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldSetLabelOpacity = true;\n    this.shouldSetStrokes = true;\n  }\n\n  @Watch('clickHighlight')\n  clickWatcher(_newVal, _oldVal) {\n    this.shouldDrawInteractionState = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldSetLabelOpacity = true;\n    this.shouldSetSelectionClass = true;\n  }\n\n  @Watch('hoverHighlight')\n  hoverWatcher(_newVal, _oldVal) {\n    this.shouldDrawInteractionState = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldSetLabelOpacity = true;\n  }\n\n  @Watch('interactionKeys')\n  interactionWatcher(_newVal, _oldVal) {\n    this.shouldValidateInteractionKeys = true;\n    this.shouldDrawInteractionState = true;\n    this.shouldCheckLabelColor = true;\n    this.shouldSetLabelOpacity = true;\n    this.shouldSetSelectionClass = true;\n    this.shouldSetGeometryAriaLabels = true;\n    this.shouldUpdateTableData = true;\n  }\n\n  @Watch('dataKeyNames')\n  dataKeyNamesWatcher(_newVal, _oldVal) {\n    this.shouldSetParentSVGAccessibility = true;\n    this.shouldSetGroupAccessibilityLabel = true;\n    this.shouldSetGeometryAriaLabels = true;\n    this.shouldUpdateTableData = true;\n  }\n\n  @Watch('unitTest')\n  unitTestWatcher(_newVal, _oldVal) {\n    this.shouldSetTestingAttributes = true;\n  }\n\n  componentWillLoad() {\n    const chartID = this.uniqueID || 'pie-chart-' + uuid();\n    this.initialLoadEvent.emit({ chartID: chartID });\n    // contrary to componentWillUpdate, this method appears safe to use for\n    // any calculations we need. Keeping them here reduces future refactor,\n    // since componentWillUpdate should eventually mirror this method\n    return new Promise(resolve => {\n      this.duration = 0;\n      this.chartID = chartID;\n      this.pieChartEl.id = this.chartID;\n      this.setLocalizationConfig();\n      this.setTagLevels();\n      this.prepareScales();\n      this.prepareData();\n      this.setLayoutData();\n      this.setPieRadius();\n      this.validateInteractionKeys();\n      this.setTableData();\n      this.shouldValidateAccessibilityProps();\n      this.shouldValidateLocalizationProps();\n      this.setColors();\n      resolve('component will load');\n    });\n  }\n\n  componentWillUpdate() {\n    // NEVER put items in this method (until stencil bug is resolved)\n    // All items that belong here are currently at the top of componentDidUpdate\n    // see: https://github.com/ionic-team/stencil/issues/2061#issuecomment-578282178\n    return new Promise(resolve => {\n      resolve('component will update');\n    });\n  }\n\n  componentDidLoad() {\n    return new Promise(resolve => {\n      this.defaults = true;\n      this.shouldValidateAccessibilityProps();\n      this.shouldValidateLocalizationProps();\n      this.renderRootElements();\n      this.setTooltipInitialStyle();\n      this.setChartDescriptionWrapper();\n      this.setChartAccessibilityTitle();\n      this.setChartAccessibilitySubtitle();\n      this.setChartAccessibilityLongDescription();\n      this.setChartAccessibilityExecutiveSummary();\n      this.setChartAccessibilityPurpose();\n      this.setChartAccessibilityContext();\n      this.setChartAccessibilityStatisticalNotes();\n      this.setChartAccessibilityStructureNotes();\n      this.setParentSVGAccessibility();\n      this.reSetRoot();\n      this.setTextures();\n      this.setStrokes();\n      this.setSubTitleElements();\n      this.setGlobalSelections();\n      this.setTestingAttributes();\n      this.setColors();\n      this.setInnerRatio();\n      this.enterGeometries();\n      this.updateGeometries();\n      this.exitGeometries();\n      this.enterLabels('Labels');\n      this.updateLabels('Labels');\n      this.exitLabels('Labels');\n      this.enterEdgeLine();\n      this.updateEdgeLine('Edges');\n      this.exitEdgeLine();\n      this.enterLabels('RefLabels');\n      this.updateLabels('RefLabels');\n      this.exitLabels('RefLabels');\n      this.drawGeometries();\n      this.drawEdgeLine();\n      this.drawReferenceLines();\n      this.drawCenterTitle();\n      this.drawDataLabels('Labels');\n      this.drawDataLabels('RefLabels');\n      this.setChartCountAccessibility();\n      this.setGeometryAccessibilityAttributes();\n      this.setGeometryAriaLabels();\n      this.setSelectedClass();\n      // this.updateInteractionState();\n      // this.setLabelOpacity();\n      // this.checkLabelColorAgainstBackground();\n      this.updateCursor();\n      this.bindInteractivity();\n      this.drawAnnotations();\n      this.setAnnotationAccessibility();\n      this.onChangeHandler();\n      hideNonessentialGroups(this.root.node(), this.pieG.node());\n      this.setGroupAccessibilityAttributes();\n      this.setGroupAccessibilityID();\n      this.defaults = false;\n      resolve('component did load');\n    }).then(() => this.initialLoadEndEvent.emit({ chartID: this.chartID }));\n  }\n\n  componentDidUpdate() {\n    return new Promise(resolve => {\n      this.duration = !this.animationConfig || !this.animationConfig.disabled ? 750 : 0;\n      if (this.shouldUpdateDescriptionWrapper) {\n        this.setChartDescriptionWrapper();\n        this.shouldUpdateDescriptionWrapper = false;\n      }\n      if (this.shouldSetChartAccessibilityCount) {\n        this.setChartCountAccessibility();\n        this.shouldSetChartAccessibilityCount = false;\n      }\n      if (this.shouldSetChartAccessibilityTitle) {\n        this.setChartAccessibilityTitle();\n        this.shouldSetChartAccessibilityTitle = false;\n      }\n      if (this.shouldSetChartAccessibilitySubtitle) {\n        this.setChartAccessibilitySubtitle();\n        this.shouldSetChartAccessibilitySubtitle = false;\n      }\n      if (this.shouldSetChartAccessibilityLongDescription) {\n        this.setChartAccessibilityLongDescription();\n        this.shouldSetChartAccessibilityLongDescription = false;\n      }\n      if (this.shouldSetChartAccessibilityExecutiveSummary) {\n        this.setChartAccessibilityExecutiveSummary();\n        this.shouldSetChartAccessibilityExecutiveSummary = false;\n      }\n      if (this.shouldSetChartAccessibilityPurpose) {\n        this.setChartAccessibilityPurpose();\n        this.shouldSetChartAccessibilityPurpose = false;\n      }\n      if (this.shouldSetChartAccessibilityContext) {\n        this.setChartAccessibilityContext();\n        this.shouldSetChartAccessibilityContext = false;\n      }\n      if (this.shouldSetChartAccessibilityStatisticalNotes) {\n        this.setChartAccessibilityStatisticalNotes();\n        this.shouldSetChartAccessibilityStatisticalNotes = false;\n      }\n      if (this.shouldSetChartAccessibilityStructureNotes) {\n        this.setChartAccessibilityStructureNotes();\n        this.shouldSetChartAccessibilityStructureNotes = false;\n      }\n      if (this.shouldSetParentSVGAccessibility) {\n        this.setParentSVGAccessibility();\n        this.shouldSetParentSVGAccessibility = false;\n      }\n      if (this.shouldResetRoot) {\n        this.reSetRoot();\n        this.shouldResetRoot = false;\n      }\n      if (this.shouldSetTextures) {\n        this.setTextures();\n        this.shouldSetTextures = false;\n      }\n      if (this.shouldSetStrokes) {\n        this.setStrokes();\n        this.shouldSetStrokes = false;\n      }\n      if (this.shouldSetGlobalSelections) {\n        this.setGlobalSelections();\n        this.shouldSetGlobalSelections = false;\n      }\n      if (this.shouldSetTestingAttributes) {\n        this.setTestingAttributes();\n        this.shouldSetTestingAttributes = false;\n      }\n      if (this.shouldSetSubTitle) {\n        this.setSubTitleElements();\n        this.shouldSetSubTitle = false;\n      }\n      if (this.shouldEnterUpdateExit) {\n        this.enterGeometries();\n        this.updateGeometries();\n        this.exitGeometries();\n        this.enterEdgeLine();\n        this.updateEdgeLine('Edges');\n        this.exitEdgeLine();\n        this.enterLabels('Labels');\n        this.updateLabels('Labels');\n        this.exitLabels('Labels');\n        this.enterLabels('RefLabels');\n        this.updateLabels('RefLabels');\n        this.exitLabels('RefLabels');\n        this.shouldEnterUpdateExit = false;\n      }\n      if (this.shouldUpdateReferenceLines) {\n        this.drawReferenceLines();\n        this.shouldUpdateReferenceLines = false;\n      }\n      if (this.shouldUpdateGeometries) {\n        this.drawGeometries();\n        this.shouldUpdateGeometries = false;\n      }\n      if (this.shouldUpdateEdgeLines) {\n        this.updateEdgeLine('Edges');\n        this.drawEdgeLine();\n        this.shouldUpdateEdgeLines = false;\n      }\n      if (this.shouldUpdateCenterTitle) {\n        this.drawCenterTitle();\n        this.shouldUpdateCenterTitle = false;\n      }\n      if (this.shouldUpdateLabels) {\n        this.drawDataLabels('Labels');\n        this.drawDataLabels('RefLabels');\n        this.shouldUpdateLabels = false;\n      }\n      if (this.shouldSetGeometryAccessibilityAttributes) {\n        this.setGeometryAccessibilityAttributes();\n        this.shouldSetGeometryAccessibilityAttributes = false;\n      }\n      if (this.shouldSetGeometryAriaLabels) {\n        this.setGeometryAriaLabels();\n        this.shouldSetGeometryAriaLabels = false;\n      }\n      if (this.shouldSetGroupAccessibilityLabel) {\n        this.setGroupAccessibilityID();\n        this.shouldSetGroupAccessibilityLabel = false;\n      }\n      if (this.shouldDrawInteractionState) {\n        this.updateInteractionState();\n        this.shouldDrawInteractionState = false;\n      }\n      if (this.shouldSetLabelOpacity) {\n        this.setLabelOpacity();\n        this.shouldSetLabelOpacity = false;\n      }\n      if (this.shouldCheckLabelColor) {\n        this.checkLabelColorAgainstBackground('Labels');\n        this.checkLabelColorAgainstBackground('RefLabels');\n        this.shouldCheckLabelColor = false;\n      }\n      if (this.shouldSetSelectionClass) {\n        this.setSelectedClass();\n        this.shouldSetSelectionClass = false;\n      }\n      if (this.shouldUpdateCursor) {\n        this.updateCursor();\n        this.shouldUpdateCursor = false;\n      }\n      if (this.shouldBindInteractivity) {\n        this.bindInteractivity();\n        this.shouldBindInteractivity = false;\n      }\n      if (this.shouldUpdateAnnotations) {\n        this.drawAnnotations();\n        this.shouldUpdateAnnotations = false;\n      }\n      if (this.shouldSetAnnotationAccessibility) {\n        this.setAnnotationAccessibility();\n        this.shouldSetAnnotationAccessibility = false;\n      }\n      this.onChangeHandler();\n      resolve('component did update');\n    }).then(() => this.drawEndEvent.emit({ chartID: this.chartID }));\n  }\n\n  shouldValidateLocalizationProps() {\n    const windowInstances = getGlobalInstances();\n    const languageString = windowInstances.i18Next.language;\n    const languageObject = windowInstances.i18Next.getResourceBundle(languageString);\n    const numeralObject = windowInstances.numeral.localeData();\n    if (this.shouldValidateLocalization && !this.localization.skipValidation) {\n      this.shouldValidateLocalization = false;\n      validateLocalizationProps(this.chartID, {\n        ...this.localization,\n        language: languageObject,\n        numeralLocale: numeralObject\n      });\n    }\n  }\n\n  shouldValidateAccessibilityProps() {\n    if (this.shouldValidateAccessibility && !this.accessibility.disableValidation) {\n      this.shouldValidateAccessibility = false;\n      const NORMALIZED = 'normalized';\n      validateAccessibilityProps(this.chartID, this.accessibility, {\n        annotations: this.annotations,\n        data: this.data,\n        uniqueID: this.uniqueID,\n        context: {\n          mainTitle: this.mainTitle,\n          onClickEvent: this.suppressEvents ? undefined : this.clickEvent.emit,\n          tooltipLabel: this.tooltipLabel,\n          dataLabel: this.dataLabel,\n          valueAccessor: this.valueAccessor\n        },\n        misc: {\n          normalized: this.hasOwnProperty(NORMALIZED) ? this[NORMALIZED] : false\n        }\n      });\n    }\n  }\n\n  validateInteractionKeys() {\n    this.innerInteractionKeys =\n      // this.interactionKeys ? '' : (this.interactionKeys = [this.ordinalAccessor]);\n      this.interactionKeys && this.interactionKeys.length ? this.interactionKeys : [this.ordinalAccessor];\n  }\n\n  getLanguageString() {\n    return getActiveLanguageString(this.localization);\n  }\n\n  setLocalizationConfig() {\n    configLocalization(this.localization);\n  }\n\n  setLayoutData() {\n    this.padding = typeof this.padding === 'string' ? getPadding(this.padding) : this.padding;\n\n    this.innerHeight = this.height - this.margin.top - this.margin.bottom;\n    this.innerWidth = this.width - this.margin.left - this.margin.right;\n\n    this.innerPaddedHeight = this.innerHeight - this.padding.top - this.padding.bottom;\n    this.innerPaddedWidth = this.innerWidth - this.padding.left - this.padding.right;\n  }\n\n  setPieRadius() {\n    this.radius = Math.min(this.innerPaddedWidth, this.innerPaddedHeight) / 2;\n\n    // this.pieData.forEach(d => {\n    //   this.innerRadius = this.radius * this.innerRatio;\n    //   this.outerRadius = this.radius;\n    // });\n\n    this.innerRadius = this.radius * this.innerRatio;\n    this.outerRadius = this.radius;\n  }\n\n  prepareData() {\n    if (this.data) {\n      if (this.sortOrder === 'asc') {\n        this.preppedData = [...this.data].sort((a, b) => Number(a[this.valueAccessor]) - Number(b[this.valueAccessor]));\n      } else if (this.sortOrder === 'desc') {\n        this.preppedData = [...this.data].sort((a, b) => Number(b[this.valueAccessor]) - Number(a[this.valueAccessor]));\n      } else {\n        this.preppedData = this.data;\n      }\n      let dataSum = 0;\n      this.preppedData.map(d => {\n        d[this.valueAccessor] = parseFloat(d[this.valueAccessor]);\n        dataSum += d[this.valueAccessor];\n        d.getSum = () => dataSum; // sum(this.preppedData, d => parseFloat(d[this.valueAccessor]));\n        // d['rowSum'] = sum(this.preppedData, d => parseFloat(d[this.valueAccessor]));\n      });\n    }\n\n    this.refArr = [];\n    if (this.referenceData && this.referenceData.length) {\n      let dataTotal = 0;\n      this.preppedData.map(k => (dataTotal += k[this.valueAccessor]));\n      this.referenceData.forEach(d => {\n        const refPrep = [];\n        refPrep.push(d);\n        refPrep.push({\n          [this.ordinalAccessor]: '',\n          [this.valueAccessor]: dataTotal - d[this.valueAccessor]\n        });\n        const refPie = this.pie(refPrep);\n        this.refArr.push({ ...refPie[0] });\n      });\n    }\n\n    this.pieData = this.pie(this.preppedData);\n    this.refData = this.refArr;\n  }\n\n  prepareScales() {\n    this.pie = pie()\n      .value(data => {\n        return data[this.valueAccessor];\n      })\n      .sort((_a, _b) => null);\n\n    this.arc = arc();\n  }\n\n  setTableData() {\n    // generate scoped and formatted data for data-table component\n    const keys = scopeDataKeys(this, chartAccessors, 'pie-chart');\n    if (this.showPercentage) {\n      const label =\n        this.dataKeyNames && (this.dataKeyNames[`${this.valueAccessor}`] || this.dataKeyNames[`${this.valueAccessor}%`])\n          ? this.dataKeyNames[`${this.valueAccessor}%`] || this.dataKeyNames[`${this.valueAccessor}`] + ' (%)'\n          : `${this.valueAccessor}%`;\n      keys[label] = '0[.][0][0]%';\n      this.preppedData.forEach(i => {\n        i[label] = i[`${this.valueAccessor}`] / i.getSum();\n      });\n    }\n    this.tableData = getScopedData(this.preppedData, keys);\n    this.tableColumns = Object.keys(keys);\n  }\n\n  setSubTitleElements() {\n    setSubTitle({\n      root: this.subTitleG,\n      subTitle: this.subTitle\n    });\n  }\n\n  setColors() {\n    const colorFromProps =\n      this.colors && this.colors.length\n        ? convertVisaColor(this.colors)\n        : getColors(this.colorPalette, this.preppedData.length - 1);\n    if (!this.colors || !this.colors.length) {\n      colorFromProps.push(visaColors.base_grey);\n    }\n    this.preparedColors = colorFromProps;\n  }\n\n  setTextures() {\n    const colorsArray = this.preparedColors.range ? this.preparedColors.range() : this.preparedColors;\n    if (this.accessibility.hideTextures || colorsArray.length > 6) {\n      this.colorArr = this.preparedColors;\n    } else {\n      const textures = convertColorsToTextures({\n        colors: colorsArray,\n        rootSVG: this.svg.node(),\n        id: this.chartID,\n        scheme: 'categorical',\n        disableTransitions: !this.duration\n      });\n      this.colorArr = this.preparedColors.range ? this.preparedColors.copy().range(textures) : textures;\n    }\n  }\n\n  setStrokes() {\n    this.strokes = buildStrokes({\n      root: this.svg.node(),\n      id: this.chartID,\n      colors: this.preparedColors.range ? this.preparedColors.range() : this.preparedColors,\n      clickStyle: this.clickStyle,\n      hoverStyle: this.hoverStyle,\n      stacked: true\n    });\n  }\n\n  setInnerRatio() {\n    this.innerRatio = this.innerRatio === 0 || this.innerRatio ? this.innerRatio : PieChartDefaultValues.innerRatio;\n  }\n\n  setTestingAttributes() {\n    if (this.unitTest) {\n      select(this.pieChartEl)\n        .select('.visa-viz-d3-pie-container')\n        .attr('data-testid', 'chart-container');\n      select(this.pieChartEl)\n        .select('.pie-main-title')\n        .attr('data-testid', 'main-title');\n      select(this.pieChartEl)\n        .select('.pie-sub-title')\n        .attr('data-testid', 'sub-title');\n      this.svg.attr('data-testid', 'root-svg');\n      this.root.attr('data-testid', 'margin-container');\n      this.rootG.attr('data-testid', 'padding-container');\n      // this.legendG.attr('data-testid', 'legend-container'); // pie does not have a legend yet?\n      this.tooltipG.attr('data-testid', 'tooltip-container');\n      this.pieG.attr('data-testid', 'pie-group');\n      this.labelG.attr('data-testid', 'dataLabel-group');\n      this.refLabelG.attr('data-testid', 'refDataLabel-group');\n      this.edgeG.attr('data-testid', 'edgeLine-group');\n      this.rootG.select('.pie-center-title-group').attr('data-testid', 'centerTitle-group');\n      this.svg.select('defs').attr('data-testid', 'pattern-defs');\n\n      this.updatingLabels.attr('data-testid', 'dataLabel').attr('data-id', d => `label-${d[this.ordinalAccessor]}`);\n      this.updatingLabelsNotes\n        .attr('data-testid', 'dataLabel-note')\n        .attr('data-id', d => `label-note-${d[this.ordinalAccessor]}`);\n      this.updatingEdges\n        .attr('data-testid', 'pie-edge-line')\n        .attr('data-id', d => `pie-edge-line-${d[this.ordinalAccessor]}`);\n      this.update.attr('data-testid', 'pie').attr('data-id', d => `pie-${d[this.ordinalAccessor]}`);\n\n      // reference lines do not have global selections\n      this.references.selectAll('.arc-ref').attr('data-testid', 'reference-arc-line');\n      this.updatingRefLabels\n        .attr('data-testid', 'refDataLabel')\n        .attr('data-id', d => `ref-label-${d[this.ordinalAccessor]}`);\n      this.updatingRefLabelsNotes\n        .attr('data-testid', 'refDataLabel-note')\n        .attr('data-id', d => `ref-label-note-${d[this.ordinalAccessor]}`);\n    } else {\n      select(this.pieChartEl)\n        .select('.visa-viz-d3-pie-container')\n        .attr('data-testid', null);\n      select(this.pieChartEl)\n        .select('.pie-main-title')\n        .attr('data-testid', null);\n      select(this.pieChartEl)\n        .select('.pie-sub-title')\n        .attr('data-testid', null);\n      this.svg.attr('data-testid', null);\n      this.root.attr('data-testid', null);\n      this.rootG.attr('data-testid', null);\n      // this.legendG.attr('data-testid', null); //  pie does not have a legend yet?\n      this.tooltipG.attr('data-testid', null);\n      this.pieG.attr('data-testid', null);\n      this.labelG.attr('data-testid', null);\n      this.refLabelG.attr('data-testid', null);\n      this.edgeG.attr('data-testid', null);\n      this.rootG.select('.pie-center-title-group').attr('data-testid', null);\n      this.svg.select('defs').attr('data-testid', null);\n\n      this.updatingLabels.attr('data-testid', null).attr('data-id', null);\n      this.updatingLabelsNotes.attr('data-testid', null).attr('data-id', null);\n      this.updatingEdges.attr('data-testid', null).attr('data-id', null);\n      this.update.attr('data-testid', null).attr('data-id', null);\n\n      // reference lines do not have global selections\n      this.references.selectAll('.arc-ref').attr('data-testid', null);\n      this.updatingRefLabels.attr('data-testid', null).attr('data-id', null);\n      this.updatingRefLabelsNotes.attr('data-testid', null).attr('data-id', null);\n    }\n  }\n\n  renderRootElements() {\n    this.svg = select(this.pieChartEl)\n      .select('.visa-viz-d3-pie-container')\n      .append('svg')\n      .style('isolation', 'isolate')\n      .attr('width', this.width)\n      .attr('height', this.height)\n      .attr('viewBox', '0 0 ' + this.width + ' ' + this.height);\n\n    this.root = this.svg.append('g').attr('id', 'visa-viz-margin-container-g-' + this.chartID);\n\n    this.rootG = this.root.append('g').attr('id', 'visa-viz-padding-container-g-' + this.chartID);\n\n    this.pieG = this.rootG.append('g').attr('class', 'pie-group');\n\n    this.labelG = this.rootG.append('g').attr('class', 'pie-dataLabel-group');\n\n    this.refLabelG = this.rootG.append('g').attr('class', 'pie-dataLabel-group');\n\n    this.edgeG = this.rootG.append('g').attr('class', 'pie-edge-line-group');\n\n    this.subTitleG = select(this.pieChartEl).select('.pie-sub-title');\n\n    this.tooltipG = select(this.pieChartEl).select('.pie-tooltip');\n\n    this.references = this.rootG.append('g').attr('class', 'pie-reference-line-group');\n  }\n\n  reSetRoot() {\n    const changeSvg = prepareRenderChange({\n      selection: this.svg,\n      duration: this.duration,\n      namespace: 'root_reset',\n      easing: easeCircleIn\n    });\n\n    changeSvg\n      .attr('width', this.width)\n      .attr('height', this.height)\n      .attr('viewBox', '0 0 ' + this.width + ' ' + this.height);\n\n    const changeRoot = prepareRenderChange({\n      selection: this.root,\n      duration: this.duration,\n      namespace: 'root_reset',\n      easing: easeCircleIn\n    });\n\n    changeRoot.attr('transform', `translate(${this.margin.left}, ${this.margin.top})`);\n\n    const changeRootG = prepareRenderChange({\n      selection: this.rootG,\n      duration: this.duration,\n      namespace: 'root_reset',\n      easing: easeCircleIn\n    });\n\n    changeRootG.attr('transform', `translate(${this.padding.left + this.radius}, ${this.padding.top + this.radius})`);\n\n    setAccessibilityDescriptionWidth(this.chartID, this.width);\n  }\n\n  setGlobalSelections() {\n    const dataBoundToGeometries = this.pieG.selectAll('.arc').data(this.pieData, d => {\n      d[this.ordinalAccessor] = d.data[this.ordinalAccessor];\n      return d[this.ordinalAccessor];\n    });\n\n    this.enter = dataBoundToGeometries.enter().append('path');\n    this.exit = dataBoundToGeometries.exit();\n    this.update = dataBoundToGeometries.merge(this.enter);\n\n    this.exitSize = this.exit.size();\n    this.enterSize = this.enter.size();\n\n    const dataBoundToLabels = this.labelG.selectAll('.pie-dataLabel-highlight').data(this.pieData);\n    this.enteringLabels = dataBoundToLabels.enter().append('text');\n    this.exitingLabels = dataBoundToLabels.exit();\n    this.updatingLabels = dataBoundToLabels.merge(this.enteringLabels);\n\n    const dataBoundToLabelsNotes = this.labelG.selectAll('.pie-dataLabel-note').data(this.pieData);\n    this.enteringLabelsNotes = dataBoundToLabelsNotes.enter().append('text');\n    this.exitingLabelsNotes = dataBoundToLabelsNotes.exit();\n    this.updatingLabelsNotes = dataBoundToLabelsNotes.merge(this.enteringLabelsNotes);\n\n    const dataBoundToRefLabels = this.refLabelG.selectAll('.pie-dataLabel-highlight').data(this.refData);\n    this.enteringRefLabels = dataBoundToRefLabels.enter().append('text');\n    this.exitingRefLabels = dataBoundToRefLabels.exit();\n    this.updatingRefLabels = dataBoundToRefLabels.merge(this.enteringRefLabels);\n\n    const dataBoundToRefLabelsNotes = this.refLabelG.selectAll('.pie-dataLabel-note').data(this.refData);\n    this.enteringRefLabelsNotes = dataBoundToRefLabelsNotes.enter().append('text');\n    this.exitingRefLabelsNotes = dataBoundToRefLabelsNotes.exit();\n    this.updatingRefLabelsNotes = dataBoundToRefLabelsNotes.merge(this.enteringRefLabelsNotes);\n\n    const dataBoundToEdges = this.edgeG.selectAll('.edge-line').data(this.pieData);\n    this.enteringEdges = dataBoundToEdges.enter().append('path');\n    this.exitingEdges = dataBoundToEdges.exit();\n    this.updatingEdges = dataBoundToEdges.merge(this.enteringEdges);\n  }\n\n  updateInteractionState() {\n    removeHoverStrokes(this.svg.node());\n    // we created an \"opacity\" transition namespace in update's transition\n    // we override it here to instantly display opacity state (below)\n\n    // we use this.update and this.labelCurrent from setGlobalSelection here\n    // the lifecycle state does not matter (enter/update/exit)\n    // since interaction state can happen at any time\n    this.update\n      .attr('opacity', d =>\n        checkInteraction(\n          d.data,\n          1,\n          this.hoverOpacity,\n          this.hoverHighlight,\n          this.clickHighlight,\n          this.innerInteractionKeys\n        )\n      )\n      .attr('fill', (d, i) => {\n        return this.clickHighlight &&\n          this.clickHighlight.length > 0 &&\n          checkClicked(d.data, this.clickHighlight, this.innerInteractionKeys) &&\n          this.clickStyle.color\n          ? visaColors[this.clickStyle.color] || this.clickStyle.color\n          : this.hoverHighlight &&\n            checkHovered(d.data, this.hoverHighlight, this.innerInteractionKeys) &&\n            this.hoverStyle.color\n          ? visaColors[this.hoverStyle.color] || this.hoverStyle.color\n          : this.preppedData.length === 2 && i === 1\n          ? this.preparedColors[i]\n          : this.colorArr[i] || this.colorArr[0];\n      })\n      .attr('filter', (d, i, n) => {\n        if (!this.accessibility.hideStrokes && !select(n[i]).classed('geometryIsMoving')) {\n          const clicked =\n            this.clickHighlight &&\n            this.clickHighlight.length > 0 &&\n            checkClicked(d.data, this.clickHighlight, this.innerInteractionKeys);\n          const hovered = this.hoverHighlight && checkHovered(d.data, this.hoverHighlight, this.innerInteractionKeys);\n          const baseColor = this.preparedColors[i];\n          const state = clicked ? 'click' : hovered && !select(n[i]).classed('geometryIsMoving') ? 'hover' : 'rest';\n          const color =\n            clicked && this.clickStyle.color\n              ? visaColors[this.clickStyle.color] || this.clickStyle.color\n              : clicked\n              ? baseColor\n              : hovered && this.hoverStyle.color\n              ? visaColors[this.hoverStyle.color] || this.hoverStyle.color\n              : baseColor;\n          if (state === 'hover') {\n            drawHoverStrokes({\n              inputElement: n[i],\n              id: this.chartID,\n              key: d[this.ordinalAccessor], // this must match whatever is used to bind the data, otherwise i\n              strokeWidth: this.hoverStyle.strokeWidth,\n              fill: color\n            });\n          }\n          return this.strokes[state + color];\n        }\n        return null;\n      });\n\n    retainAccessFocus({\n      parentGNode: this.rootG.node()\n    });\n  }\n\n  setLabelOpacity() {\n    const labelOpacity = this.dataLabel.visible ? 1 : 0;\n    const noteOpacity = this.showLabelNote ? 1 : 0;\n    // for this we can combine the labels and notes selections\n    const tempLabels = this.updatingLabels.merge(this.updatingRefLabels);\n    const tempNotes = this.updatingLabelsNotes.merge(this.updatingRefLabelsNotes);\n\n    tempLabels\n      .attr('data-use-dx', true) // need to add this for remove piece of collision below\n      .attr('data-use-dy', true)\n      .attr('opacity', (d, i, n) => {\n        const prevOpacity = +select(n[i]).attr('opacity');\n        const styleVisibility = select(n[i]).style('visibility');\n        const targetOpacity =\n          checkInteraction(\n            d.data,\n            labelOpacity,\n            this.hoverOpacity,\n            this.hoverHighlight,\n            this.clickHighlight,\n            this.innerInteractionKeys\n          ) < 1\n            ? 0\n            : 1;\n        if ((targetOpacity === 1 && styleVisibility === 'hidden') || prevOpacity !== targetOpacity) {\n          if (targetOpacity === 1) {\n            select(n[i])\n              .classed('collision-added', true)\n              .style('visibility', null);\n          } else {\n            select(n[i]).classed('collision-removed', true);\n          }\n        }\n        return targetOpacity;\n      });\n    // addStrokeUnder(tempLabels, 'white');\n\n    tempNotes\n      .attr('data-use-dx', true) // need to add this for remove piece of collision below\n      .attr('data-use-dy', true)\n      .attr('opacity', (d, i, n) => {\n        const prevOpacity = +select(n[i]).attr('opacity');\n        const styleVisibility = select(n[i]).style('visibility');\n        const targetOpacity =\n          checkInteraction(\n            d.data,\n            noteOpacity,\n            this.hoverOpacity,\n            this.hoverHighlight,\n            this.clickHighlight,\n            this.innerInteractionKeys\n          ) < 1\n            ? 0\n            : 1;\n        if ((targetOpacity === 1 && styleVisibility === 'hidden') || prevOpacity !== targetOpacity) {\n          if (targetOpacity === 1) {\n            select(n[i])\n              .classed('collision-added', true)\n              .style('visibility', null);\n          } else {\n            select(n[i]).classed('collision-removed', true);\n          }\n        }\n        return targetOpacity;\n      });\n    // addStrokeUnder(tempNotes, 'white');\n\n    if (this.dataLabel.collisionHideOnly) {\n      const labelsAdded = tempLabels.filter((_, i, n) => select(n[i]).classed('collision-added'));\n      const labelsRemoved = tempLabels.filter((_, i, n) => select(n[i]).classed('collision-removed'));\n      const notesAdded = tempNotes.filter((_, i, n) => select(n[i]).classed('collision-added'));\n      const notesRemoved = tempNotes.filter((_, i, n) => select(n[i]).classed('collision-removed'));\n      const validPositions = ['middle']; // , 'left', 'right'];\n      const offsets = [1]; //,1,1];\n\n      // we can now remove labels as well if we need to...\n      if (labelsRemoved.size() > 0) {\n        this.bitmaps = resolveLabelCollision({\n          bitmaps: this.bitmaps,\n          labelSelection: labelsRemoved,\n          avoidMarks: [],\n          validPositions: ['middle'],\n          offsets: [1],\n          accessors: ['key'],\n          size: [roundTo(this.width, 0), roundTo(this.height, 0)],\n          hideOnly: false,\n          removeOnly: true\n        });\n\n        // remove temporary class now\n        labelsRemoved.classed('collision-removed', false);\n      }\n\n      if (notesRemoved.size() > 0) {\n        this.bitmaps = resolveLabelCollision({\n          bitmaps: this.bitmaps,\n          labelSelection: notesRemoved,\n          avoidMarks: [],\n          validPositions: ['middle'],\n          offsets: [1],\n          accessors: ['key'],\n          size: [roundTo(this.width, 0), roundTo(this.height, 0)],\n          hideOnly: false,\n          removeOnly: true\n        });\n\n        // remove temporary class now\n        notesRemoved.classed('collision-removed', false);\n      }\n\n      // we can now add labels as well if we need to...\n      if (labelsAdded.size() > 0) {\n        this.bitmaps = resolveLabelCollision({\n          bitmaps: this.bitmaps,\n          labelSelection: labelsAdded,\n          avoidMarks: [],\n          validPositions,\n          offsets,\n          accessors: [this.ordinalAccessor],\n          size: [roundTo(this.width, 0), roundTo(this.height, 0)], // we need the whole width and height for pie\n          hideOnly: this.dataLabel.visible && this.dataLabel.collisionHideOnly,\n          suppressMarkDraw: true\n        });\n\n        // remove temporary class now\n        labelsAdded.classed('collision-added', false);\n      }\n\n      // we can now add labels as well if we need to...\n      if (notesAdded.size() > 0) {\n        this.bitmaps = resolveLabelCollision({\n          bitmaps: this.bitmaps,\n          labelSelection: notesAdded,\n          avoidMarks: [],\n          validPositions,\n          offsets,\n          accessors: [this.ordinalAccessor],\n          size: [roundTo(this.width, 0), roundTo(this.height, 0)], // we need the whole width and height for pie\n          hideOnly: this.dataLabel.visible && this.dataLabel.collisionHideOnly,\n          suppressMarkDraw: true\n        });\n\n        // remove temporary class now\n        notesAdded.classed('collision-added', false);\n      }\n    }\n  }\n\n  checkLabelColorAgainstBackground(group) {\n    const placement = group === 'RefLabels' ? 'edge' : this.dataLabel.placement;\n\n    this.updatingLabels.attr('fill', (d, i, n) => this.textTreatmentHandler(d, i, n, placement));\n  }\n\n  textTreatmentHandler = (d, i, n, specifiedPlacement?) => {\n    const placement = specifiedPlacement || this.dataLabel.placement;\n    const bgColor =\n      this.clickHighlight &&\n      this.clickHighlight.length > 0 &&\n      checkClicked(d.data, this.clickHighlight, this.innerInteractionKeys) &&\n      this.clickStyle.color\n        ? visaColors[this.clickStyle.color] || this.clickStyle.color\n        : this.hoverHighlight &&\n          checkHovered(d.data, this.hoverHighlight, this.innerInteractionKeys) &&\n          this.hoverStyle.color\n        ? visaColors[this.hoverStyle.color] || this.hoverStyle.color\n        : this.preparedColors[i];\n\n    const color = placement === 'inside' ? autoTextColor(bgColor) : visaColors.dark_text;\n    const me = select(n[i]);\n    me.attr(\n      'filter',\n      !me.classed('textIsMoving')\n        ? createTextStrokeFilter({\n            root: this.svg.node(),\n            id: this.chartID,\n            color: placement === 'inside' ? bgColor : '#ffffff'\n          })\n        : null\n    );\n    return color;\n  };\n\n  enterGeometries() {\n    this.enter.interrupt();\n\n    this.enter\n      .attr('class', 'arc')\n      .classed('entering', true)\n      .attr('opacity', 0)\n      .on('click', !this.suppressEvents ? (d, i, n) => this.onClickHandler(d.data, n[i]) : null)\n      .on('mouseover', !this.suppressEvents ? (d, i, n) => this.onHoverHandler(d.data, n[i]) : null)\n      .on('mouseout', !this.suppressEvents ? () => this.onMouseOutHandler() : null)\n      .attr('cursor', !this.suppressEvents ? this.cursor : null)\n      .each((_d, i, n) => {\n        initializeElementAccess(n[i]);\n      });\n    this.update.order();\n  }\n\n  updateGeometries() {\n    this.update.interrupt();\n\n    // opacity\n    this.update\n      .transition('opacity')\n      .duration(this.duration)\n      .ease(easeCircleIn)\n      .attr('opacity', d =>\n        checkInteraction(\n          d.data,\n          1,\n          this.hoverOpacity,\n          this.hoverHighlight,\n          this.clickHighlight,\n          this.innerInteractionKeys\n        )\n      );\n  }\n\n  exitGeometries() {\n    this.exit.interrupt();\n\n    this.exit\n      .transition('exit')\n      .duration(this.duration)\n      .ease(easeCircleIn)\n      .attr('opacity', 0)\n      [this.duration ? 'attrTween' : 'attr']('d', (_d, i, n) => {\n        const end = {\n          startAngle: 0,\n          endAngle: 0,\n          innerRadius: this.innerRadius,\n          outerRadius: this.outerRadius\n        };\n        if (!this.duration) {\n          return this.arc(end);\n        }\n        const me = n[i];\n        const interpolator = interpolate(me._current, end);\n        return t => {\n          me._current = interpolator(t);\n          return this.arc(me._current);\n        };\n      });\n\n    // We use this.update instead of this.exit to ensure the functions at the end\n    // of our lifecycle run, even though we are removing the exiting elements from\n    // inside this transition's endAll.\n    // (If we put this in this.exit, it will only run if elements exit.\n    // We want this to run every lifecycle.)\n    this.update\n      .transition('accessibilityAfterExit')\n      .duration(this.duration)\n      .ease(easeCircleIn)\n      .call(transitionEndAll, () => {\n        // before we exit geometries, we need to check if a focus exists or not\n        const focusDidExist = checkAccessFocus(this.rootG.node());\n        // then we must remove the exiting elements\n        this.exit.remove();\n        // then our util can count geometries\n        this.setChartCountAccessibility();\n        // our group's label should update with new counts too\n        this.setGroupAccessibilityID();\n        // since items exited, labels must receive updated values\n        this.setGeometryAriaLabels();\n        // and also make sure the user's focus isn't lost\n        retainAccessFocus({\n          parentGNode: this.rootG.node(),\n          focusDidExist\n          // recursive: true\n        });\n      });\n  }\n\n  drawGeometries() {\n    this.update\n      .classed('geometryIsMoving', (d, i, n) => {\n        const geometryIsUpdating = checkAttributeTransitions(select(n[i]), [\n          {\n            attr: 'd',\n            newValue: this.arc({\n              startAngle: d.startAngle,\n              endAngle: d.endAngle,\n              innerRadius: this.innerRadius,\n              outerRadius: this.outerRadius\n            })\n          }\n        ]);\n        return geometryIsUpdating;\n      })\n      .attr('data-translate-x', this.radius + this.padding.left + this.margin.left)\n      .attr('data-translate-y', this.radius + this.padding.top + this.margin.top)\n      // .attr('data-fill', this.dataLabel.placement !== 'inside') // we don't need fill anymore\n      // if we bring back placement we may need it again\n      .attr('data-d', (d, i, n) => {\n        const me = n[i];\n        let inner = 'inner';\n        let arcPadding = 0;\n        if (this.dataLabel.placement !== 'inside') {\n          inner = 'outer';\n          arcPadding = this.labelOffset;\n        }\n        const end = {\n          startAngle: d.startAngle,\n          endAngle: d.endAngle,\n          innerRadius: this.innerRadius,\n          outerRadius: this.outerRadius\n        };\n        const labelEnd = {\n          startAngle: d.startAngle,\n          endAngle: d.endAngle,\n          innerRadius: this[inner + 'Radius'] + arcPadding,\n          outerRadius: this.outerRadius + arcPadding\n        };\n        // data-fake-x/y is used to pass the outer label placement\n        // without that effecting how the bitmap understands\n        // the pie geometetry itself\n        select(me)\n          .attr('data-fake-x', this.arc.centroid(labelEnd)[0])\n          .attr('data-fake-y', this.arc.centroid(labelEnd)[1])\n          .attr('data-r', 1);\n        return this.arc(end);\n      })\n      .transition('update')\n      .duration(this.duration)\n      .ease(easeCircleIn)\n      [this.duration ? 'attrTween' : 'attr']('d', (d, i, n) => {\n        const me = n[i];\n        let start = me._current;\n        const end = {\n          startAngle: d.startAngle,\n          endAngle: d.endAngle,\n          innerRadius: this.innerRadius,\n          outerRadius: this.outerRadius\n        };\n        if (select(n[i]).classed('entering')) {\n          start = {\n            startAngle: 0,\n            endAngle: 0,\n            innerRadius: this.innerRadius,\n            outerRadius: this.outerRadius\n          };\n          select(n[i]).classed('entering', false);\n        }\n        const interpolator = interpolate(start, end);\n        if (!this.duration) {\n          me._current = interpolator(1);\n          return this.arc(end);\n        }\n        return t => {\n          me._current = interpolator(t);\n          return this.arc(me._current);\n        };\n      })\n      .call(transitionEndAll, () => {\n        this.update.classed('geometryIsMoving', false);\n        this.updateInteractionState();\n\n        // we must make sure if geometries move, that our focus indicator does too\n        retainAccessFocus({\n          parentGNode: this.rootG.node()\n          // focusDidExist // this only matters for exiting selections\n          // recursive: true // this only matters for\n        });\n\n        // now we can emit the event that transitions are complete\n        this.transitionEndEvent.emit({ chartID: this.chartID });\n      });\n  }\n\n  setSelectedClass() {\n    this.update\n      .classed('highlight', d => {\n        const selected = checkInteraction(d.data, true, false, '', this.clickHighlight, this.innerInteractionKeys);\n        return this.clickHighlight && this.clickHighlight.length ? selected : false;\n      })\n      .each((d, i, n) => {\n        let selected = checkInteraction(d.data, true, false, '', this.clickHighlight, this.innerInteractionKeys);\n        selected = this.clickHighlight && this.clickHighlight.length ? selected : false;\n        const selectable = this.accessibility.elementsAreInterface;\n        setElementInteractionAccessState(n[i], selected, selectable);\n      });\n  }\n\n  drawReferenceLines() {\n    const currentRefPie = this.references.selectAll('.arc-ref').data(this.refData);\n    const enterRefPie = currentRefPie\n      .enter()\n      .append('path')\n      .attr('opacity', 0)\n      .attr('class', 'arc-ref')\n      .attr('fill', 'none')\n      .attr('stroke-width', 0)\n      .classed('entering', true)\n      .each((_d, i, n) => {\n        initializeElementAccess(n[i]);\n      });\n\n    const exitRefPie = currentRefPie.exit();\n    exitRefPie\n      .transition('exit')\n      .duration(this.duration)\n      .ease(easeCircleIn)\n      .attr('opacity', 0)\n      [this.duration ? 'attrTween' : 'attr']('d', (_, i, n) => {\n        const me = n[i];\n        const start = me._current;\n        const end = {\n          startAngle: 0,\n          endAngle: 0,\n          innerRadius: Math.max(0, this.innerRadius - 5),\n          outerRadius: this.outerRadius + 5\n        };\n        const interpolator = interpolate(start, end);\n        if (!this.duration) {\n          return this.arc(end);\n        }\n        return t => {\n          me._current = interpolator(t);\n          return this.arc(me._current);\n        };\n      })\n      .remove();\n\n    this.updateRefPie = currentRefPie.merge(enterRefPie).classed('ignore', (_, i) => (i === 0 ? false : true));\n\n    this.updateRefPie\n      .attr('opacity', this.referenceStyle.opacity)\n      .attr('stroke-dasharray', this.referenceStyle.dashed)\n      .transition('update')\n      .duration(this.duration)\n      .ease(easeCircleIn)\n      .attr('stroke-width', this.innerRatio !== 0 ? 3 : 0)\n      .attr(this.innerRatio !== 0 ? 'fill' : 'stroke', 'rgba(0,0,0,0)')\n      .attr(this.innerRatio !== 0 ? 'stroke' : 'fill', (_, i) => {\n        // d.fill = this.colorArr[i];\n        return (\n          visaColors[this.referenceStyle.color] || this.referenceStyle.color || this.preparedColors[i]\n        ); /* refIsLarger ? this.colorArr[i] :*/\n      })\n      [this.duration ? 'attrTween' : 'attr']('d', (d, i, n) => {\n        const end = {\n          startAngle: d.endAngle,\n          endAngle: d.endAngle,\n          innerRadius: Math.max(0, this.innerRadius - 5),\n          outerRadius: this.outerRadius + 5\n        };\n        const me = n[i];\n        let start = me._current;\n        if (select(me).classed('entering')) {\n          start = {\n            startAngle: 0,\n            endAngle: 0,\n            innerRadius: Math.max(0, this.innerRadius - 5),\n            outerRadius: this.outerRadius + 5\n          };\n          select(me).classed('entering', false);\n        }\n        const interpolator = interpolate(start, end);\n        if (!this.duration) {\n          me._current = interpolator(1);\n          return this.arc(end);\n        }\n        return t => {\n          me._current = interpolator(t);\n          return this.arc(me._current);\n        };\n      });\n  }\n\n  enterLabels(group) {\n    const placement = group === 'RefLabels' ? 'edge' : this.dataLabel.placement;\n    const labelOpacity = this.dataLabel.visible ? 1 : 0;\n    const noteOpacity = this.showLabelNote ? 1 : 0;\n\n    this['entering' + group]\n      .attr('class', 'pie-dataLabel-highlight')\n      .attr('opacity', 0)\n      .attr('opacity', d =>\n        checkInteraction(\n          d.data,\n          labelOpacity,\n          this.hoverOpacity,\n          this.hoverHighlight,\n          this.clickHighlight,\n          this.innerInteractionKeys\n        ) < 1\n          ? 0\n          : Number.EPSILON\n      )\n      .classed('entering', true)\n      .attr('fill', (d, i, n) => this.textTreatmentHandler(d, i, n, placement))\n      .attr('cursor', !this.suppressEvents && group !== 'RefLabels' ? this.cursor : null)\n      .on(\n        'click',\n        !this.suppressEvents && group !== 'RefLabels' ? (d, i, n) => this.onClickHandler(d.data, n[i]) : null\n      )\n      .on(\n        'mouseover',\n        !this.suppressEvents && group !== 'RefLabels' ? (d, i, n) => this.onHoverHandler(d.data, n[i]) : null\n      )\n      .on('mouseout', !this.suppressEvents && group !== 'RefLabels' ? () => this.onMouseOutHandler() : null);\n\n    this['entering' + group + 'Notes']\n      .attr('class', 'pie-dataLabel-note')\n      .attr('opacity', 0)\n      .attr('opacity', d =>\n        checkInteraction(\n          d.data,\n          noteOpacity,\n          this.hoverOpacity,\n          this.hoverHighlight,\n          this.clickHighlight,\n          this.innerInteractionKeys\n        ) < 1\n          ? 0\n          : Number.EPSILON\n      )\n      .classed('entering', true)\n      .attr('cursor', !this.suppressEvents && group !== 'RefLabels' ? this.cursor : null)\n      .on(\n        'click',\n        !this.suppressEvents && group !== 'RefLabels' ? (d, i, n) => this.onClickHandler(d.data, n[i]) : null\n      )\n      .on(\n        'mouseover',\n        !this.suppressEvents && group !== 'RefLabels' ? (d, i, n) => this.onHoverHandler(d.data, n[i]) : null\n      )\n      .on('mouseout', !this.suppressEvents && group !== 'RefLabels' ? () => this.onMouseOutHandler() : null);\n  }\n\n  updateLabels(group) {\n    this.updatingLabels.interrupt();\n    const labelOpacity = this.dataLabel.visible ? 1 : 0;\n    const noteOpacity = this.showLabelNote ? 1 : 0;\n\n    this['updating' + group]\n      .transition('opacity')\n      .ease(easeCircleIn)\n      .duration(this.duration)\n      .attr('opacity', d =>\n        checkInteraction(\n          d.data,\n          labelOpacity,\n          this.hoverOpacity,\n          this.hoverHighlight,\n          this.clickHighlight,\n          this.innerInteractionKeys\n        ) < 1\n          ? 0\n          : 1\n      );\n\n    this['updating' + group + 'Notes']\n      .transition('opacity')\n      .duration(this.duration)\n      .ease(easeCircleIn)\n      .attr('opacity', d =>\n        checkInteraction(\n          d.data,\n          noteOpacity,\n          this.hoverOpacity,\n          this.hoverHighlight,\n          this.clickHighlight,\n          this.innerInteractionKeys\n        ) < 1\n          ? 0\n          : 1\n      );\n  }\n\n  exitLabels(group) {\n    const placement = group === 'RefLabels' ? 'edge' : this.dataLabel.placement;\n\n    this['exiting' + group]\n      .transition('exit')\n      .duration(this.duration)\n      .ease(easeCircleIn)\n      .attr('opacity', 0)\n      [this.duration ? 'attrTween' : 'attr']('x', (d, i, n) => {\n        const me = n[i];\n        let inner = 'inner';\n        let arcPadding = 0;\n        if (placement !== 'inside') {\n          inner = 'outer';\n          arcPadding = this.labelOffset;\n        }\n        const end = {\n          startAngle: 0,\n          start: 0,\n          endAngle: 0,\n          innerRadius: this[inner + 'Radius'] + arcPadding,\n          outerRadius: this.outerRadius + arcPadding\n        };\n        if (!this.duration) {\n          select(me).attr('y', this.arc.centroid(end)[1]);\n          select(me).text(\n            placement === 'edge' && i === this.preppedData.length - 1 && group !== 'RefLabels'\n              ? ''\n              : this.showPercentage\n              ? formatStats((d.endAngle - d.startAngle) / (2 * Math.PI), '0.0%')\n              : this.dataLabel.format\n              ? formatStats(d.data[this.valueAccessor], this.dataLabel.format)\n              : d.data[this.valueAccessor]\n          );\n          return this.arc.centroid(end)[0];\n        }\n        const interpolator = interpolate(me._current, end);\n        return t => {\n          me._current = interpolator(t);\n          select(me).attr('y', this.arc.centroid(me._current)[1]);\n          select(me).text(\n            placement === 'edge' && i === this.preppedData.length - 1 && group !== 'RefLabels'\n              ? ''\n              : this.showPercentage\n              ? formatStats((me._current.endAngle - me._current.start) / (2 * Math.PI), '0.[0]%')\n              : this.dataLabel.format\n              ? formatStats(me._current.value, this.dataLabel.format)\n              : me._current.value\n          );\n          return this.arc.centroid(me._current)[0];\n        };\n      })\n      .remove();\n\n    this['exiting' + group + 'Notes']\n      .transition('exit')\n      .duration(this.duration)\n      .ease(easeCircleIn)\n      .attr('opacity', 0)\n      [this.duration ? 'attrTween' : 'attr']('x', (_d, i, n) => {\n        const me = n[i];\n        let inner = 'inner';\n        let arcPadding = 0;\n        if (placement !== 'inside') {\n          inner = 'outer';\n          arcPadding = this.labelOffset;\n        }\n        const end = {\n          value: 0,\n          startAngle: 0,\n          endAngle: 0,\n          innerRadius: this[inner + 'Radius'] + arcPadding,\n          outerRadius: this.outerRadius + arcPadding\n        };\n        if (!this.duration) {\n          select(me).attr('y', this.arc.centroid(end)[1]);\n          return this.arc.centroid(end)[0];\n        }\n        const interpolator = interpolate(me._current, end);\n        return t => {\n          me._current = interpolator(t);\n          select(me).attr('y', this.arc.centroid(me._current)[1]);\n          return this.arc.centroid(me._current)[0];\n        };\n      })\n      .remove();\n  }\n\n  drawDataLabels(group) {\n    const placement = group === 'RefLabels' ? 'edge' : this.dataLabel.placement;\n\n    // for the first call only to this do we create the base bitmap, all other stuff just adds to it\n    if (group === 'Labels' && this.dataLabel.visible && this.dataLabel.collisionHideOnly) {\n      let titleRoot = this.rootG.select('.pie-center-title-group').selectAll('text');\n      this.bitmaps = resolveLabelCollision({\n        labelSelection: select('.empty-stuff-vcc-do-not-use'),\n        avoidMarks: [titleRoot, this.updatingEdges, this.update],\n        validPositions: ['middle'],\n        offsets: [1],\n        accessors: [this.ordinalAccessor],\n        size: [roundTo(this.width, 0), roundTo(this.height, 0)] // we need the whole width and height for pie\n      });\n    }\n\n    this['updating' + group]\n      .style('visibility', (_, i, n) =>\n        this.dataLabel.placement === 'auto' || this.dataLabel.collisionHideOnly\n          ? select(n[i]).style('visibility')\n          : null\n      )\n      .transition('update')\n      .duration(this.duration)\n      .ease(easeCircleIn)\n      [this.duration ? 'attrTween' : 'attr']('x', (d, i, n) => {\n        const me = n[i];\n        let start = me._current;\n        let innerRadius = 'innerRadius';\n        let arcPadding = 0;\n        let startAngle = 'startAngle';\n        if (placement !== 'inside') {\n          innerRadius = 'outerRadius';\n          arcPadding = this.labelOffset;\n        }\n        if (placement === 'edge') {\n          startAngle = 'endAngle';\n        }\n\n        const end = {\n          value: d.data[this.valueAccessor],\n          start: d.startAngle,\n          startAngle: d[startAngle],\n          endAngle: d.endAngle,\n          innerRadius: this[innerRadius] + arcPadding,\n          outerRadius: this.outerRadius + arcPadding\n        };\n        select(me)\n          .attr('data-use-dx', true)\n          .attr('data-use-dy', true)\n          .attr('data-translate-x', this.radius + this.padding.left + this.margin.left)\n          .attr('data-translate-y', this.radius + this.padding.top + this.margin.top)\n          .attr('data-x', this.arc.centroid(end)[0])\n          .attr('data-y', this.arc.centroid(end)[1])\n          .attr('data-r', 1)\n          .attr('dx', 0)\n          .attr('dy', placement === 'inside' ? '0.1em' : 0)\n          .attr(\n            'text-anchor',\n            placement === 'inside'\n              ? 'middle'\n              : placement === 'edge'\n              ? d.endAngle < Math.PI\n                ? 'start'\n                : 'end'\n              : d.startAngle + (d.endAngle - d.startAngle) / 2 < Math.PI\n              ? 'start'\n              : 'end'\n          )\n          .text(\n            // we need text end point to determine if we can fit label (gets reset by interpolation below)\n            placement === 'edge' && i === this.preppedData.length - 1 && group !== 'RefLabels'\n              ? ''\n              : this.showPercentage\n              ? formatStats((d.endAngle - d.startAngle) / (2 * Math.PI), '0.0%')\n              : this.dataLabel.format\n              ? formatStats(d.data[this.valueAccessor], this.dataLabel.format)\n              : d.data[this.valueAccessor]\n          );\n\n        if (select(me).classed('entering')) {\n          start = {\n            value: d.data[this.valueAccessor],\n            start: d.startAngle,\n            startAngle: 0,\n            endAngle: 0,\n            innerRadius: this[innerRadius] + arcPadding,\n            outerRadius: this.outerRadius + arcPadding\n          };\n          select(me).classed('entering', false);\n        }\n        const interpolator = interpolate(start, end);\n        if (this.dataLabel.visible && this.dataLabel.collisionHideOnly) {\n          const validPositions = ['middle']; // , 'left', 'right'];\n          const offsets = [1]; //,1,1];\n          this.bitmaps = resolveLabelCollision({\n            bitmaps: this.bitmaps,\n            labelSelection: select(me), // highlightLabels,\n            avoidMarks: [],\n            validPositions,\n            offsets,\n            accessors: [this.ordinalAccessor],\n            size: [roundTo(this.width, 0), roundTo(this.height, 0)], // we need the whole width and height for pie\n            hideOnly: this.dataLabel.visible && this.dataLabel.collisionHideOnly\n          });\n        }\n        if (!this.duration) {\n          me._current = interpolator(1);\n          select(me).attr('y', this.arc.centroid(end)[1]);\n          select(me).text(\n            placement === 'edge' && i === this.preppedData.length - 1 && group !== 'RefLabels'\n              ? ''\n              : this.showPercentage\n              ? formatStats((d.endAngle - d.startAngle) / (2 * Math.PI), '0.0%')\n              : this.dataLabel.format\n              ? formatStats(d.data[this.valueAccessor], this.dataLabel.format)\n              : d.data[this.valueAccessor]\n          );\n          return this.arc.centroid(end)[0];\n        }\n        return t => {\n          me._current = interpolator(t);\n          select(me).attr('y', this.arc.centroid(me._current)[1]);\n          select(me).text(\n            placement === 'edge' && i === this.preppedData.length - 1 && group !== 'RefLabels'\n              ? ''\n              : this.showPercentage\n              ? formatStats((me._current.endAngle - me._current.start) / (2 * Math.PI), '0.0%')\n              : this.dataLabel.format\n              ? formatStats(me._current.value, this.dataLabel.format)\n              : me._current.value\n          );\n          // addStrokeUnder(select(me), 'white');\n          return this.arc.centroid(me._current)[0];\n        };\n      })\n      .call(transitionEndAll, () => {\n        // addStrokeUnder(this['updating' + group], 'white');\n      });\n\n    this['updating' + group + 'Notes']\n      .style('visibility', (_, i, n) =>\n        this.dataLabel.placement === 'auto' || this.dataLabel.collisionHideOnly\n          ? select(n[i]).style('visibility')\n          : null\n      )\n      .transition('update')\n      .duration(this.duration)\n      .ease(easeCircleIn)\n      [this.duration ? 'attrTween' : 'attr']('x', (d, i, n) => {\n        const me = n[i];\n        let start = me._current;\n        const startAngle = placement === 'edge' ? 'endAngle' : 'startAngle';\n        if (select(n[i]).classed('entering')) {\n          start = {\n            startAngle: 0,\n            endAngle: 0,\n            innerRadius: this.outerRadius + this.labelOffset,\n            outerRadius: this.outerRadius + this.labelOffset\n          };\n          select(n[i]).classed('entering', false);\n        }\n        const end = {\n          startAngle: d[startAngle],\n          endAngle: d.endAngle,\n          innerRadius: this.outerRadius + this.labelOffset,\n          outerRadius: this.outerRadius + this.labelOffset\n        };\n        select(me)\n          .attr('data-use-dx', true)\n          .attr('data-use-dy', true)\n          .attr('data-translate-x', this.radius + this.padding.left + this.margin.left)\n          .attr('data-translate-y', this.radius + this.padding.top + this.margin.top + 5) // 10 is spacer to get algo to work for note\n          .attr('data-x', this.arc.centroid(end)[0])\n          .attr('data-y', this.arc.centroid(end)[1])\n          .attr('dx', 0) // can I move this here? was in a seperate update\n          .text(\n            placement === 'edge' && i === this.preppedData.length - 1 && group !== 'RefLabels'\n              ? ''\n              : d.data[this.ordinalAccessor]\n          ) // can I move this here? was in a seperate update\n          .attr('dy', placement === 'inside' ? 0 : '1.4em')\n          .attr(\n            'text-anchor',\n            placement === 'edge'\n              ? d.endAngle < Math.PI\n                ? 'start'\n                : 'end'\n              : d.startAngle + (d.endAngle - d.startAngle) / 2 < Math.PI\n              ? 'start'\n              : 'end'\n          );\n        const interpolator = interpolate(start, end);\n        if (this.showLabelNote && this.dataLabel.visible && this.dataLabel.collisionHideOnly) {\n          const validPositions = ['middle']; // , 'left', 'right'];\n          const offsets = [1]; //,1,1];\n          this.bitmaps = resolveLabelCollision({\n            bitmaps: this.bitmaps,\n            labelSelection: select(me), // highlightLabels,\n            avoidMarks: [],\n            validPositions,\n            offsets,\n            accessors: [this.ordinalAccessor],\n            size: [roundTo(this.width, 0), roundTo(this.height, 0)], // we need the whole width and height for pie\n            hideOnly: this.showLabelNote && this.dataLabel.visible && this.dataLabel.collisionHideOnly\n          });\n        }\n        if (!this.duration) {\n          me._current = interpolator(1);\n          select(me).attr('y', this.arc.centroid(end)[1]);\n          return this.arc.centroid(end)[0];\n        }\n        return t => {\n          me._current = interpolator(t);\n          select(me).attr('y', this.arc.centroid(me._current)[1]);\n          // addStrokeUnder(select(me), 'white');\n          return this.arc.centroid(me._current)[0];\n        };\n      })\n      .call(transitionEndAll, () => {\n        // addStrokeUnder(this['updating' + group + 'Notes'], 'white');\n      });\n  }\n\n  drawCenterTitle() {\n    let titleRoot = this.rootG.select('.pie-center-title-group');\n\n    if (this.defaults) {\n      titleRoot = this.rootG\n        .append('g')\n        .attr('class', 'pie-center-title-group')\n        .style('opacity', 1);\n\n      titleRoot\n        .append('text')\n        .attr('class', 'visa-ui-header--1 visa-viz-title')\n        .attr('text-anchor', 'middle')\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('fill', visaColors.dark_text);\n\n      titleRoot\n        .append('text')\n        .attr('class', 'visa-ui-text--body visa-viz-subtitle')\n        .attr('text-anchor', 'middle')\n        .attr('x', 0)\n        .attr('fill', visaColors.dark_text);\n    }\n    titleRoot\n      .select('.visa-viz-title')\n      .text(this.centerTitle)\n      .attr('data-fill', true)\n      .attr('data-width', (_, i, n) => {\n        if (this.dataLabel.visible && this.dataLabel.collisionHideOnly) {\n          const textElement = n[i];\n          const style = getComputedStyle(textElement);\n          const fontSize = parseFloat(style.fontSize);\n          const textWidth = getTextWidth(textElement.textContent, fontSize, true, style.fontFamily);\n          const textHeight = Math.max(fontSize - 1, 1); // clone.getBBox().height;\n          select(textElement)\n            .attr('data-x', 0)\n            .attr('data-y', -textHeight / 2)\n            .attr('data-height', textHeight)\n            .attr('data-translate-x', this.radius + this.padding.left + this.margin.left)\n            .attr('data-translate-y', this.radius + this.padding.top + this.margin.top);\n          return textWidth;\n        }\n      });\n    titleRoot\n      .select('.visa-viz-subtitle')\n      .attr('data-x', 0)\n      .attr('data-y', this.centerTitle ? 20 : 10)\n      .attr('y', this.centerTitle ? 20 : 10)\n      .text(this.centerSubTitle)\n      .attr('data-fill', true)\n      .attr('data-width', (_, i, n) => {\n        if (this.dataLabel.visible && this.dataLabel.collisionHideOnly) {\n          const textElement = n[i];\n          const style = getComputedStyle(textElement);\n          const fontSize = parseFloat(style.fontSize);\n          const textWidth = getTextWidth(textElement.textContent, fontSize, true, style.fontFamily);\n          const textHeight = Math.max(fontSize - 1, 1); // clone.getBBox().height;\n          select(textElement)\n            .attr('data-x', 0)\n            .attr('data-y', (this.centerTitle ? 20 : 10) - textHeight / 2)\n            .attr('data-height', textHeight)\n            .attr('data-translate-x', this.radius + this.padding.left + this.margin.left)\n            .attr('data-translate-y', this.radius + this.padding.top + this.margin.top);\n          return textWidth;\n        }\n      });\n\n    const filter = createTextStrokeFilter({\n      root: this.svg.node(),\n      id: this.chartID,\n      color: '#ffffff'\n    });\n    titleRoot.attr('filter', filter);\n\n    // addStrokeUnder(titleRoot.select('.visa-viz-title'), 'white');\n    // addStrokeUnder(titleRoot.select('.visa-viz-subtitle'), 'white');\n  }\n\n  enterEdgeLine() {\n    this.enteringEdges\n      .attr('class', 'edge-line')\n      .attr('opacity', 0)\n      .classed('entering', true)\n      .attr('stroke-width', 1)\n      .attr('stroke', visaColors.dark_text)\n      .attr('fill', 'none');\n  }\n\n  updateEdgeLine(group) {\n    let edgeOpacity = 1;\n    if (!(this.showEdgeLine || this.dataLabel.placement === 'edge')) {\n      edgeOpacity = 0;\n    }\n\n    this.updatingEdges\n      .transition('edgeOpacity')\n      .duration(this.duration)\n      .ease(easeCircleIn)\n      .attr('opacity', (_, i) => (group === 'refEdges' && i !== 0 ? 0 : edgeOpacity));\n  }\n\n  exitEdgeLine() {\n    this.exitingEdges\n      .transition('exit')\n      .duration(this.duration)\n      .ease(easeCircleIn)\n      .attr('opacity', 0)\n      [this.duration ? 'attrTween' : 'attr']('d', (_, i, n) => {\n        const me = n[i];\n        const end = {\n          startAngle: 0,\n          endAngle: 0,\n          innerRadius: (this.radius + this.radius * this.innerRatio) / 2,\n          outerRadius: (this.radius + this.radius * this.innerRatio) / 2\n        };\n        if (!this.duration) {\n          return this.arc(end);\n        }\n        const interpolator = interpolate(me._current, end);\n        return t => {\n          me._current = interpolator(t);\n          return this.arc(me._current);\n        };\n      })\n      .remove();\n  }\n\n  drawEdgeLine() {\n    this.updatingEdges\n      .attr('data-translate-x', this.radius + this.padding.left + this.margin.left)\n      .attr('data-translate-y', this.radius + this.padding.top + this.margin.top)\n      .attr('data-d', (d, i, n) => {\n        const me = n[i];\n        const end = {\n          startAngle: d.endAngle,\n          endAngle: d.endAngle,\n          innerRadius: Math.max(0, this.innerRadius - 5),\n          outerRadius: this.outerRadius + 5\n        };\n        select(me)\n          .attr('data-fake-x', this.arc.centroid(end)[0])\n          .attr('data-fake-y', this.arc.centroid(end)[1]);\n        return this.arc(end);\n      })\n      .transition('update')\n      .duration(this.duration)\n      .ease(easeCircleIn)\n      [this.duration ? 'attrTween' : 'attr']('d', (d, i, n) => {\n        const me = n[i];\n        let start = me._current;\n        if (select(me).classed('entering')) {\n          start = {\n            startAngle: 0,\n            endAngle: 0,\n            innerRadius: Math.max(0, this.innerRadius - 5),\n            outerRadius: this.outerRadius + 5\n          };\n          select(me).classed('entering', false);\n        }\n        const end = {\n          startAngle: d.endAngle,\n          endAngle: d.endAngle,\n          innerRadius: Math.max(0, this.innerRadius - 5),\n          outerRadius: this.outerRadius + 5\n        };\n        const interpolator = interpolate(start, end);\n        if (!this.duration) {\n          me._current = interpolator(1);\n          return this.arc(end);\n        }\n        return t => {\n          me._current = interpolator(t);\n          return this.arc(me._current);\n        };\n      });\n  }\n\n  drawAnnotations() {\n    annotate({\n      source: this.rootG.node(),\n      data: this.annotations,\n      // xScale: this.x,\n      // xAccessor: this.ordinalAccessor,\n      // yScale: this.y,\n      // yAccessor: this.valueAccessor\n      width: this.width,\n      height: this.height,\n      padding: this.padding,\n      margin: this.margin,\n      bitmaps: this.bitmaps\n    });\n  }\n\n  setAnnotationAccessibility() {\n    // console.log('---------this.refArr', this.refArr);\n    setAccessAnnotation(this.getLanguageString(), this.pieChartEl, this.annotations, this.refArr);\n  }\n\n  // new accessibility functions added here\n  setTagLevels() {\n    this.topLevel = findTagLevel(this.highestHeadingLevel);\n    this.bottomLevel = findTagLevel(this.highestHeadingLevel, 3);\n  }\n\n  setChartDescriptionWrapper() {\n    initializeDescriptionRoot({\n      language: this.getLanguageString(),\n      rootEle: this.pieChartEl,\n      title: this.accessibility.title || this.mainTitle,\n      chartTag: 'pie-chart',\n      uniqueID: this.chartID,\n      highestHeadingLevel: this.highestHeadingLevel,\n      redraw: this.shouldRedrawWrapper,\n      disableKeyNav:\n        this.suppressEvents &&\n        this.accessibility.elementsAreInterface === false &&\n        this.accessibility.keyboardNavConfig &&\n        this.accessibility.keyboardNavConfig.disabled,\n      hideDataTable: this.accessibility.hideDataTableButton\n    });\n    this.shouldRedrawWrapper = false;\n  }\n\n  setParentSVGAccessibility() {\n    setAccessibilityController({\n      chartTag: 'pie-chart',\n      language: this.getLanguageString(),\n      node: this.svg.node(),\n      title: this.accessibility.title || this.mainTitle,\n      description: this.subTitle,\n      uniqueID: this.chartID,\n      geomType: 'slice',\n      includeKeyNames: this.accessibility.includeDataKeyNames,\n      dataKeys: scopeDataKeys(this, chartAccessors, 'pie-chart'),\n      dataKeyNames: this.dataKeyNames,\n      // groupAccessor: this.groupAccessor // pie chart does not include these\n      groupName: 'pie',\n      disableKeyNav:\n        this.suppressEvents &&\n        this.accessibility.elementsAreInterface === false &&\n        this.accessibility.keyboardNavConfig &&\n        this.accessibility.keyboardNavConfig.disabled,\n      // groupKeys: [], // pie chart does not include these\n      // nested: '', // pie chart does not include these\n      // recursive: true // pie chart does not include these\n      normalized: this.showPercentage, // adds percentage to aria-label\n      valueAccessor: this.valueAccessor\n    });\n  }\n\n  setGeometryAccessibilityAttributes() {\n    this.update.each((_d, i, n) => {\n      initializeElementAccess(n[i]);\n    });\n    this.updateRefPie.each((_d, i, n) => {\n      initializeElementAccess(n[i]);\n    });\n  }\n\n  setGeometryAriaLabels() {\n    const keys = scopeDataKeys(this, chartAccessors, 'pie-chart');\n    this.update.each((_d, i, n) => {\n      setElementFocusHandler({\n        chartTag: 'pie-chart',\n        language: this.getLanguageString(),\n        node: n[i],\n        geomType: 'slice',\n        includeKeyNames: this.accessibility.includeDataKeyNames,\n        dataKeys: keys,\n        dataKeyNames: this.dataKeyNames,\n        groupName: 'pie',\n        uniqueID: this.chartID,\n        disableKeyNav:\n          this.suppressEvents &&\n          this.accessibility.elementsAreInterface === false &&\n          this.accessibility.keyboardNavConfig &&\n          this.accessibility.keyboardNavConfig.disabled,\n        normalized: this.showPercentage,\n        valueAccessor: this.valueAccessor\n      });\n      setElementAccessID({\n        node: n[i],\n        uniqueID: this.chartID\n      });\n    });\n    this.updateRefPie.each((_d, i, n) => {\n      setElementFocusHandler({\n        node: n[i],\n        geomType: 'slice',\n        includeKeyNames: this.accessibility.includeDataKeyNames,\n        dataKeys: keys,\n        groupName: 'pie',\n        uniqueID: this.chartID,\n        disableKeyNav:\n          this.suppressEvents &&\n          this.accessibility.elementsAreInterface === false &&\n          this.accessibility.keyboardNavConfig &&\n          this.accessibility.keyboardNavConfig.disabled,\n        normalized: this.showPercentage,\n        valueAccessor: this.valueAccessor\n      });\n      setElementAccessID({\n        node: n[i],\n        uniqueID: this.chartID\n      });\n    });\n  }\n\n  setGroupAccessibilityAttributes() {\n    // if a component's <g> elements can enter/exit, this will need to be called in the\n    // lifecycle more than just initially, like how setGeometryAccessibilityAttributes works\n    initializeElementAccess(this.pieG.node());\n  }\n\n  setGroupAccessibilityID() {\n    this.pieG.each((_, i, n) => {\n      setElementAccessID({\n        node: n[i],\n        uniqueID: this.chartID\n      });\n    });\n  }\n\n  setChartAccessibilityTitle() {\n    setAccessTitle(this.getLanguageString(), this.pieChartEl, this.accessibility.title || this.mainTitle);\n  }\n\n  setChartAccessibilitySubtitle() {\n    setAccessSubtitle(this.getLanguageString(), this.pieChartEl, this.subTitle);\n  }\n\n  setChartAccessibilityLongDescription() {\n    setAccessLongDescription(this.getLanguageString(), this.pieChartEl, this.accessibility.longDescription);\n  }\n\n  setChartAccessibilityExecutiveSummary() {\n    setAccessExecutiveSummary(this.getLanguageString(), this.pieChartEl, this.accessibility.executiveSummary);\n  }\n\n  setChartAccessibilityPurpose() {\n    setAccessPurpose(this.getLanguageString(), this.pieChartEl, this.accessibility.purpose);\n  }\n\n  setChartAccessibilityContext() {\n    setAccessContext(this.getLanguageString(), this.pieChartEl, this.accessibility.contextExplanation);\n  }\n\n  setChartAccessibilityStatisticalNotes() {\n    setAccessStatistics(this.getLanguageString(), this.pieChartEl, this.accessibility.statisticalNotes);\n  }\n\n  setChartCountAccessibility() {\n    setAccessChartCounts({\n      rootEle: this.pieChartEl,\n      parentGNode: this.pieG.node(), // pass the wrapper to <g> or geometries here, should be single node selection\n      chartTag: 'pie-chart',\n      geomType: 'slice',\n      groupName: 'pie'\n      // recursive: true // pie chart doesn't use this, so it is omitted\n    });\n  }\n\n  setChartAccessibilityStructureNotes() {\n    setAccessStructure(this.getLanguageString(), this.pieChartEl, this.accessibility.structureNotes);\n  }\n\n  onChangeHandler() {\n    if (this.accessibility && typeof this.accessibility.onChangeFunc === 'function') {\n      const d = {\n        updated: this.updated,\n        added: this.enterSize,\n        removed: this.exitSize\n      };\n      this.accessibility.onChangeFunc(d);\n    }\n    this.updated = false;\n    this.enterSize = 0;\n    this.exitSize = 0;\n  }\n\n  updateCursor() {\n    this.update.attr('cursor', !this.suppressEvents ? this.cursor : null);\n    this.updatingLabels.attr('cursor', !this.suppressEvents ? this.cursor : null);\n  }\n\n  bindInteractivity() {\n    this.update\n      .on('click', !this.suppressEvents ? (d, i, n) => this.onClickHandler(d.data, n[i]) : null)\n      .on('mouseover', !this.suppressEvents ? (d, i, n) => this.onHoverHandler(d.data, n[i]) : null)\n      .on('mouseout', !this.suppressEvents ? () => this.onMouseOutHandler() : null);\n\n    this.updatingLabels\n      .on('click', !this.suppressEvents ? (d, i, n) => this.onClickHandler(d.data, n[i]) : null)\n      .on('mouseover', !this.suppressEvents ? (d, i, n) => this.onHoverHandler(d.data, n[i]) : null)\n      .on('mouseout', !this.suppressEvents ? () => this.onMouseOutHandler() : null);\n    this.updatingLabelsNotes\n      .on('click', !this.suppressEvents ? (d, i, n) => this.onClickHandler(d.data, n[i]) : null)\n      .on('mouseover', !this.suppressEvents ? (d, i, n) => this.onHoverHandler(d.data, n[i]) : null)\n      .on('mouseout', !this.suppressEvents ? () => this.onMouseOutHandler() : null);\n  }\n\n  onClickHandler(d, n) {\n    this.clickEvent.emit({ data: d, target: n });\n  }\n\n  onHoverHandler(d, n) {\n    overrideTitleTooltip(this.chartID, true);\n    this.hoverEvent.emit({ data: d, target: n });\n    if (this.showTooltip) {\n      this.eventsTooltip({ data: d, evt: event, isToShow: true });\n    }\n  }\n\n  onMouseOutHandler() {\n    overrideTitleTooltip(this.chartID, false);\n    this.mouseOutEvent.emit();\n    if (this.showTooltip) {\n      this.eventsTooltip({ isToShow: false });\n    }\n  }\n\n  // set initial style (instead of copying css class across the lib)\n  setTooltipInitialStyle() {\n    initTooltipStyle(this.tooltipG);\n  }\n\n  // tooltip\n  eventsTooltip({ data, evt, isToShow }: { data?: any; evt?: any; isToShow: boolean }) {\n    drawTooltip({\n      root: this.tooltipG,\n      data,\n      event: evt,\n      isToShow,\n      tooltipLabel: this.tooltipLabel,\n      dataLabel: this.dataLabel,\n      dataKeyNames: this.dataKeyNames,\n      ordinalAccessor: this.ordinalAccessor,\n      valueAccessor: this.valueAccessor,\n      chartType: 'pie',\n      normalized: this.showPercentage\n    });\n  }\n\n  render() {\n    this.drawStartEvent.emit({ chartID: this.chartID });\n    // everything between this comment and the third should eventually\n    // be moved into componentWillUpdate (if the Stencil bug is fixed)\n    this.init();\n    if (this.shouldSetLocalizationConfig) {\n      this.setLocalizationConfig();\n      this.shouldSetLocalizationConfig = false;\n    }\n    if (this.shouldSetTagLevels) {\n      this.setTagLevels();\n      this.shouldSetTagLevels = false;\n    }\n    if (this.shouldUpdateScales) {\n      this.prepareScales();\n      this.shouldUpdateScales = false;\n    }\n    if (this.shouldUpdateData) {\n      this.prepareData();\n      this.shouldUpdateData = false;\n    }\n    if (this.shouldUpdateLayout) {\n      this.setLayoutData();\n      this.shouldUpdateLayout = false;\n    }\n    if (this.shouldSetPieRadius) {\n      this.setPieRadius();\n      this.shouldSetPieRadius = false;\n    }\n    if (this.shouldUpdateInnerRatio) {\n      this.setInnerRatio();\n      this.shouldUpdateInnerRatio = false;\n    }\n    if (this.shouldValidateInteractionKeys) {\n      this.validateInteractionKeys();\n      this.shouldValidateInteractionKeys = false;\n    }\n    if (this.shouldUpdateTableData) {\n      this.setTableData();\n      this.shouldUpdateTableData = false;\n    }\n    if (this.shouldValidate) {\n      this.shouldValidateAccessibilityProps();\n      this.shouldValidateLocalizationProps();\n      this.shouldValidateLocalizationProps();\n      this.shouldValidate = false;\n    }\n    if (this.shouldSetColors) {\n      this.setColors();\n      this.shouldSetColors = false;\n    }\n    // Everything between this comment and the first should eventually\n    // be moved into componentWillUpdate (if the Stencil bug is fixed)\n\n    return (\n      <div class=\"o-layout is--vertical\">\n        <div class=\"o-layout--chart\">\n          <this.topLevel class=\"pie-main-title vcl-main-title\">{this.mainTitle}</this.topLevel>\n          <this.bottomLevel class=\"visa-ui-text--instructions pie-sub-title vcl-sub-title\" />\n          <keyboard-instructions\n            uniqueID={this.chartID}\n            geomType={'slice'}\n            groupName={'pie'} // taken from initializeDescriptionRoot, on bar this should be \"bar group\", stacked bar is \"stack\", and clustered is \"cluster\"\n            language={this.getLanguageString()}\n            chartTag={'pie-chart'}\n            width={this.width - (this.margin ? this.margin.right || 0 : 0)}\n            isInteractive={this.accessibility.elementsAreInterface}\n            hasCousinNavigation={false} // pie-chart doesn't have a group accessor\n            disabled={\n              this.suppressEvents &&\n              this.accessibility.elementsAreInterface === false &&\n              this.accessibility.keyboardNavConfig &&\n              this.accessibility.keyboardNavConfig.disabled\n            } // the chart is \"simple\"\n          />\n          <div class=\"visa-viz-d3-pie-container\" />\n          <div class=\"pie-tooltip vcl-tooltip\" style={{ display: this.showTooltip ? 'block' : 'none' }} />\n          <data-table\n            uniqueID={this.chartID}\n            isCompact\n            language={this.getLanguageString()}\n            tableColumns={this.tableColumns}\n            dataKeyNames={this.dataKeyNames}\n            data={this.tableData}\n            padding={this.padding}\n            margin={this.margin}\n            hideDataTable={this.accessibility.hideDataTableButton}\n            unitTest={this.unitTest}\n          />\n        </div>\n        {/* <canvas id=\"bitmap-render\" /> */}\n      </div>\n    );\n  }\n\n  private init() {\n    const keys = Object.keys(PieChartDefaultValues);\n    let i = 0;\n    const exceptions = {\n      showLabelNote: {\n        exception: false\n      },\n      innerRatio: {\n        exception: 0\n      },\n      showPercentage: {\n        exception: false\n      },\n      showTooltip: {\n        exception: false\n      },\n      mainTitle: {\n        exception: ''\n      },\n      subTitle: {\n        exception: ''\n      },\n      hoverOpacity: {\n        exception: 0\n      }\n    };\n    for (i = 0; i < keys.length; i++) {\n      const exception = !exceptions[keys[i]] ? false : this[keys[i]] === exceptions[keys[i]].exception;\n      this[keys[i]] = this[keys[i]] || exception ? this[keys[i]] : PieChartDefaultValues[keys[i]];\n    }\n  }\n}\n\n// incorporate OSS licenses into build\nwindow['VisaChartsLibOSSLicenses'] = getLicenses(); // tslint:disable-line no-string-literal\n"],"mappings":"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","ignoreList":[]}